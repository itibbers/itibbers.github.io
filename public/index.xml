<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>itibbers</title>
    <link>https://itibbers.com/</link>
    <description>Recent content on itibbers</description>
    <image>
      <title>itibbers</title>
      <url>https://itibbers.com/og-image.png</url>
      <link>https://itibbers.com/og-image.png</link>
    </image>
    <generator>Hugo -- 0.147.9</generator>
    <language>en</language>
    <lastBuildDate>Sat, 30 May 2020 15:36:38 +0000</lastBuildDate>
    <atom:link href="https://itibbers.com/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>äºŒå‰æ ‘é”¯é½¿å½¢å±‚æ¬¡éå†</title>
      <link>https://itibbers.com/posts/%E4%BA%8C%E5%8F%89%E6%A0%91%E9%94%AF%E9%BD%BF%E5%BD%A2%E5%B1%82%E6%AC%A1%E9%81%8D%E5%8E%86/</link>
      <pubDate>Sat, 30 May 2020 15:36:38 +0000</pubDate>
      <guid>https://itibbers.com/posts/%E4%BA%8C%E5%8F%89%E6%A0%91%E9%94%AF%E9%BD%BF%E5%BD%A2%E5%B1%82%E6%AC%A1%E9%81%8D%E5%8E%86/</guid>
      <description>&lt;p&gt;BFS å¢åŠ  orderã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>BFS å¢åŠ  orderã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * Definition for a binary tree node.
</span></span></span><span class="line"><span class="cl"><span class="cm"> * function TreeNode(val) {
</span></span></span><span class="line"><span class="cl"><span class="cm"> *     this.val = val;
</span></span></span><span class="line"><span class="cl"><span class="cm"> *     this.left = this.right = null;
</span></span></span><span class="line"><span class="cl"><span class="cm"> * }
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @param {TreeNode} root
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @return {number[][]}
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">zigzagLevelOrder</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">root</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">queue</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">root</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">order</span> <span class="o">=</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">res</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="k">while</span> <span class="p">(</span><span class="nx">queue</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">length</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">arr</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">order</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">while</span> <span class="p">(</span><span class="nx">n</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">val</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">while</span> <span class="p">(</span><span class="nx">n</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="kd">let</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">val</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">left</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">res</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">arr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">order</span> <span class="o">=</span> <span class="o">!</span><span class="nx">order</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">res</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>11ä¸ªclassé€‰æ‹©å™¨å¯ä»¥å¹²æ‰1ä¸ªidé€‰æ‹©å™¨å—</title>
      <link>https://itibbers.com/posts/11%E4%B8%AAclass%E9%80%89%E6%8B%A9%E5%99%A8%E5%8F%AF%E4%BB%A5%E5%B9%B2%E6%8E%891%E4%B8%AAid%E9%80%89%E6%8B%A9%E5%99%A8%E5%90%97/</link>
      <pubDate>Wed, 27 May 2020 16:29:48 +0000</pubDate>
      <guid>https://itibbers.com/posts/11%E4%B8%AAclass%E9%80%89%E6%8B%A9%E5%99%A8%E5%8F%AF%E4%BB%A5%E5%B9%B2%E6%8E%891%E4%B8%AAid%E9%80%89%E6%8B%A9%E5%99%A8%E5%90%97/</guid>
      <description>&lt;p&gt;ä»Šå¤©é‡åˆ°ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼Œclass é€‰æ‹©å™¨æƒé‡æ˜¯ 10ï¼Œid é€‰æ‹©å™¨æƒé‡æ˜¯ 100ï¼Œé‚£ä¹ˆ 11 ä¸ª class é€‰æ‹©å™¨å¯ä»¥å¹²æ‰ 1 ä¸ª id é€‰æ‹©å™¨å—ï¼ŸğŸ˜‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>ä»Šå¤©é‡åˆ°ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼Œclass é€‰æ‹©å™¨æƒé‡æ˜¯ 10ï¼Œid é€‰æ‹©å™¨æƒé‡æ˜¯ 100ï¼Œé‚£ä¹ˆ 11 ä¸ª class é€‰æ‹©å™¨å¯ä»¥å¹²æ‰ 1 ä¸ª id é€‰æ‹©å™¨å—ï¼ŸğŸ˜‚</p>
<p>å…ˆæ¥ä¸€æ®µç®€å•çš„ html æµ‹è¯•ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;k&#34;</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;a b c d e f g h i j k&#34;</span><span class="p">&gt;</span>xxxxx<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;a&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;b&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;c&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;d&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;e&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;f&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;g&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;h&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;i&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;j&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;k&#34;</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;m&#34;</span><span class="p">&gt;</span>xxxx<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nc">a</span><span class="p">.</span><span class="nc">b</span><span class="p">.</span><span class="nc">c</span><span class="p">.</span><span class="nc">d</span><span class="p">.</span><span class="nc">e</span><span class="p">.</span><span class="nc">f</span><span class="p">.</span><span class="nc">g</span><span class="p">.</span><span class="nc">h</span><span class="p">.</span><span class="nc">i</span><span class="p">.</span><span class="nc">j</span><span class="p">.</span><span class="nc">k</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="kc">black</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">.</span><span class="nc">a</span> <span class="p">.</span><span class="nc">b</span> <span class="p">.</span><span class="nc">c</span> <span class="p">.</span><span class="nc">d</span> <span class="p">.</span><span class="nc">e</span> <span class="p">.</span><span class="nc">f</span> <span class="p">.</span><span class="nc">g</span> <span class="p">.</span><span class="nc">h</span> <span class="p">.</span><span class="nc">i</span> <span class="p">.</span><span class="nc">j</span> <span class="p">.</span><span class="nc">k</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="kc">red</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">#</span><span class="nn">k</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="kc">green</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">#</span><span class="nn">m</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">background</span><span class="p">:</span> <span class="kc">yellow</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">style</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>å‘ç°å¹¶ä¸èƒ½ï¼Œéš¾é“é€‰æ‹©å™¨çš„æƒé‡ä¸æ˜¯ 10 å’Œ 100ï¼Ÿ</p>
<p>æŸ¥äº† MDNï¼ŒåŒæ—¶é€šè¿‡ Google æœç´¢å‘ç°ï¼Œå¼ é‘«æ—­å¤§ä½¬ä»¥å‰å†™è¿‡çš„ä¸€ç¯‡æ–‡ç« ï¼Œæ€»ç»“å¦‚ä¸‹ï¼š
ä»¥å‰æµè§ˆå™¨é€šè¿‡ 8 ä½å­—èŠ‚å­˜å‚¨é€‰æ‹©å™¨ï¼Œäºæ˜¯åŒæ—¶å‡ºç° 256 ä¸ªé€‰æ‹©å™¨æº¢å‡ºåˆ°äº† id åŒºåŸŸï¼Œä½†æ˜¯ç°åœ¨è¿™ä¸ªé—®é¢˜æ—©è¢« Chrome ä¿®å¤äº†ã€‚
å…¶å®ƒæµè§ˆå™¨æœªéªŒè¯ï¼Œå½“ç„¶è¿™åªæ˜¯ä¸€ç§æœ‰è¶£çš„æç«¯æƒ…å†µï¼Œå¹³å¸¸å¼€å‘ä¸­åº”è¯¥ä¸ä¼šé‡åˆ°ã€‚</p>
<blockquote>
<p><a href="https://www.zhangxinxu.com/wordpress/2012/08/256-class-selector-beat-id-selector/">æœ‰è¶£ï¼š256 ä¸ª class é€‰æ‹©å™¨å¯ä»¥å¹²æ‰ 1 ä¸ª id é€‰æ‹©å™¨</a></p></blockquote>]]></content:encoded>
    </item>
    <item>
      <title>jsé“¾å¼è°ƒç”¨å’Œæµç¨‹æ§åˆ¶</title>
      <link>https://itibbers.com/posts/js%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8%E5%92%8C%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/</link>
      <pubDate>Mon, 11 May 2020 21:51:02 +0000</pubDate>
      <guid>https://itibbers.com/posts/js%E9%93%BE%E5%BC%8F%E8%B0%83%E7%94%A8%E5%92%8C%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6/</guid>
      <description>&lt;p&gt;å®ç°&lt;code&gt;new Person(&#39;xiaoming&#39;).say(&#39;hello&#39;).sleep(2).play(&#39;js&#39;).sleep(1).say(&#39;hhh&#39;)&lt;/code&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>å®ç°<code>new Person('xiaoming').say('hello').sleep(2).play('js').sleep(1).say('hhh')</code></p>
<p>é“¾å¼è°ƒç”¨æ²¡ä»€ä¹ˆå¯è¯´çš„ return this å°±å¥½äº†ï¼Œæ­¤å¤„çš„ sleep ä¹ä¸€çœ‹ç¡®å®ä¼šå¼•å‘ä¸€äº›æ€è€ƒï¼Œå…³é”®æ˜¯å¼‚æ­¥ä¹‹å this åœ¨å“ªé‡Œï¼Œé‚£è¿™ä¸ªæ—¶å€™å¯ä»¥åˆ›å»ºä¸€ä¸ªå¼‚æ­¥é˜Ÿåˆ—ã€‚(js event loop)
æ•´ä¸ªå®ç°å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ ¸å¿ƒéƒ¨åˆ†ï¼š</p>
<ol>
<li>ä¸²æ¥æ‰€æœ‰ this ï¼ˆé€šè¿‡ return this çš„æ–¹å¼ï¼‰</li>
<li>æŠŠæ‰€æœ‰ä»»åŠ¡æ”¾åˆ°ä»»åŠ¡é˜Ÿåˆ—é‡Œé¢</li>
<li>é€šè¿‡ä¸€ä¸ª next æ–¹æ³•æœ‰åºæ‰§è¡Œé˜Ÿåˆ—é‡Œé¢çš„ä»»åŠ¡</li>
</ol>
<p>å…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;: &#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">this</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Person</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">next</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fn</span> <span class="o">&amp;&amp;</span> <span class="nx">fn</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">play</span><span class="p">(</span><span class="nx">thing</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Playing </span><span class="si">${</span><span class="nx">thing</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">this</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">say</span><span class="p">(</span><span class="nx">thing</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Saying </span><span class="si">${</span><span class="nx">thing</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">this</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">sleep</span><span class="p">(</span><span class="nx">seconds</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">fn</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setTimeout</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// console.log(`Sleeping`)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">this</span><span class="p">.</span><span class="nx">next</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span> <span class="nx">seconds</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">tasks</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">this</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="s1">&#39;xiaoming&#39;</span><span class="p">).</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">).</span><span class="nx">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">).</span><span class="nx">play</span><span class="p">(</span><span class="s1">&#39;js&#39;</span><span class="p">).</span><span class="nx">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">).</span><span class="nx">say</span><span class="p">(</span><span class="s1">&#39;hhh&#39;</span><span class="p">)</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>å®ç°ä¸­æ–‡æ’åºã€æ•°å­—è‹±æ–‡æ··åˆæ’åº</title>
      <link>https://itibbers.com/posts/%E5%AE%9E%E7%8E%B0%E4%B8%AD%E6%96%87%E6%8E%92%E5%BA%8F%E6%95%B0%E5%AD%97%E8%8B%B1%E6%96%87%E6%B7%B7%E5%90%88%E6%8E%92%E5%BA%8F/</link>
      <pubDate>Mon, 09 Mar 2020 11:25:52 +0000</pubDate>
      <guid>https://itibbers.com/posts/%E5%AE%9E%E7%8E%B0%E4%B8%AD%E6%96%87%E6%8E%92%E5%BA%8F%E6%95%B0%E5%AD%97%E8%8B%B1%E6%96%87%E6%B7%B7%E5%90%88%E6%8E%92%E5%BA%8F/</guid>
      <description>&lt;p&gt;JS æ’åºï¼šlocaleCompare() æ–¹æ³•å®ç°ä¸­æ–‡æ’åºã€sort æ–¹æ³•å®ç°æ•°å­—è‹±æ–‡æ··åˆæ’åº&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>JS æ’åºï¼šlocaleCompare() æ–¹æ³•å®ç°ä¸­æ–‡æ’åºã€sort æ–¹æ³•å®ç°æ•°å­—è‹±æ–‡æ··åˆæ’åº</p>
<p>å®šä¹‰ï¼šç”¨æœ¬åœ°ç‰¹å®šçš„é¡ºåºæ¥æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>è¯­æ³•ï¼šstringObject.localeCompare(target)</p>
<p>å‚æ•°ï¼štargetâ€”â€”è¦ä»¥æœ¬åœ°ç‰¹å®šçš„é¡ºåºä¸ stringObject è¿›è¡Œæ¯”è¾ƒçš„å­—ç¬¦ä¸²ã€‚</p>
<p>è¿”å›å€¼ï¼šè¯´æ˜æ¯”è¾ƒç»“æœçš„æ•°å­—ã€‚</p>
<p>ï¼ˆ1ï¼‰å¦‚æœ stringObject å°äº targetï¼Œåˆ™ localeCompare() è¿”å›å°äº 0 çš„æ•°ã€‚</p>
<p>ï¼ˆ2ï¼‰å¦‚æœ stringObject å¤§äº targetï¼Œåˆ™è¯¥æ–¹æ³•è¿”å›å¤§äº 0 çš„æ•°ã€‚</p>
<p>ï¼ˆ3ï¼‰å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œæˆ–æ ¹æ®æœ¬åœ°æ’åºè§„åˆ™æ²¡æœ‰åŒºåˆ«ï¼Œè¯¥æ–¹æ³•è¿”å› 0ã€‚</p>
<p>è¯´æ˜ï¼šæŠŠ &lt; å’Œ &gt; è¿ç®—ç¬¦åº”ç”¨åˆ°å­—ç¬¦ä¸²æ—¶ï¼Œå®ƒä»¬åªç”¨å­—ç¬¦çš„ Unicode ç¼–ç æ¯”è¾ƒå­—ç¬¦ä¸²ï¼Œè€Œä¸è€ƒè™‘å½“åœ°çš„æ’åºè§„åˆ™ã€‚ä»¥è¿™ç§æ–¹æ³•ç”Ÿæˆçš„é¡ºåºä¸ä¸€å®šæ˜¯æ­£ç¡®çš„ã€‚localeCompare() æ–¹æ³•æä¾›çš„æ¯”è¾ƒå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œè€ƒè™‘äº†é»˜è®¤çš„æœ¬åœ°æ’åºè§„åˆ™ã€‚ECMAscript æ ‡å‡†å¹¶æ²¡æœ‰è§„å®šå¦‚ä½•è¿›è¡Œæœ¬åœ°ç‰¹å®šçš„æ¯”è¾ƒæ“ä½œï¼Œå®ƒåªè§„å®šè¯¥å‡½æ•°é‡‡ç”¨åº•å±‚æ“ä½œç³»ç»Ÿæä¾›çš„æ’åºè§„åˆ™ã€‚</p>
<p>å®ä¾‹ï¼š</p>
<h2 id="1å¯ä»¥ä½¿ç”¨-localecompare-æ–¹æ³•æ¥å®ç°ä¸­æ–‡æŒ‰ç…§æ‹¼éŸ³æ’åºæ–¹æ³•ç›¸å½“ç®€å•">1ã€å¯ä»¥ä½¿ç”¨ localeCompare() æ–¹æ³•æ¥å®ç°ä¸­æ–‡æŒ‰ç…§æ‹¼éŸ³æ’åºï¼Œæ–¹æ³•ç›¸å½“ç®€å•</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;ç™½é¸½&#39;</span><span class="p">,</span> <span class="s1">&#39;éº»é›€&#39;</span><span class="p">,</span> <span class="s1">&#39;å¤§è±¡&#39;</span><span class="p">,</span> <span class="s1">&#39;ç‹—&#39;</span><span class="p">,</span> <span class="s1">&#39;çŒ«&#39;</span><span class="p">,</span> <span class="s1">&#39;é¸¡&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">array</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="nx">compareFunction</span><span class="p">(</span><span class="nx">item1</span><span class="p">,</span> <span class="nx">item2</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">item1</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">item2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="c1">//[&#34;ç™½é¸½&#34;, &#34;å¤§è±¡&#34;, &#34;ç‹—&#34;, &#34;é¸¡&#34;, &#34;éº»é›€&#34;, &#34;çŒ«&#34;]
</span></span></span></code></pre></div><p>è€Œä¸”å¯ä»¥é€šè¿‡å¦‚ä¸‹ä»£ç å®ç°ä¸­æ–‡æŒ‰ç…§æ‹¼éŸ³æ’åºï¼Œå¹¶ä¸”å¯ä»¥å°†ä¸­æ–‡æŒ‰ç…§ a,b,c,dâ€¦â€¦è¿›è¡ŒåŒºåˆ†ã€‚ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">pySegSort</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="nx">empty</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">String</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">letters</span> <span class="o">=</span> <span class="s1">&#39;*abcdefghjklmnopqrstwxyz&#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">zh</span> <span class="o">=</span> <span class="s1">&#39;é˜¿å…«åš“å“’å¦¸å‘æ—®å“ˆè®¥å’”åƒç—³æ‹å™¢å¦‘ä¸ƒå‘¥æ‰¨å®ƒç©µå¤•ä¸«å¸€&#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">segs</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">curr</span>
</span></span><span class="line"><span class="cl">  <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">letters</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">curr</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">letter</span><span class="o">:</span> <span class="k">this</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[]</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">arr</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">((</span><span class="o">!</span><span class="nx">zh</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="nx">zh</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">localeCompare</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">zh</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">curr</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">this</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">empty</span> <span class="o">||</span> <span class="nx">curr</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">segs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">curr</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="nx">curr</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">segs</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pySegSort</span><span class="p">([</span><span class="s1">&#39;ç™½é¸½&#39;</span><span class="p">,</span> <span class="s1">&#39;éº»é›€&#39;</span><span class="p">,</span> <span class="s1">&#39;é»‘&#39;</span><span class="p">,</span> <span class="s1">&#39;å¤§è±¡&#39;</span><span class="p">,</span> <span class="s1">&#39;ç‹—&#39;</span><span class="p">,</span> <span class="s1">&#39;çŒ«&#39;</span><span class="p">,</span> <span class="s1">&#39;å¦ˆå¦ˆ&#39;</span><span class="p">,</span> <span class="s1">&#39;é©¬&#39;</span><span class="p">,</span> <span class="s1">&#39;é¸¡&#39;</span><span class="p">,</span> <span class="s1">&#39;ç˜¦&#39;</span><span class="p">,</span> <span class="s1">&#39;èƒ–&#39;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">  <span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span></code></pre></div><p>ç»“æœæ˜¾ç¤ºä¸ºï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="p">;[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">letter</span><span class="o">:</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;ç™½é¸½&#39;</span><span class="p">]</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">letter</span><span class="o">:</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;å¤§è±¡&#39;</span><span class="p">]</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">letter</span><span class="o">:</span> <span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;ç‹—&#39;</span><span class="p">]</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">letter</span><span class="o">:</span> <span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;é»‘&#39;</span><span class="p">]</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">letter</span><span class="o">:</span> <span class="s1">&#39;j&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;é¸¡&#39;</span><span class="p">]</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">letter</span><span class="o">:</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;å¦ˆå¦ˆ&#39;</span><span class="p">,</span> <span class="s1">&#39;éº»é›€&#39;</span><span class="p">,</span> <span class="s1">&#39;é©¬&#39;</span><span class="p">,</span> <span class="s1">&#39;çŒ«&#39;</span><span class="p">]</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">letter</span><span class="o">:</span> <span class="s1">&#39;p&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;èƒ–&#39;</span><span class="p">]</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span> <span class="nx">letter</span><span class="o">:</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span> <span class="nx">data</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;ç˜¦&#39;</span><span class="p">]</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">]</span>
</span></span></code></pre></div><p>é€šè¿‡è¿™ä¸ªå°±å¯ä»¥å†™ä¸€ä¸ªç”µè¯è–„ï¼Œåƒç°åœ¨æ‰‹æœºä¸Šé¢çš„ï¼Œé€šè¿‡äººåæ¥è¿›è¡Œåˆ†ç»„ã€æ’åºï¼Œä¹‹åå†é€šè¿‡å¾ªç¯å’Œå¸ƒå±€å°±å¯ä»¥å®ç°ç”µè¯è–„çš„åŠŸèƒ½ã€‚</p>
<h2 id="2å®ç°å­—æ¯æ•°å­—çš„æ··åˆæ’åº">2ã€å®ç°å­—æ¯ã€æ•°å­—çš„æ··åˆæ’åºï¼š</h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">d</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">isFinite</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="c1">// å¦‚æœ number æ˜¯æœ‰é™æ•°å­—ï¼ˆæˆ–å¯è½¬æ¢ä¸ºæœ‰é™æ•°å­—ï¼‰ï¼Œé‚£ä¹ˆè¿”å› trueã€‚å¦åˆ™ï¼Œå¦‚æœ number æ˜¯ NaNï¼ˆéæ•°å­—ï¼‰ï¼Œæˆ–è€…æ˜¯æ­£ã€è´Ÿæ— ç©·å¤§çš„æ•°ï¼Œåˆ™è¿”å› falseã€‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">d</span> <span class="o">=</span> <span class="nb">isFinite</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span><span class="nx">c</span> <span class="o">!=</span> <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span> <span class="o">-</span> <span class="nx">c</span><span class="p">)</span> <span class="o">||</span> <span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="c1">//[1, 2, 3, 10, 20, &#34;a&#34;, &#34;b&#34;, &#34;c&#34;, &#34;d&#34;, &#34;k&#34;]
</span></span></span></code></pre></div><p>isFinite() åˆ¤æ–­ aã€b æ˜¯å¦æ˜¯æ•°å­—ã€‚</p>
<p>return åé¢çš„è¯­å¥ï¼š</p>
<p>c != d &amp;&amp; c - d å¦‚æœ c å’Œ d ä¸ç›¸ç­‰ ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯”è¾ƒçš„å€¼ä¸æ˜¯åŒä¸€ç±»å‹ã€‚é‚£å°±æ¯”è¾ƒ c-d çš„å€¼æ˜¯ 1 è¿˜æ˜¯-1ï¼ˆä¸­é—´è¿›è¡Œäº†éšå¼ç±»å‹è½¬æ¢ï¼‰</p>
<p>å¦‚æœ c == d ä¹Ÿå°±æ˜¯è¯´ cã€d æ˜¯åŒä¸€ç±»å‹çš„å€¼ï¼Œcã€d å¯èƒ½éƒ½æ˜¯å­—æ¯ï¼Œä¹Ÿå¯èƒ½éƒ½æ˜¯æ•°å­—ã€‚è¿™é‡Œå°±å¯ä»¥ç›´æ¥æ¯”è¾ƒå¤§å°äº†ï¼ˆéƒ½æ˜¯å­—æ¯çš„è¯ä¸èƒ½ç›´æ¥åšå‡æ³•ï¼‰ã€‚
isFinite() å‡½æ•°ç”¨äºæ£€æŸ¥å…¶å‚æ•°æ˜¯å¦æ˜¯æ— ç©·å¤§ã€‚å¦‚æœ number æ˜¯æœ‰é™æ•°å­—ï¼ˆæˆ–å¯è½¬æ¢ä¸ºæœ‰é™æ•°å­—ï¼‰ï¼Œé‚£ä¹ˆè¿”å› trueã€‚å¦åˆ™ï¼Œå¦‚æœ number æ˜¯ NaNï¼ˆéæ•°å­—ï¼‰ï¼Œæˆ–è€…æ˜¯æ­£ã€è´Ÿæ— ç©·å¤§çš„æ•°ï¼Œåˆ™è¿”å› falseã€‚</p>]]></content:encoded>
    </item>
    <item>
      <title>åŠ¨æ€è§„åˆ’æ¨¡æ¿</title>
      <link>https://itibbers.com/posts/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%A8%A1%E6%9D%BF/</link>
      <pubDate>Mon, 02 Mar 2020 16:43:33 +0000</pubDate>
      <guid>https://itibbers.com/posts/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%A8%A1%E6%9D%BF/</guid>
      <description>&lt;p&gt;Before starting the topic let me introduce myself. I am a Mobile Developer currently working in Warsaw and spending my free time for interview preparations. I started to prepare for interviews two years ago. At that time I should say I could not solve the two sum problem. Easy problems seemed to me like hard ones so most of the time I had to look at editorials and discuss section. Currently, I have solved ~800 problems and time to time participate in contests. I usually solve 3 problems in a contest and sometimes 4 problems. Ok, lets come back to the topic.&lt;/p&gt;
&lt;p&gt;Recently I have concentrated my attention on Dynamic Programming cause its one of the hardest topics in an interview prep. After solving ~140 problems in DP I have noticed that there are few patterns that can be found in different problems. So I did a research on that and find the following topics. I will not give complete ways how to solve problems but these patterns may be helpful in solving DP.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Before starting the topic let me introduce myself. I am a Mobile Developer currently working in Warsaw and spending my free time for interview preparations. I started to prepare for interviews two years ago. At that time I should say I could not solve the two sum problem. Easy problems seemed to me like hard ones so most of the time I had to look at editorials and discuss section. Currently, I have solved ~800 problems and time to time participate in contests. I usually solve 3 problems in a contest and sometimes 4 problems. Ok, lets come back to the topic.</p>
<p>Recently I have concentrated my attention on Dynamic Programming cause its one of the hardest topics in an interview prep. After solving ~140 problems in DP I have noticed that there are few patterns that can be found in different problems. So I did a research on that and find the following topics. I will not give complete ways how to solve problems but these patterns may be helpful in solving DP.</p>
<h1 id="patterns">Patterns</h1>
<hr>
<p><a href="https://leetcode.com/discuss/general-discussion/458695/dynamic-programming-patterns#Minimum-%28Maximum%29-Path-to-Reach-a-Target">Minimum (Maximum) Path to Reach a Target</a>
<a href="https://leetcode.com/discuss/general-discussion/458695/dynamic-programming-patterns#distinct-ways">Distinct Ways</a>
<a href="https://leetcode.com/discuss/general-discussion/458695/dynamic-programming-patterns#Merging-Intervals">Merging Intervals</a>
<a href="https://leetcode.com/discuss/general-discussion/458695/dynamic-programming-patterns#DP-on-Strings">DP on Strings</a>
<a href="https://leetcode.com/discuss/general-discussion/458695/dynamic-programming-patterns#Decision-Making">Decision Making</a></p>
<h1 id="minimum-maximum-path-to-reach-a-target">Minimum (Maximum) Path to Reach a Target</h1>
<hr>
<p>Generate problem statement for this pattern</p>
<h3 id="statement">Statement</h3>
<blockquote>
<p>Given a target find minimum (maximum) cost / path / sum to reach the target.</p></blockquote>
<h3 id="approach">Approach</h3>
<blockquote>
<p>Choose minimum (maximum) path among all possible paths before the current state, then add value for the current state.</p></blockquote>
<pre tabindex="0"><code>routes[i] = min(routes[i-1], routes[i-2], ... , routes[i-k]) + cost[i]
</code></pre><p>Generate optimal solutions for all values in the target and return the value for the target.</p>
<pre tabindex="0"><code>for (int i = 1; i &lt;= target; ++i) {
   for (int j = 0; j &lt; ways.size(); ++j) {
       if (ways[j] &lt;= i) {
           dp[i] = min(dp[i], dp[i - ways[j]]) + cost / path / sum;
       }
   }
}

return dp[target]
</code></pre><h3 id="similar-problems">Similar Problems</h3>
<p><a href="https://leetcode.com/problems/min-cost-climbing-stairs/">746. Min Cost Climbing Stairs</a> <code>Easy</code></p>
<pre tabindex="0"><code>for (int i = 2; i &lt;= n; ++i) {
   dp[i] = min(dp[i-1], dp[i-2]) + (i == n ? 0 : cost[i]);
}

return dp[n]
</code></pre><p><a href="https://leetcode.com/problems/minimum-path-sum/">64. Minimum Path Sum</a> <code>Medium</code></p>
<pre tabindex="0"><code>for (int i = 1; i &lt; n; ++i) {
   for (int j = 1; j &lt; m; ++j) {
       grid[i][j] = min(grid[i-1][j], grid[i][j-1]) + grid[i][j];
   }
}

return grid[n-1][m-1]
</code></pre><p><a href="https://leetcode.com/problems/coin-change/">322. Coin Change</a> <code>Medium</code></p>
<pre tabindex="0"><code>for (int j = 1; j &lt;= amount; ++j) {
   for (int i = 0; i &lt; coins.size(); ++i) {
       if (coins[i] &lt;= j) {
           dp[j] = min(dp[j], dp[j - coins[i]] + 1);
       }
   }
}
</code></pre><p><a href="https://leetcode.com/problems/minimum-falling-path-sum/">931. Minimum Falling Path Sum</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/minimum-cost-for-tickets/">983. Minimum Cost For Tickets</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/2-keys-keyboard/">650. 2 Keys Keyboard</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/perfect-squares/">279. Perfect Squares</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/last-stone-weight-ii/">1049. Last Stone Weight II</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/triangle/">120. Triangle</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/ones-and-zeroes/">474. Ones and Zeroes</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/maximal-square/">221. Maximal Square</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/coin-change/">322. Coin Change</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/tiling-a-rectangle-with-the-fewest-squares/">1240. Tiling a Rectangle with the Fewest Squares</a> <code>Hard</code></p>
<p><a href="https://leetcode.com/problems/dungeon-game/">174. Dungeon Game</a> <code>Hard</code></p>
<p><a href="https://leetcode.com/problems/minimum-number-of-refueling-stops/">871. Minimum Number of Refueling Stops</a> <code>Hard</code></p>
<h1 id="distinct-ways">Distinct Ways</h1>
<hr>
<p>Generate problem statement for this pattern</p>
<h3 id="statement-1">Statement</h3>
<blockquote>
<p>Given a target find a number of distinct ways to reach the target.</p></blockquote>
<h3 id="approach-1">Approach</h3>
<blockquote>
<p>Sum all possible ways to reach the current state.</p></blockquote>
<pre tabindex="0"><code>routes[i] = routes[i-1] + routes[i-2], ... , + routes[i-k]
</code></pre><p>Generate sum for all values in the target and return the value for the target.</p>
<pre tabindex="0"><code>for (int i = 1; i &lt;= target; ++i) {
   for (int j = 0; j &lt; ways.size(); ++j) {
       if (ways[j] &lt;= i) {
           dp[i] += dp[i - ways[j]];
       }
   }
}

return dp[target]
</code></pre><h3 id="similar-problems-1">Similar Problems</h3>
<p><a href="https://leetcode.com/problems/climbing-stairs/">70. Climbing Stairs</a> <code>easy</code></p>
<pre tabindex="0"><code>for (int stair = 2; stair &lt;= n; ++stair) {
   for (int step = 1; step &lt;= 2; ++step) {
       dp[stair] += dp[stair-step];
   }
}
</code></pre><p><a href="https://leetcode.com/problems/unique-paths/">62. Unique Paths</a> <code>Medium</code></p>
<pre tabindex="0"><code>for (int i = 1; i &lt; m; ++i) {
   for (int j = 1; j &lt; n; ++j) {
       dp[i][j] = dp[i][j-1] + dp[i-1][j];
   }
}
</code></pre><p><a href="https://leetcode.com/problems/number-of-dice-rolls-with-target-sum/">1155. Number of Dice Rolls With Target Sum</a> <code>Medium</code></p>
<pre tabindex="0"><code>for (int rep = 1; rep &lt;= d; ++rep) {
   vector&lt;int&gt; new_ways(target+1);
   for (int already = 0; already &lt;= target; ++already) {
       for (int pipe = 1; pipe &lt;= f; ++pipe) {
           if (already - pipe &gt;= 0) {
               new_ways[already] += ways[already - pipe];
               new_ways[already] %= mod;
           }
       }
   }
   ways = new_ways;
}
</code></pre><p><strong>Note</strong></p>
<p>Some questions point out the number of repetitions, in that case, add one more loop to simulate every repetition.</p>
<p><a href="https://leetcode.com/problems/knight-probability-in-chessboard/">688. Knight Probability in Chessboard</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/target-sum/">494. Target Sum</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/combination-sum-iv/">377. Combination Sum IV</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/knight-dialer/">935. Knight Dialer</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/dice-roll-simulation/">1223. Dice Roll Simulation</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/partition-equal-subset-sum/">416. Partition Equal Subset Sum</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/soup-servings/">808. Soup Servings</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/domino-and-tromino-tiling/">790. Domino and Tromino Tiling</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/minimum-swaps-to-make-sequences-increasing/">801. Minimum Swaps To Make Sequences Increasing</a></p>
<p><a href="https://leetcode.com/problems/number-of-longest-increasing-subsequence/">673. Number of Longest Increasing Subsequence</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/unique-paths-ii/">63. Unique Paths II</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/out-of-boundary-paths/">576. Out of Boundary Paths</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/number-of-ways-to-stay-in-the-same-place-after-some-steps/">1269. Number of Ways to Stay in the Same Place After Some Steps</a> <code>Hard</code></p>
<p><a href="https://leetcode.com/problems/count-vowels-permutation/">1220. Count Vowels Permutation</a> <code>Hard</code></p>
<h1 id="merging-intervals">Merging Intervals</h1>
<hr>
<p>Generate problem statement for this pattern</p>
<h3 id="statement-2">Statement</h3>
<blockquote>
<p>Given a set of numbers find an optimal solution for a problem considering the current number and the best you can get from the left and right sides.</p></blockquote>
<h3 id="approach-2">Approach</h3>
<blockquote>
<p>Find all optimal solutions for every interval and return the best possible answer.</p></blockquote>
<pre tabindex="0"><code>// from i to j
dp[i][j] = dp[i][k] + result[k] + dp[k+1][j]
</code></pre><p>Get the best from the left and right sides and add a solution for the current position.</p>
<pre tabindex="0"><code>for(int l = 1; l&lt;n; l++) {
   for(int i = 0; i&lt;n-l; i++) {
       int j = i+l;
       for(int k = i; k&lt;j; k++) {
           dp[i][j] = max(dp[i][j], dp[i][k] + result[k] + dp[k+1][j]);
       }
   }
}

return dp[0][n-1]
</code></pre><h3 id="similar-problems-2">Similar Problems</h3>
<p><a href="https://leetcode.com/problems/minimum-cost-tree-from-leaf-values/">1130. Minimum Cost Tree From Leaf Values</a> <code>Medium</code></p>
<pre tabindex="0"><code>for (int l = 1; l &lt; n; ++l) {
   for (int i = 0; i &lt; n - l; ++i) {
       int j = i + l;
       dp[i][j] = INT_MAX;
       for (int k = i; k &lt; j; ++k) {
           dp[i][j] = min(dp[i][j], dp[i][k] + dp[k+1][j] + maxs[i][k] * maxs[k+1][j]);
       }
   }
}
</code></pre><p><a href="https://leetcode.com/problems/unique-binary-search-trees/">96. Unique Binary Search Trees</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/minimum-score-triangulation-of-polygon/">1039. Minimum Score Triangulation of Polygon</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/remove-boxes/">546. Remove Boxes</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/minimum-cost-to-merge-stones/">1000. Minimum Cost to Merge Stones</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/burst-balloons/">312. Burst Balloons</a> <code>Hard</code></p>
<p><a href="https://leetcode.com/problems/guess-number-higher-or-lower-ii/">375. Guess Number Higher or Lower II</a> <code>Medium</code></p>
<h1 id="dp-on-strings">DP on Strings</h1>
<hr>
<p>General problem statement for this pattern can vary but most of the time you are given two strings where lengths of those strings are not big</p>
<h3 id="statement-3">Statement</h3>
<blockquote>
<p>Given two strings <code>s1</code> and <code>s2</code>, return <code>some result</code>.</p></blockquote>
<h3 id="approach-3">Approach</h3>
<blockquote>
<p>Most of the problems on this pattern requires a solution that can be accepted in O(n^2) complexity.</p></blockquote>
<pre tabindex="0"><code>// i - indexing string s1
// j - indexing string s2
for (int i = 1; i &lt;= n; ++i) {
   for (int j = 1; j &lt;= m; ++j) {
       if (s1[i-1] == s2[j-1]) {
           dp[i][j] = /*code*/;
       } else {
           dp[i][j] = /*code*/;
       }
   }
}
</code></pre><blockquote>
<p>If you are given one string <code>s</code> the approach may little vary</p></blockquote>
<pre tabindex="0"><code>for (int l = 1; l &lt; n; ++l) {
   for (int i = 0; i &lt; n-l; ++i) {
       int j = i + l;
       if (s[i] == s[j]) {
           dp[i][j] = /*code*/;
       } else {
           dp[i][j] = /*code*/;
       }
   }
}
</code></pre><p><a href="https://leetcode.com/problems/longest-common-subsequence/">1143. Longest Common Subsequence</a> <code>Medium</code></p>
<pre tabindex="0"><code>for (int i = 1; i &lt;= n; ++i) {
   for (int j = 1; j &lt;= m; ++j) {
       if (text1[i-1] == text2[j-1]) {
           dp[i][j] = dp[i-1][j-1] + 1;
       } else {
           dp[i][j] = max(dp[i-1][j], dp[i][j-1]);
       }
   }
}
</code></pre><p><a href="https://leetcode.com/problems/palindromic-substrings/">647. Palindromic Substrings</a> <code>Medium</code></p>
<pre tabindex="0"><code>for (int l = 1; l &lt; n; ++l) {
   for (int i = 0; i &lt; n-l; ++i) {
       int j = i + l;
       if (s[i] == s[j] &amp;&amp; dp[i+1][j-1] == j-i-1) {
           dp[i][j] = dp[i+1][j-1] + 2;
       } else {
           dp[i][j] = 0;
       }
   }
}
</code></pre><p><a href="https://leetcode.com/problems/longest-palindromic-subsequence/">516. Longest Palindromic Subsequence</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/shortest-common-supersequence/">1092. Shortest Common Supersequence</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/edit-distance/">72. Edit Distance</a> <code>Hard</code></p>
<p><a href="https://leetcode.com/problems/distinct-subsequences/">115. Distinct Subsequences</a> <code>Hard</code></p>
<p><a href="https://leetcode.com/problems/minimum-ascii-delete-sum-for-two-strings/">712. Minimum ASCII Delete Sum for Two Strings</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/longest-palindromic-substring/">5. Longest Palindromic Substring</a> <code>Medium</code></p>
<h1 id="decision-making">Decision Making</h1>
<hr>
<p>The general problem statement for this pattern is forgiven situation decide whether to use or not to use the current state. So, the problem requires you to make a decision at a current state.</p>
<h3 id="statement-4">Statement</h3>
<blockquote>
<p>Given a set of values find an answer with an option to choose or ignore the current value.</p></blockquote>
<h3 id="approach-4">Approach</h3>
<blockquote>
<p>If you decide to choose the current value use the previous result where the value was ignored; vice-versa, if you decide to ignore the current value use previous result where value was used.</p></blockquote>
<pre tabindex="0"><code>// i - indexing a set of values
// j - options to ignore j values
for (int i = 1; i &lt; n; ++i) {
   for (int j = 1; j &lt;= k; ++j) {
       dp[i][j] = max({dp[i][j], dp[i-1][j] + arr[i], dp[i-1][j-1]});
       dp[i][j-1] = max({dp[i][j-1], dp[i-1][j-1] + arr[i], arr[i]});
   }
}
</code></pre><p><a href="https://leetcode.com/problems/house-robber/">198. House Robber</a> <code>Easy</code></p>
<pre tabindex="0"><code>for (int i = 1; i &lt; n; ++i) {
   dp[i][1] = max(dp[i-1][0] + nums[i], dp[i-1][1]);
   dp[i][0] = dp[i-1][1];
}
</code></pre><p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock/">121. Best Time to Buy and Sell Stock</a> <code>Easy</code></p>
<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/">714. Best Time to Buy and Sell Stock with Transaction Fee</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/">309. Best Time to Buy and Sell Stock with Cooldown</a> <code>Medium</code></p>
<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iii/">123. Best Time to Buy and Sell Stock III</a> <code>Hard</code></p>
<p><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-iv/">188. Best Time to Buy and Sell Stock IV</a> <code>Hard</code></p>
<p>I hope these tips will be helpful ğŸ˜Š</p>
<blockquote>
<p><a href="https://leetcode.com/discuss/general-discussion/458695/dynamic-programming-patterns">https://leetcode.com/discuss/general-discussion/458695/dynamic-programming-patterns</a></p></blockquote>]]></content:encoded>
    </item>
    <item>
      <title>é“¾è¡¨é—®é¢˜é›†é”¦</title>
      <link>https://itibbers.com/posts/%E9%93%BE%E8%A1%A8%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/</link>
      <pubDate>Mon, 02 Sep 2019 01:05:56 +0000</pubDate>
      <guid>https://itibbers.com/posts/%E9%93%BE%E8%A1%A8%E9%97%AE%E9%A2%98%E9%9B%86%E9%94%A6/</guid>
      <description>&lt;p&gt;é“¾è¡¨é—®é¢˜åœ¨é¢è¯•è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å¾ˆé‡è¦ä¹Ÿå¾ˆåŸºç¡€çš„ä¸€éƒ¨åˆ†ï¼Œé“¾è¡¨æœ¬èº«å¾ˆçµæ´»ï¼Œå¾ˆè€ƒæŸ¥ç¼–ç¨‹åŠŸåº•ï¼Œæ‰€ä»¥æ˜¯å¾ˆå€¼å¾—è€ƒçš„åœ°æ–¹ã€‚æˆ‘å°†å¤ä¹ è¿‡ç¨‹ä¸­è§‰å¾—æ¯”è¾ƒå¥½çš„é“¾è¡¨é—®é¢˜æ•´ç†äº†ä¸‹ã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>é“¾è¡¨é—®é¢˜åœ¨é¢è¯•è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯å¾ˆé‡è¦ä¹Ÿå¾ˆåŸºç¡€çš„ä¸€éƒ¨åˆ†ï¼Œé“¾è¡¨æœ¬èº«å¾ˆçµæ´»ï¼Œå¾ˆè€ƒæŸ¥ç¼–ç¨‹åŠŸåº•ï¼Œæ‰€ä»¥æ˜¯å¾ˆå€¼å¾—è€ƒçš„åœ°æ–¹ã€‚æˆ‘å°†å¤ä¹ è¿‡ç¨‹ä¸­è§‰å¾—æ¯”è¾ƒå¥½çš„é“¾è¡¨é—®é¢˜æ•´ç†äº†ä¸‹ã€‚</p>
<p>ä¸‹é¢æ˜¯æœ¬æ–‡æ‰€è¦ç”¨åˆ°é“¾è¡¨èŠ‚ç‚¹çš„å®šä¹‰ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">Node</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Node</span><span class="o">*</span> <span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></div><h2 id="1-åœ¨-o1æ—¶é—´åˆ é™¤é“¾è¡¨èŠ‚ç‚¹">1. åœ¨ O(1)æ—¶é—´åˆ é™¤é“¾è¡¨èŠ‚ç‚¹</h2>
<p>é¢˜ç›®æè¿°ï¼šç»™å®šé“¾è¡¨çš„å¤´æŒ‡é’ˆå’Œä¸€ä¸ªèŠ‚ç‚¹æŒ‡é’ˆï¼Œåœ¨ O(1)æ—¶é—´åˆ é™¤è¯¥èŠ‚ç‚¹ã€‚[Google é¢è¯•é¢˜]</p>
<p>åˆ†æï¼šæœ¬é¢˜ä¸ã€Šç¼–ç¨‹ä¹‹ç¾ã€‹ä¸Šçš„ã€Œä»æ— å¤´å•é“¾è¡¨ä¸­åˆ é™¤èŠ‚ç‚¹ã€ç±»ä¼¼ã€‚ä¸»è¦æ€æƒ³éƒ½æ˜¯ã€Œç‹¸çŒ«æ¢å¤ªå­ã€ï¼Œå³ç”¨ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ•°æ®è¦†ç›–è¦åˆ é™¤çš„èŠ‚ç‚¹ï¼Œç„¶ååˆ é™¤ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚ä½†æ˜¯å¦‚æœèŠ‚ç‚¹æ˜¯å°¾èŠ‚ç‚¹æ—¶ï¼Œè¯¥æ–¹æ³•å°±è¡Œä¸é€šäº†ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//O(1)æ—¶é—´åˆ é™¤é“¾è¡¨èŠ‚ç‚¹ï¼Œä»æ— å¤´å•é“¾è¡¨ä¸­åˆ é™¤èŠ‚ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">deleteRandomNode</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">cur</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">assert</span><span class="p">(</span><span class="n">cur</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">assert</span><span class="p">(</span><span class="n">cur</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">);</span>    <span class="c1">//ä¸èƒ½æ˜¯å°¾èŠ‚ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="n">Node</span><span class="o">*</span> <span class="n">pNext</span> <span class="o">=</span> <span class="n">cur</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">cur</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="n">pNext</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">cur</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pNext</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">delete</span> <span class="n">pNext</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="2-å•é“¾è¡¨çš„è½¬ç½®">2. å•é“¾è¡¨çš„è½¬ç½®</h2>
<p>é¢˜ç›®æè¿°ï¼šè¾“å…¥ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œè¾“å‡ºé€†åºåè½¬åçš„é“¾è¡¨</p>
<p>åˆ†æï¼šé“¾è¡¨çš„è½¬ç½®æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§ã€å¾ˆåŸºç¡€çš„æ•°æ®ç»“æ„é¢˜äº†ï¼Œéé€’å½’çš„ç®—æ³•å¾ˆç®€å•ï¼Œç”¨ä¸‰ä¸ªä¸´æ—¶æŒ‡é’ˆ preã€headã€next åœ¨é“¾è¡¨ä¸Šå¾ªç¯ä¸€éå³å¯ã€‚é€’å½’ç®—æ³•ä¹Ÿæ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä½†æ˜¯å¦‚æœæ€è·¯ä¸æ¸…æ™°ä¼°è®¡ä¸€æ—¶åŠä¼šå„¿ä¹Ÿå†™ä¸å‡ºæ¥å§ã€‚</p>
<p>ä¸‹é¢æ˜¯å¾ªç¯ç‰ˆæœ¬å’Œé€’å½’ç‰ˆæœ¬çš„é“¾è¡¨è½¬ç½®ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//å•é“¾è¡¨çš„è½¬ç½®,å¾ªç¯æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Node</span><span class="o">*</span> <span class="nf">reverseByLoop</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Node</span> <span class="o">*</span><span class="n">pre</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Node</span> <span class="o">*</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">head</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">pre</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">pre</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">head</span> <span class="o">=</span> <span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">pre</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">//å•é“¾è¡¨çš„è½¬ç½®,é€’å½’æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Node</span><span class="o">*</span> <span class="nf">reverseByRecursion</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//ç¬¬ä¸€ä¸ªæ¡ä»¶æ˜¯åˆ¤æ–­å¼‚å¸¸ï¼Œç¬¬äºŒä¸ªæ¡ä»¶æ˜¯ç»“æŸåˆ¤æ–­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Node</span> <span class="o">*</span><span class="n">newHead</span> <span class="o">=</span> <span class="n">reverseByRecursion</span><span class="p">(</span><span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">newHead</span><span class="p">;</span>    <span class="c1">//è¿”å›æ–°é“¾è¡¨çš„å¤´æŒ‡é’ˆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><h2 id="3-æ±‚é“¾è¡¨å€’æ•°ç¬¬-k-ä¸ªèŠ‚ç‚¹">3. æ±‚é“¾è¡¨å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹</h2>
<p>é¢˜ç›®æè¿°ï¼šè¾“å…¥ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œè¾“å‡ºè¯¥é“¾è¡¨ä¸­å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹ï¼Œé“¾è¡¨çš„å€’æ•°ç¬¬ 0 ä¸ªèŠ‚ç‚¹ä¸ºé“¾è¡¨çš„å°¾æŒ‡é’ˆã€‚</p>
<p>åˆ†æï¼šè®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆ p1ã€p2ï¼Œé¦–å…ˆ p1 å’Œ p2 éƒ½æŒ‡å‘ headï¼Œç„¶å p2 å‘å‰èµ° k æ­¥ï¼Œè¿™æ · p1 å’Œ p2 ä¹‹é—´å°±é—´éš” k ä¸ªèŠ‚ç‚¹ï¼Œæœ€å p1 å’Œ p2 åŒæ—¶å‘å‰ç§»åŠ¨ï¼Œç›´è‡³ p2 èµ°åˆ°é“¾è¡¨æœ«å°¾ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//å€’æ•°ç¬¬kä¸ªèŠ‚ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Node</span><span class="o">*</span> <span class="nf">theKthNode</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span><span class="kt">int</span> <span class="n">k</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">k</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>    <span class="c1">//å¼‚å¸¸åˆ¤æ–­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">Node</span> <span class="o">*</span><span class="n">slow</span><span class="p">,</span><span class="o">*</span><span class="n">fast</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">slow</span> <span class="o">=</span> <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">k</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span><span class="p">(;</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">fast</span><span class="o">!=</span><span class="nb">NULL</span><span class="p">;</span><span class="n">i</span><span class="o">--</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>    <span class="c1">//è€ƒè™‘kå¤§äºé“¾è¡¨é•¿åº¦çš„case
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">slow</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="4-æ±‚é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹">4. æ±‚é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹</h2>
<p>é¢˜ç›®æè¿°ï¼šæ±‚é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹ï¼Œå¦‚æœé“¾è¡¨çš„é•¿åº¦ä¸ºå¶æ•°ï¼Œè¿”å›ä¸­é—´ä¸¤ä¸ªèŠ‚ç‚¹çš„ä»»æ„ä¸€ä¸ªï¼Œè‹¥ä¸ºå¥‡æ•°ï¼Œåˆ™è¿”å›ä¸­é—´èŠ‚ç‚¹ã€‚</p>
<p>åˆ†æï¼šæ­¤é¢˜çš„è§£å†³æ€è·¯å’Œç¬¬ 3 é¢˜ã€Œæ±‚é“¾è¡¨çš„å€’æ•°ç¬¬ k ä¸ªèŠ‚ç‚¹ã€å¾ˆç›¸ä¼¼ã€‚å¯ä»¥å…ˆæ±‚é“¾è¡¨çš„é•¿åº¦ï¼Œç„¶åè®¡ç®—å‡ºä¸­é—´èŠ‚ç‚¹æ‰€åœ¨é“¾è¡¨é¡ºåºçš„ä½ç½®ã€‚ä½†æ˜¯å¦‚æœè¦æ±‚åªèƒ½æ‰«æä¸€éé“¾è¡¨ï¼Œå¦‚ä½•è§£å†³å‘¢ï¼Ÿæœ€é«˜æ•ˆçš„è§£æ³•å’Œç¬¬ 3 é¢˜ä¸€æ ·ï¼Œé€šè¿‡ä¸¤ä¸ªæŒ‡é’ˆæ¥å®Œæˆã€‚ç”¨ä¸¤ä¸ªæŒ‡é’ˆä»é“¾è¡¨å¤´èŠ‚ç‚¹å¼€å§‹ï¼Œä¸€ä¸ªæŒ‡é’ˆæ¯æ¬¡å‘åç§»åŠ¨ä¸¤æ­¥ï¼Œä¸€ä¸ªæ¯æ¬¡ç§»åŠ¨ä¸€æ­¥ï¼Œç›´åˆ°å¿«æŒ‡é’ˆç§»åˆ°åˆ°å°¾èŠ‚ç‚¹ï¼Œé‚£ä¹ˆæ…¢æŒ‡é’ˆå³æ˜¯æ‰€æ±‚ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//æ±‚é“¾è¡¨çš„ä¸­é—´èŠ‚ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Node</span><span class="o">*</span> <span class="nf">theMiddleNode</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">Node</span> <span class="o">*</span><span class="n">slow</span><span class="p">,</span><span class="o">*</span><span class="n">fast</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">slow</span> <span class="o">=</span> <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//å¦‚æœè¦æ±‚åœ¨é“¾è¡¨é•¿åº¦ä¸ºå¶æ•°çš„æƒ…å†µä¸‹ï¼Œè¿”å›ä¸­é—´ä¸¤ä¸ªèŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å¾ªç¯æ¡ä»¶
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">//while(fast &amp;&amp; fast-&gt;next != NULL &amp;&amp; fast-&gt;next-&gt;next != NULL)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">slow</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="5-åˆ¤æ–­å•é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯">5. åˆ¤æ–­å•é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯</h2>
<p>é¢˜ç›®æè¿°ï¼šè¾“å…¥ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ï¼Ÿ</p>
<p>åˆ†æï¼šé€šè¿‡ä¸¤ä¸ªæŒ‡é’ˆï¼Œåˆ†åˆ«ä»é“¾è¡¨çš„å¤´èŠ‚ç‚¹å‡ºå‘ï¼Œä¸€ä¸ªæ¯æ¬¡å‘åç§»åŠ¨ä¸€æ­¥ï¼Œå¦ä¸€ä¸ªç§»åŠ¨ä¸¤æ­¥ï¼Œä¸¤ä¸ªæŒ‡é’ˆç§»åŠ¨é€Ÿåº¦ä¸ä¸€æ ·ï¼Œå¦‚æœå­˜åœ¨ç¯ï¼Œé‚£ä¹ˆä¸¤ä¸ªæŒ‡é’ˆä¸€å®šä¼šåœ¨ç¯é‡Œç›¸é‡ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//åˆ¤æ–­å•é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯,å‚æ•°circleNodeæ˜¯ç¯å†…èŠ‚ç‚¹ï¼Œåé¢çš„é¢˜ç›®ä¼šç”¨åˆ°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">bool</span> <span class="nf">hasCircle</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">head</span><span class="p">,</span><span class="n">Node</span> <span class="o">*&amp;</span><span class="n">circleNode</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Node</span> <span class="o">*</span><span class="n">slow</span><span class="p">,</span><span class="o">*</span><span class="n">fast</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">slow</span> <span class="o">=</span> <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">fast</span> <span class="o">==</span> <span class="n">slow</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">circleNode</span> <span class="o">=</span> <span class="n">fast</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="6-æ‰¾åˆ°ç¯çš„å…¥å£ç‚¹">6. æ‰¾åˆ°ç¯çš„å…¥å£ç‚¹</h2>
<p>é¢˜ç›®æè¿°ï¼šè¾“å…¥ä¸€ä¸ªå•å‘é“¾è¡¨ï¼Œåˆ¤æ–­é“¾è¡¨æ˜¯å¦æœ‰ç¯ã€‚å¦‚æœé“¾è¡¨å­˜åœ¨ç¯ï¼Œå¦‚ä½•æ‰¾åˆ°ç¯çš„å…¥å£ç‚¹ï¼Ÿ</p>
<p>è§£é¢˜æ€è·¯ï¼š ç”±ä¸Šé¢˜å¯çŸ¥ï¼ŒæŒ‰ç…§ p2 æ¯æ¬¡ä¸¤æ­¥ï¼Œp1 æ¯æ¬¡ä¸€æ­¥çš„æ–¹å¼èµ°ï¼Œå‘ç° p2 å’Œ p1 é‡åˆï¼Œç¡®å®šäº†å•å‘é“¾è¡¨æœ‰ç¯è·¯äº†ã€‚æ¥ä¸‹æ¥ï¼Œè®© p2 å›åˆ°é“¾è¡¨çš„å¤´éƒ¨ï¼Œé‡æ–°èµ°ï¼Œæ¯æ¬¡æ­¥é•¿ä¸æ˜¯èµ° 2 äº†ï¼Œè€Œæ˜¯èµ° 1ï¼Œé‚£ä¹ˆå½“ p1 å’Œ p2 å†æ¬¡ç›¸é‡çš„æ—¶å€™ï¼Œå°±æ˜¯ç¯è·¯çš„å…¥å£äº†ã€‚</p>
<p>ä¸ºä»€ä¹ˆï¼Ÿï¼šå‡å®šèµ·ç‚¹åˆ°ç¯å…¥å£ç‚¹çš„è·ç¦»ä¸º aï¼Œp1 å’Œ p2 çš„ç›¸äº¤ç‚¹ M ä¸ç¯å…¥å£ç‚¹çš„è·ç¦»ä¸º bï¼Œç¯è·¯çš„å‘¨é•¿ä¸º Lï¼Œå½“ p1 å’Œ p2 ç¬¬ä¸€æ¬¡ç›¸é‡çš„æ—¶å€™ï¼Œå‡å®š p1 èµ°äº† n æ­¥ã€‚é‚£ä¹ˆæœ‰ï¼š</p>
<p>p1 èµ°çš„è·¯å¾„ï¼š a+b ï¼ nï¼›
p2 èµ°çš„è·¯å¾„ï¼š a+b+k<em>L = 2</em>nï¼› p2 æ¯” p1 å¤šèµ°äº† k åœˆç¯è·¯ï¼Œæ€»è·¯ç¨‹æ˜¯ p1 çš„ 2 å€</p>
<p>æ ¹æ®ä¸Šè¿°å…¬å¼å¯ä»¥å¾—åˆ° k*L=a+b=n æ˜¾ç„¶ï¼Œå¦‚æœä»ç›¸é‡ç‚¹ M å¼€å§‹ï¼Œp1 å†èµ° n æ­¥çš„è¯ï¼Œè¿˜å¯ä»¥å†å›åˆ°ç›¸é‡ç‚¹ï¼ŒåŒæ—¶ p2 ä»å¤´å¼€å§‹èµ°çš„è¯ï¼Œç»è¿‡ n æ­¥ï¼Œä¹Ÿä¼šè¾¾åˆ°ç›¸é‡ç‚¹ Mã€‚</p>
<p>æ˜¾ç„¶åœ¨è¿™ä¸ªæ­¥éª¤å½“ä¸­ p1 å’Œ p2 åªæœ‰å‰ a æ­¥èµ°çš„è·¯å¾„ä¸åŒï¼Œæ‰€ä»¥å½“ p1 å’Œ p2 å†æ¬¡é‡åˆçš„æ—¶å€™ï¼Œå¿…ç„¶æ˜¯åœ¨é“¾è¡¨çš„ç¯è·¯å…¥å£ç‚¹ä¸Šã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//æ‰¾åˆ°ç¯çš„å…¥å£ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Node</span><span class="o">*</span> <span class="nf">findLoopPort</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">head</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//å¦‚æœheadä¸ºç©ºï¼Œæˆ–è€…ä¸ºå•ç»“ç‚¹ï¼Œåˆ™ä¸å­˜åœ¨ç¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">head</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">head</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Node</span> <span class="o">*</span><span class="n">slow</span><span class="p">,</span><span class="o">*</span><span class="n">fast</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="n">slow</span> <span class="o">=</span> <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">//å…ˆåˆ¤æ–­æ˜¯å¦å­˜åœ¨ç¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="nb">NULL</span> <span class="o">&amp;&amp;</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">fast</span> <span class="o">==</span> <span class="n">slow</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="n">slow</span><span class="p">)</span> <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>    <span class="c1">//ä¸å­˜åœ¨ç¯
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">    <span class="n">fast</span> <span class="o">=</span> <span class="n">head</span><span class="p">;</span>                <span class="c1">//å¿«æŒ‡é’ˆä»å¤´å¼€å§‹èµ°ï¼Œæ­¥é•¿å˜ä¸º1
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span><span class="p">(</span><span class="n">fast</span> <span class="o">!=</span> <span class="n">slow</span><span class="p">)</span>            <span class="c1">//ä¸¤è€…ç›¸é‡å³ä¸ºå…¥å£ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">fast</span> <span class="o">=</span> <span class="n">fast</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">slow</span> <span class="o">=</span> <span class="n">slow</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">fast</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="7-ç¼–ç¨‹åˆ¤æ–­ä¸¤ä¸ªé“¾è¡¨æ˜¯å¦ç›¸äº¤">7. ç¼–ç¨‹åˆ¤æ–­ä¸¤ä¸ªé“¾è¡¨æ˜¯å¦ç›¸äº¤</h2>
<p>é¢˜ç›®æè¿°ï¼šç»™å‡ºä¸¤ä¸ªå•å‘é“¾è¡¨çš„å¤´æŒ‡é’ˆï¼ˆå¦‚ä¸‹å›¾æ‰€ç¤ºï¼‰ï¼Œ</p>
<p>æ¯”å¦‚ h1ã€h2ï¼Œåˆ¤æ–­è¿™ä¸¤ä¸ªé“¾è¡¨æ˜¯å¦ç›¸äº¤ã€‚è¿™é‡Œä¸ºäº†ç®€åŒ–é—®é¢˜ï¼Œæˆ‘ä»¬å‡è®¾ä¸¤ä¸ªé“¾è¡¨å‡ä¸å¸¦ç¯ã€‚</p>
<p>è§£é¢˜æ€è·¯ï¼š</p>
<p>ç›´æ¥å¾ªç¯åˆ¤æ–­ç¬¬ä¸€ä¸ªé“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨ç¬¬äºŒä¸ªé“¾è¡¨ä¸­ã€‚ä½†ï¼Œè¿™ç§æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º O(Length(h1) * Length(h2))ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¾—æ‰¾åˆ°ä¸€ç§æ›´ä¸ºæœ‰æ•ˆçš„æ–¹æ³•ï¼Œè‡³å°‘ä¸èƒ½æ˜¯ Oï¼ˆN^2ï¼‰çš„å¤æ‚åº¦ã€‚</p>
<p>é’ˆå¯¹ç¬¬ä¸€ä¸ªé“¾è¡¨ç›´æ¥æ„é€  hash è¡¨ï¼Œç„¶åæŸ¥è¯¢ hash è¡¨ï¼Œåˆ¤æ–­ç¬¬äºŒä¸ªé“¾è¡¨çš„æ¯ä¸ªèŠ‚ç‚¹æ˜¯å¦åœ¨ hash è¡¨å‡ºç°ï¼Œå¦‚æœæ‰€æœ‰çš„ç¬¬äºŒä¸ªé“¾è¡¨çš„èŠ‚ç‚¹éƒ½èƒ½åœ¨ hash è¡¨ä¸­æ‰¾åˆ°ï¼Œå³è¯´æ˜ç¬¬äºŒä¸ªé“¾è¡¨ä¸ç¬¬ä¸€ä¸ªé“¾è¡¨æœ‰ç›¸åŒçš„èŠ‚ç‚¹ã€‚æ—¶é—´å¤æ‚åº¦ä¸ºä¸ºçº¿æ€§ï¼šO(Length(h1) + Length(h2))ï¼ŒåŒæ—¶ä¸ºäº†å­˜å‚¨ç¬¬ä¸€ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(Length(h1))ã€‚æ˜¯å¦è¿˜æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢ï¼Œæ—¢èƒ½å¤Ÿä»¥çº¿æ€§æ—¶é—´å¤æ‚åº¦è§£å†³é—®é¢˜ï¼Œåˆèƒ½å‡å°‘å­˜å‚¨ç©ºé—´ï¼Ÿ</p>
<p>è½¬æ¢ä¸ºç¯çš„é—®é¢˜ã€‚æŠŠç¬¬äºŒä¸ªé“¾è¡¨æ¥åœ¨ç¬¬ä¸€ä¸ªé“¾è¡¨åé¢ï¼Œå¦‚æœå¾—åˆ°çš„é“¾è¡¨æœ‰ç¯ï¼Œåˆ™è¯´æ˜ä¸¤ä¸ªé“¾è¡¨ç›¸äº¤ã€‚å¦‚ä½•åˆ¤æ–­æœ‰ç¯çš„é—®é¢˜ä¸Šé¢å·²ç»è®¨è®ºè¿‡äº†ï¼Œä½†è¿™é‡Œæœ‰æ›´ç®€å•çš„æ–¹æ³•ã€‚å› ä¸ºå¦‚æœæœ‰ç¯ï¼Œåˆ™ç¬¬äºŒä¸ªé“¾è¡¨çš„è¡¨å¤´ä¸€å®šä¹Ÿåœ¨ç¯ä¸Šï¼Œå³ç¬¬äºŒä¸ªé“¾è¡¨ä¼šæ„æˆä¸€ä¸ªå¾ªç¯é“¾è¡¨ï¼Œæˆ‘ä»¬åªéœ€è¦éå†ç¬¬äºŒä¸ªé“¾è¡¨ï¼Œçœ‹æ˜¯å¦ä¼šå›åˆ°èµ·å§‹ç‚¹å°±å¯ä»¥åˆ¤æ–­å‡ºæ¥ã€‚è¿™ä¸ªæ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦æ˜¯çº¿æ€§çš„ï¼Œç©ºé—´æ˜¯å¸¸ç†Ÿã€‚</p>
<p>è¿›ä¸€æ­¥è€ƒè™‘â€œå¦‚æœä¸¤ä¸ªæ²¡æœ‰ç¯çš„é“¾è¡¨ç›¸äº¤äºæŸä¸€èŠ‚ç‚¹ï¼Œé‚£ä¹ˆåœ¨è¿™ä¸ªèŠ‚ç‚¹ä¹‹åçš„æ‰€æœ‰èŠ‚ç‚¹éƒ½æ˜¯ä¸¤ä¸ªé“¾è¡¨å…±æœ‰çš„â€è¿™ä¸ªç‰¹ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå¦‚æœå®ƒä»¬ç›¸äº¤ï¼Œåˆ™æœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸€å®šæ˜¯å…±æœ‰çš„ã€‚è€Œæˆ‘ä»¬å¾ˆå®¹æ˜“èƒ½å¾—åˆ°é“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™æˆäº†æˆ‘ä»¬ç®€åŒ–è§£æ³•çš„ä¸€ä¸ªä¸»è¦çªç ´å£ã€‚é‚£ä¹ˆï¼Œæˆ‘ä»¬åªè¦åˆ¤æ–­ä¸¤ä¸ªé“¾è¡¨çš„å°¾æŒ‡é’ˆæ˜¯å¦ç›¸ç­‰ã€‚ç›¸ç­‰ï¼Œåˆ™é“¾è¡¨ç›¸äº¤ï¼›å¦åˆ™ï¼Œé“¾è¡¨ä¸ç›¸äº¤ã€‚
æ‰€ä»¥ï¼Œå…ˆéå†ç¬¬ä¸€ä¸ªé“¾è¡¨ï¼Œè®°ä½æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚ç„¶åéå†ç¬¬äºŒä¸ªé“¾è¡¨ï¼Œåˆ°æœ€åä¸€ä¸ªèŠ‚ç‚¹æ—¶å’Œç¬¬ä¸€ä¸ªé“¾è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹åšæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒï¼Œåˆ™ç›¸äº¤ï¼Œå¦åˆ™ï¼Œä¸ç›¸äº¤ã€‚è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦ï¼Œå®ƒä¸º O((Length(h1) + Length(h2))ï¼Œè€Œä¸”åªç”¨äº†ä¸€ä¸ªé¢å¤–çš„æŒ‡é’ˆæ¥å­˜å‚¨æœ€åä¸€ä¸ªèŠ‚ç‚¹ã€‚è¿™ä¸ªæ–¹æ³•æ—¶é—´å¤æ‚åº¦ä¸ºçº¿æ€§ O(N)ï¼Œç©ºé—´å¤æ‚åº¦ä¸º O(1)ï¼Œæ˜¾ç„¶æ¯”è§£æ³•ä¸‰æ›´èƒœä¸€ç­¹ã€‚</p>
<p>è§£æ³•å››çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//åˆ¤æ–­ä¸¤ä¸ªé“¾è¡¨æ˜¯å¦ç›¸äº¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">bool</span> <span class="nf">isIntersect</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">h1</span><span class="p">,</span><span class="n">Node</span> <span class="o">*</span><span class="n">h2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">h1</span> <span class="o">==</span> <span class="nb">NULL</span> <span class="o">||</span> <span class="n">h2</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>    <span class="c1">//å¼‚å¸¸åˆ¤æ–­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">while</span><span class="p">(</span><span class="n">h1</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">h1</span> <span class="o">=</span> <span class="n">h1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">h2</span><span class="o">-&gt;</span><span class="n">next</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">h2</span> <span class="o">=</span> <span class="n">h2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">h1</span> <span class="o">==</span> <span class="n">h2</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>        <span class="c1">//å°¾èŠ‚ç‚¹æ˜¯å¦ç›¸åŒ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">else</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="8-æ‰©å±•é“¾è¡¨æœ‰ç¯å¦‚ä½•åˆ¤æ–­ç›¸äº¤">8. æ‰©å±•ï¼šé“¾è¡¨æœ‰ç¯ï¼Œå¦‚ä½•åˆ¤æ–­ç›¸äº¤</h2>
<p>é¢˜ç›®æè¿°ï¼šä¸Šé¢çš„é—®é¢˜éƒ½æ˜¯é’ˆå¯¹é“¾è¡¨æ— ç¯çš„ï¼Œé‚£ä¹ˆå¦‚æœç°åœ¨ï¼Œé“¾è¡¨æ˜¯æœ‰ç¯çš„å‘¢?ä¸Šé¢çš„æ–¹æ³•è¿˜åŒæ ·æœ‰æ•ˆä¹ˆ?</p>
<p>åˆ†æï¼šå¦‚æœæœ‰ç¯ä¸”ä¸¤ä¸ªé“¾è¡¨ç›¸äº¤ï¼Œåˆ™ä¸¤ä¸ªé“¾è¡¨éƒ½æœ‰å…±åŒä¸€ä¸ªç¯ï¼Œå³ç¯ä¸Šçš„ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹éƒ½å­˜åœ¨äºä¸¤ä¸ªé“¾è¡¨ä¸Šã€‚å› æ­¤ï¼Œå°±å¯ä»¥åˆ¤æ–­ä¸€é“¾è¡¨ä¸Šä¿©æŒ‡é’ˆç›¸é‡çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œåœ¨ä¸åœ¨å¦ä¸€æ¡é“¾è¡¨ä¸Šã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//åˆ¤æ–­ä¸¤ä¸ªå¸¦ç¯é“¾è¡¨æ˜¯å¦ç›¸äº¤
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">bool</span> <span class="nf">isIntersectWithLoop</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">h1</span><span class="p">,</span><span class="n">Node</span> <span class="o">*</span><span class="n">h2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Node</span> <span class="o">*</span><span class="n">circleNode1</span><span class="p">,</span><span class="o">*</span><span class="n">circleNode2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">hasCircle</span><span class="p">(</span><span class="n">h1</span><span class="p">,</span><span class="n">circleNode1</span><span class="p">))</span>    <span class="c1">//åˆ¤æ–­é“¾è¡¨å¸¦ä¸å¸¦ç¯ï¼Œå¹¶ä¿å­˜ç¯å†…èŠ‚ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>                <span class="c1">//ä¸å¸¦ç¯ï¼Œå¼‚å¸¸é€€å‡º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">hasCircle</span><span class="p">(</span><span class="n">h2</span><span class="p">,</span><span class="n">circleNode2</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Node</span> <span class="o">*</span><span class="n">temp</span> <span class="o">=</span> <span class="n">circleNode2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">temp</span> <span class="o">!=</span> <span class="n">circleNode2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">temp</span> <span class="o">==</span> <span class="n">circleNode1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">temp</span> <span class="o">=</span> <span class="n">temp</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="9-æ‰©å±•ä¸¤é“¾è¡¨ç›¸äº¤çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹">9. æ‰©å±•ï¼šä¸¤é“¾è¡¨ç›¸äº¤çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹</h2>
<p>é¢˜ç›®æè¿°ï¼šå¦‚æœä¸¤ä¸ªæ— ç¯å•é“¾è¡¨ç›¸äº¤ï¼Œæ€ä¹ˆæ±‚å‡ºä»–ä»¬ç›¸äº¤çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å‘¢ï¼Ÿ</p>
<p>åˆ†æï¼šé‡‡ç”¨å¯¹é½çš„æ€æƒ³ã€‚è®¡ç®—ä¸¤ä¸ªé“¾è¡¨çš„é•¿åº¦ L1 , L2ï¼Œåˆ†åˆ«ç”¨ä¸¤ä¸ªæŒ‡é’ˆ p1 , p2 æŒ‡å‘ä¸¤ä¸ªé“¾è¡¨çš„å¤´ï¼Œç„¶åå°†è¾ƒé•¿é“¾è¡¨çš„ p1ï¼ˆå‡è®¾ä¸º p1ï¼‰å‘åç§»åŠ¨ L2 - L1 ä¸ªèŠ‚ç‚¹ï¼Œç„¶åå†åŒæ—¶å‘åç§»åŠ¨ p1 , p2ï¼Œç›´åˆ° p1 = p2ã€‚ç›¸é‡çš„ç‚¹å°±æ˜¯ç›¸äº¤çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p>ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="line"><span class="cl"><span class="c1">//æ±‚ä¸¤é“¾è¡¨ç›¸äº¤çš„ç¬¬ä¸€ä¸ªå…¬å…±èŠ‚ç‚¹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">Node</span><span class="o">*</span> <span class="nf">findIntersectNode</span><span class="p">(</span><span class="n">Node</span> <span class="o">*</span><span class="n">h1</span><span class="p">,</span><span class="n">Node</span> <span class="o">*</span><span class="n">h2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">len1</span> <span class="o">=</span> <span class="n">listLength</span><span class="p">(</span><span class="n">h1</span><span class="p">);</span>          <span class="c1">//æ±‚é“¾è¡¨é•¿åº¦
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kt">int</span> <span class="n">len2</span> <span class="o">=</span> <span class="n">listLength</span><span class="p">(</span><span class="n">h2</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//å¯¹é½ä¸¤ä¸ªé“¾è¡¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">if</span><span class="p">(</span><span class="n">len1</span> <span class="o">&gt;</span> <span class="n">len2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">len1</span><span class="o">-</span><span class="n">len2</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">h1</span><span class="o">=</span><span class="n">h1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">len2</span><span class="o">-</span><span class="n">len1</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">h2</span><span class="o">=</span><span class="n">h2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">while</span><span class="p">(</span><span class="n">h1</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="n">h1</span> <span class="o">==</span> <span class="n">h2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="n">h1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">h1</span> <span class="o">=</span> <span class="n">h1</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">h2</span> <span class="o">=</span> <span class="n">h2</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="10-æ€»ç»“">10. æ€»ç»“</h2>
<p>å¯ä»¥å‘ç°ï¼Œåœ¨é“¾è¡¨çš„é—®é¢˜ä¸­ï¼Œé€šè¿‡ä¸¤ä¸ªçš„æŒ‡é’ˆæ¥æé«˜æ•ˆç‡æ˜¯å¾ˆå€¼å¾—è€ƒè™‘çš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥ä¸€å®šè¦è®°ä½è¿™ç§è§£é¢˜æ€è·¯ã€‚è®°ä½å‡ ç§å…¸å‹çš„é“¾è¡¨é—®é¢˜è§£å†³æ–¹æ¡ˆï¼Œå¾ˆå¤šç±»ä¼¼çš„é¢˜ç›®éƒ½å¯ä»¥è½¬æ¢åˆ°ç†Ÿæ‚‰çš„é—®é¢˜å†è§£å†³ã€‚</p>
<p>å‚è€ƒæ–‡çŒ®</p>
<blockquote>
<p><a href="http://blog.csdn.net/v_JULY_v/article/details/6447013">ç¨‹åºå‘˜ç¼–ç¨‹è‰ºæœ¯ï¼šç¬¬ä¹ç« ã€é—²è¯é“¾è¡¨è¿½èµ¶é—®é¢˜</a> &gt; <a href="http://www.cppblog.com/humanchao/archive/2008/04/17/47357.html">åˆ¤æ–­å•é“¾è¡¨æ˜¯å¦å­˜åœ¨ç¯ï¼Œåˆ¤æ–­ä¸¤ä¸ªé“¾è¡¨æ˜¯å¦ç›¸äº¤é—®é¢˜è¯¦è§£</a> &gt; <a href="http://blog.csdn.net/anonymalias/article/details/11020477">é¢è¯•ç®—æ³•ä¹‹é“¾è¡¨æ“ä½œé›†é”¦</a></p></blockquote>
<p>è½¬è½½è‡ªï¼šhttp://wuchong.me/blog/2014/03/25/interview-link-questions/</p>]]></content:encoded>
    </item>
    <item>
      <title>Vue methods vs watchers vs computed properties</title>
      <link>https://itibbers.com/posts/vue-watch-computed-method/</link>
      <pubDate>Thu, 22 Aug 2019 11:09:26 +0000</pubDate>
      <guid>https://itibbers.com/posts/vue-watch-computed-method/</guid>
      <description>&lt;p&gt;Vue.js provides us &lt;code&gt;watch&lt;/code&gt;, &lt;code&gt;computed&lt;/code&gt; and &lt;code&gt;methods&lt;/code&gt; properties. When to use one vs the other?&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Vue.js provides us <code>watch</code>, <code>computed</code> and <code>methods</code> properties. When to use one vs the other?</p>
<blockquote>
<p>When to use methods</p></blockquote>
<ol>
<li>To react on some event happening in the DOM</li>
<li>To call a function when something happens in your component. You can call a methods from computed properties or watchers.</li>
</ol>
<blockquote>
<p>When to use computed properties</p></blockquote>
<ol>
<li>You need to compose new data from existing data sources</li>
<li>You have a variable you use in your template thatâ€™s built from one or more data properties</li>
<li>You want to reduce a complicated, nested property name to a more readable and easy to use one, yet update it when the original property changes</li>
<li>You need to reference a value from the template. In this case, creating a computed property is the best thing because itâ€™s cached.</li>
<li>You need to listen to changes of more than one data property</li>
</ol>
<blockquote>
<p>When to use watchers</p></blockquote>
<ol>
<li>You want to listen when a data property changes, and perform some action</li>
<li>You want to listen to a prop value change</li>
<li>You only need to listen to one specific property (you canâ€™t watch multiple properties at the same time)</li>
<li>You want to watch a data property until it reaches some specific value and then do something</li>
</ol>]]></content:encoded>
    </item>
    <item>
      <title>Vueç»„ä»¶é€šä¿¡ä¸æ•°æ®ä¼ é€’</title>
      <link>https://itibbers.com/posts/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92/</link>
      <pubDate>Mon, 19 Aug 2019 15:01:54 +0000</pubDate>
      <guid>https://itibbers.com/posts/vue%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E4%B8%8E%E6%95%B0%E6%8D%AE%E4%BC%A0%E9%80%92/</guid>
      <description>&lt;p&gt;Vue ç»„ä»¶é€šä¿¡æ•´ç†ï¼š&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Vue ç»„ä»¶é€šä¿¡æ•´ç†ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;app&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span># parent <span class="err">&amp;</span> child<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>props[$attrs <span class="err">&amp;</span> $listeners] $emit[.sync]<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>$parent $children/ref<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>eventBus<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Vuex $root<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>slot<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>provide inject<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">parent-child</span> <span class="na">:name</span><span class="err">.</span><span class="na">sync</span><span class="o">=</span><span class="s">&#34;name&#34;</span> <span class="na">ref</span><span class="o">=</span><span class="s">&#34;parentChild&#34;</span> <span class="err">@</span><span class="na">say</span><span class="o">=</span><span class="s">&#34;receive&#34;</span><span class="p">&gt;&lt;/</span><span class="nt">parent-child</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">button</span> <span class="err">@</span><span class="na">click</span><span class="o">=</span><span class="s">&#34;childFn&#34;</span><span class="p">&gt;</span>What&#39;s your name, parent-child?<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  Change Name: <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;text&#34;</span> <span class="na">v-model</span><span class="o">=</span><span class="s">&#34;name&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">hr</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span># child <span class="err">&amp;</span> child<span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">ol</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>å­-&gt;çˆ¶-&gt;å­<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>eventBus<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>Vuex $root<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;/</span><span class="nt">ol</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">child-brother</span><span class="p">&gt;&lt;/</span><span class="nt">child-brother</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">child-sister</span><span class="p">&gt;&lt;/</span><span class="nt">child-sister</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;parent-child&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// æ•°æ®ï¼šçˆ¶-&gt;å­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">props</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">alertName</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;I am &#39;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">say</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;say&#39;</span><span class="p">,</span> <span class="s1">&#39;I am fine&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">parentFn</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">this</span><span class="p">.</span><span class="nx">$parent</span><span class="p">.</span><span class="nx">receive</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">template</span><span class="o">:</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;div&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">      &lt;p&gt;Name: {{name}}&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">      &lt;button @click=&#34;say&#34;&gt;Say something&lt;/button&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">      &lt;button @click=&#34;parentFn&#34;&gt;Hello Parent?&lt;/button&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">      &lt;button @click=&#34;$emit(&#39;update:name&#39;, &#39;Awesome Jack&#39;)&#34;&gt;Change name self&lt;/button&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">  `</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;child-brother&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sayHello</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">eventBus</span><span class="p">.</span><span class="nx">$emit</span><span class="p">(</span><span class="s1">&#39;talking&#39;</span><span class="p">,</span> <span class="s1">&#39;Hello&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">template</span><span class="o">:</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;div&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">      &lt;p&gt;brother&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">      &lt;button @click=&#34;sayHello&#34;&gt;hello my sister&lt;/button&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">  `</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">Vue</span><span class="p">.</span><span class="nx">component</span><span class="p">(</span><span class="s1">&#39;child-sister&#39;</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">eventBus</span><span class="p">.</span><span class="nx">$on</span><span class="p">(</span><span class="s1">&#39;talking&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">words</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Received from brother: &#39;</span> <span class="o">+</span> <span class="nx">words</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">template</span><span class="o">:</span> <span class="sb">`
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;div&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">      &lt;p&gt;sister waiting brother takling...&lt;/p&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">    &lt;/div&gt;
</span></span></span><span class="line"><span class="cl"><span class="sb">  `</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">eventBus</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Vue</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="k">new</span> <span class="nx">Vue</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">el</span><span class="o">:</span> <span class="s1">&#39;#app&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">data</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;Jack&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">methods</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// äº‹ä»¶ï¼šçˆ¶-&gt;å­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">childFn</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="c1">// $refs or $children
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">.</span><span class="nx">parentChild</span><span class="p">.</span><span class="nx">alertName</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">receive</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">alert</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb"> said: </span><span class="si">${</span><span class="nx">msg</span><span class="si">}</span><span class="sb">`</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">alert</span><span class="p">(</span><span class="s1">&#39;Received: Nothing&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span>
</span></span></code></pre></div><p>è¿è¡Œ Demo è§ï¼šhttps://codepen.io/itibbers/pen/yLBJddd</p>]]></content:encoded>
    </item>
    <item>
      <title>vue-programmatic-navigation-issue</title>
      <link>https://itibbers.com/posts/vue-programmatic-navigation-issue/</link>
      <pubDate>Tue, 02 Apr 2019 12:15:02 +0000</pubDate>
      <guid>https://itibbers.com/posts/vue-programmatic-navigation-issue/</guid>
      <description>&lt;p&gt;Question: $router.push({query})/replace not updating the URL.&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Question: $router.push({query})/replace not updating the URL.</p>
<p>Example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="nx">handleSort</span><span class="p">({</span> <span class="nx">column</span><span class="p">,</span> <span class="nx">prop</span><span class="p">,</span> <span class="nx">order</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">let</span> <span class="nx">query</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">query</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">query</span><span class="p">[</span><span class="s1">&#39;_order_by&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">prop</span>
</span></span><span class="line"><span class="cl">    <span class="nx">query</span><span class="p">[</span><span class="s1">&#39;_order_desc&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">order</span> <span class="o">===</span> <span class="s1">&#39;descending&#39;</span> <span class="o">?</span> <span class="s1">&#39;asc&#39;</span> <span class="o">:</span> <span class="s1">&#39;desc&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">$router</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="nx">query</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Perhaps you are reusing the reference to the same array in multiple route objects. Object.assign doesn&rsquo;t do a deep copy. Mutating an array doesn&rsquo;t trigger a route transition and in the subsequent route navigation triggered by <code>router.push</code> / <code>router.replace</code> the check in transitionTo recognizes no change since it compares the array to itself.</p>
<p>The solution is to work with an array like described here: <a href="https://vincent.billey.me/pure-javascript-immutable-array/">Pure javascript immutable array</a></p>
<p>But doing a deep copy is a very weird but also reliable way to not have to write your code overly complicated:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">query</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$route</span><span class="p">.</span><span class="nx">query</span><span class="p">))</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>çˆ¬æ¥¼æ¢¯é—®é¢˜</title>
      <link>https://itibbers.com/posts/%E7%88%AC%E6%A5%BC%E6%A2%AF%E9%97%AE%E9%A2%98/</link>
      <pubDate>Tue, 19 Feb 2019 18:50:19 +0000</pubDate>
      <guid>https://itibbers.com/posts/%E7%88%AC%E6%A5%BC%E6%A2%AF%E9%97%AE%E9%A2%98/</guid>
      <description>&lt;p&gt;ä»Šå¤©åœ¨è„‰è„‰ä¸Šçœ‹åˆ°æœ‰ä¸ªæ®µå­æ‰‹ HR è¯´ï¼š
ä»Šå¤©æ²Ÿé€šäº†ä¸€ä½å€™é€‰äººï¼Œä»–ç»™æˆ‘å‡ºäº†ä¸ªé¢˜ï¼Œè¯´ç­”å¯¹äº†å°±æŠŠç®€å†ç»™æˆ‘[ç¬‘å“­][ç¬‘å“­]å„ä½å¤§ä½¬å¸®å¸®å¿™[æŠ±æ‹³][æŠ±æ‹³]
ä¸€ä¸ªäººçˆ¬æ¥¼æ¢¯ï¼Œæ¯æ¬¡åªèƒ½çˆ¬ 1 ä¸ªæˆ– 2 ä¸ªå°é˜¶ï¼Œå‡è®¾æœ‰ 10 ä¸ªå°é˜¶ï¼Œé‚£ä¹ˆè¿™ä¸ªäººæœ‰å¤šå°‘ç§ä¸åŒçš„çˆ¬æ¥¼æ¢¯æ–¹æ³•ï¼Ÿ
æˆ‘åªæƒ³åœ¨æ¥¼æ¢¯é¡¶ç«¯ç­‰ä½ ï¼Œä¸æƒ³çŸ¥é“æ˜¯æ€ä¹ˆçˆ¬çš„[æµæ³ª][æµæ³ª]&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>ä»Šå¤©åœ¨è„‰è„‰ä¸Šçœ‹åˆ°æœ‰ä¸ªæ®µå­æ‰‹ HR è¯´ï¼š
ä»Šå¤©æ²Ÿé€šäº†ä¸€ä½å€™é€‰äººï¼Œä»–ç»™æˆ‘å‡ºäº†ä¸ªé¢˜ï¼Œè¯´ç­”å¯¹äº†å°±æŠŠç®€å†ç»™æˆ‘[ç¬‘å“­][ç¬‘å“­]å„ä½å¤§ä½¬å¸®å¸®å¿™[æŠ±æ‹³][æŠ±æ‹³]
ä¸€ä¸ªäººçˆ¬æ¥¼æ¢¯ï¼Œæ¯æ¬¡åªèƒ½çˆ¬ 1 ä¸ªæˆ– 2 ä¸ªå°é˜¶ï¼Œå‡è®¾æœ‰ 10 ä¸ªå°é˜¶ï¼Œé‚£ä¹ˆè¿™ä¸ªäººæœ‰å¤šå°‘ç§ä¸åŒçš„çˆ¬æ¥¼æ¢¯æ–¹æ³•ï¼Ÿ
æˆ‘åªæƒ³åœ¨æ¥¼æ¢¯é¡¶ç«¯ç­‰ä½ ï¼Œä¸æƒ³çŸ¥é“æ˜¯æ€ä¹ˆçˆ¬çš„[æµæ³ª][æµæ³ª]</p>
<p>ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ï¼Œè¯•ç€è§£ä¸€ä¸‹ã€‚
å› ä¸ºæœ€ååªæœ‰è¿ˆä¸€æ­¥æˆ–ä¸¤æ­¥ï¼Œæ‰€ä»¥ n é˜¶å°é˜¶ï¼Œæœ€åè§£ä¸º f(n) = f(n - 1) + f(n - 2)
åŸæ¥æ˜¯æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼Œç”¨é€’å½’è§£ä¸€ä¸‹æ‰€æœ‰å¯èƒ½çš„çˆ¬æ¥¼æ–¹æ³•ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">let</span> <span class="nx">ret</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">backtrack</span> <span class="o">=</span> <span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">str</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">===</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">str</span> <span class="o">+=</span> <span class="s1">&#39;1&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ret</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">backtrack</span><span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">str</span> <span class="o">+</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="nx">backtrack</span><span class="p">(</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">str</span> <span class="o">+</span> <span class="s1">&#39;2&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">backtrack</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ret</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">ret</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>æµè§ˆå™¨åŠHTTPç¼“å­˜æœºåˆ¶</title>
      <link>https://itibbers.com/posts/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8F%8Ahttp%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/</link>
      <pubDate>Thu, 26 Jul 2018 15:02:32 +0000</pubDate>
      <guid>https://itibbers.com/posts/%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8F%8Ahttp%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/</guid>
      <description>&lt;p&gt;Web ç¼“å­˜æ˜¯ä¸€ç§ä¿å­˜ Web èµ„æºå‰¯æœ¬å¹¶åœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶ç›´æ¥ä½¿ç”¨è¯¥å‰¯æœ¬çš„æŠ€æœ¯ã€‚ç¼“å­˜=è¯·æ±‚èµ„æºçš„å‰¯æœ¬&lt;/p&gt;
&lt;p&gt;Web ç¼“å­˜å¯ä»¥åˆ†ä¸ºè¿™å‡ ç§ï¼šæµè§ˆå™¨ç¼“å­˜ã€CDN ç¼“å­˜ã€æœåŠ¡å™¨ç¼“å­˜ã€æ•°æ®åº“æ•°æ®ç¼“å­˜ ã€‚å› ä¸ºå¯èƒ½ä¼šç›´æ¥ä½¿ç”¨å‰¯æœ¬å…äºé‡æ–°å‘é€è¯·æ±‚æˆ–è€…ä»…ä»…ç¡®è®¤èµ„æºæ²¡å˜æ— éœ€é‡æ–°ä¼ è¾“èµ„æºå®ä½“ï¼ŒWeb ç¼“å­˜å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥å‡å°‘å»¶è¿ŸåŠ å¿«ç½‘é¡µæ‰“å¼€é€Ÿåº¦&lt;/li&gt;
&lt;li&gt;é‡å¤åˆ©ç”¨èµ„æºå‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—&lt;/li&gt;
&lt;li&gt;é™ä½è¯·æ±‚æ¬¡æ•°æˆ–è€…å‡å°‘ä¼ è¾“å†…å®¹ä»è€Œå‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚&lt;/li&gt;
&lt;/ul&gt;</description>
      <content:encoded><![CDATA[<p>Web ç¼“å­˜æ˜¯ä¸€ç§ä¿å­˜ Web èµ„æºå‰¯æœ¬å¹¶åœ¨ä¸‹æ¬¡è¯·æ±‚æ—¶ç›´æ¥ä½¿ç”¨è¯¥å‰¯æœ¬çš„æŠ€æœ¯ã€‚ç¼“å­˜=è¯·æ±‚èµ„æºçš„å‰¯æœ¬</p>
<p>Web ç¼“å­˜å¯ä»¥åˆ†ä¸ºè¿™å‡ ç§ï¼šæµè§ˆå™¨ç¼“å­˜ã€CDN ç¼“å­˜ã€æœåŠ¡å™¨ç¼“å­˜ã€æ•°æ®åº“æ•°æ®ç¼“å­˜ ã€‚å› ä¸ºå¯èƒ½ä¼šç›´æ¥ä½¿ç”¨å‰¯æœ¬å…äºé‡æ–°å‘é€è¯·æ±‚æˆ–è€…ä»…ä»…ç¡®è®¤èµ„æºæ²¡å˜æ— éœ€é‡æ–°ä¼ è¾“èµ„æºå®ä½“ï¼ŒWeb ç¼“å­˜å…·æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p>
<ul>
<li>å¯ä»¥å‡å°‘å»¶è¿ŸåŠ å¿«ç½‘é¡µæ‰“å¼€é€Ÿåº¦</li>
<li>é‡å¤åˆ©ç”¨èµ„æºå‡å°‘ç½‘ç»œå¸¦å®½æ¶ˆè€—</li>
<li>é™ä½è¯·æ±‚æ¬¡æ•°æˆ–è€…å‡å°‘ä¼ è¾“å†…å®¹ä»è€Œå‡è½»æœåŠ¡å™¨å‹åŠ›ã€‚</li>
</ul>
<p>[TOC]</p>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºå’Œå‰ç«¯å¯†åˆ‡ç›¸å…³çš„æµè§ˆå™¨ HTTP ç¼“å­˜æœºåˆ¶ã€‚æµè§ˆå™¨ HTTP ç¼“å­˜å¯ä»¥åˆ†ä¸ºå¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ã€‚å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜æœ€å¤§ä¹Ÿæ˜¯æœ€æ ¹æœ¬çš„åŒºåˆ«æ˜¯ï¼šå¼ºç¼“å­˜å‘½ä¸­çš„è¯ä¸ä¼šå‘è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼ˆæ¯”å¦‚ chrome ä¸­çš„ 200 from memory cacheï¼‰ï¼Œåå•†ç¼“å­˜ä¸€å®šä¼šå‘è¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œé€šè¿‡èµ„æºçš„è¯·æ±‚é¦–éƒ¨å­—æ®µéªŒè¯èµ„æºæ˜¯å¦å‘½ä¸­åå•†ç¼“å­˜ï¼Œå¦‚æœåå•†ç¼“å­˜å‘½ä¸­ï¼ŒæœåŠ¡å™¨ä¼šå°†è¿™ä¸ªè¯·æ±‚è¿”å›ï¼Œä½†æ˜¯ä¸ä¼šè¿”å›è¿™ä¸ªèµ„æºçš„å®ä½“ï¼Œè€Œæ˜¯é€šçŸ¥å®¢æˆ·ç«¯å¯ä»¥ä»ç¼“å­˜ä¸­åŠ è½½è¿™ä¸ªèµ„æºï¼ˆ304 not modifiedï¼‰ã€‚ç®€ç•¥æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" src="https://ws1.sinaimg.cn/large/006tKfTcly1ftnafr9qk3j30tq0f5400.jpg"></p>
<h2 id="1-æµè§ˆå™¨-http-ç¼“å­˜ç”±-http-æŠ¥æ–‡çš„é¦–éƒ¨å­—æ®µå†³å®š">1 æµè§ˆå™¨ HTTP ç¼“å­˜ç”± HTTP æŠ¥æ–‡çš„é¦–éƒ¨å­—æ®µå†³å®š</h2>
<p><img loading="lazy" src="https://ws3.sinaimg.cn/large/006tKfTcly1ftnagybj4hj30ea08twem.jpg"></p>
<ol>
<li>
<p>http header ä¸­ä¸ç¼“å­˜æœ‰å…³çš„ key
<img loading="lazy" src="https://ws4.sinaimg.cn/large/006tKfTcly1ftnahvfa0kj31420fi77l.jpg"></p>
</li>
<li>
<p>ç¼“å­˜åå•†ç­–ç•¥ç”¨äºé‡æ–°éªŒè¯ç¼“å­˜èµ„æºæ˜¯å¦æœ‰æ•ˆï¼Œæœ‰å…³çš„ key
<img loading="lazy" src="https://ws1.sinaimg.cn/large/006tKfTcly1ftnais0iauj314c0fqtbt.jpg"></p>
</li>
</ol>
<h3 id="11-æ§åˆ¶å¼ºç¼“å­˜çš„å­—æ®µæŒ‰ä¼˜å…ˆçº§ä»‹ç»">1.1 æ§åˆ¶å¼ºç¼“å­˜çš„å­—æ®µæŒ‰ä¼˜å…ˆçº§ä»‹ç»</h3>
<ol>
<li>
<p>Pragma
Pragma æ˜¯ HTTP/1.1 ä¹‹å‰ç‰ˆæœ¬é—ç•™çš„é€šç”¨é¦–éƒ¨å­—æ®µï¼Œä»…ä½œä¸ºäº HTTP/1.0 çš„å‘åå…¼å®¹è€Œä½¿ç”¨ã€‚è™½ç„¶å®ƒæ˜¯ä¸€ä¸ªé€šç”¨é¦–éƒ¨ï¼Œä½†æ˜¯å®ƒåœ¨å“åº”æŠ¥æ–‡ä¸­æ—¶çš„è¡Œä¸ºæ²¡æœ‰è§„èŒƒï¼Œä¾èµ–äºæµè§ˆå™¨çš„å®ç°ã€‚RFC ä¸­è¯¥å­—æ®µåªæœ‰ no-cache ä¸€ä¸ªå¯é€‰å€¼ï¼Œä¼šé€šçŸ¥æµè§ˆå™¨ä¸ç›´æ¥ä½¿ç”¨ç¼“å­˜ï¼Œè¦æ±‚å‘æœåŠ¡å™¨å‘è¯·æ±‚æ ¡éªŒæ–°é²œåº¦ã€‚å› ä¸ºå®ƒä¼˜å…ˆçº§æœ€é«˜ï¼Œå½“å­˜åœ¨æ—¶ä¸€å®šä¸ä¼šå‘½ä¸­å¼ºç¼“å­˜ã€‚ç›®å‰åŸºæœ¬ä¸ä½¿ç”¨ã€‚</p>
</li>
<li>
<p>Cache-Control
Cache-Control æ˜¯ä¸€ä¸ªé€šç”¨é¦–éƒ¨å­—æ®µï¼Œä¹Ÿæ˜¯ HTTP/1.1 æ§åˆ¶æµè§ˆå™¨ç¼“å­˜çš„ä¸»æµå­—æ®µã€‚
æµè§ˆå™¨ç¼“å­˜é‡Œ, Cache-Control æ˜¯é‡‘å­—å¡”é¡¶å°–çš„è§„åˆ™, å®ƒè—è§†ä¸€åˆ‡å…¶ä»–è®¾ç½®, åªè¦å…¶ä»–è®¾ç½®ä¸å…¶æŠµè§¦, ä¸€å¾‹è¦†ç›–ä¹‹.</p>
</li>
</ol>
<p>ä¸ä»…å¦‚æ­¤, å®ƒè¿˜æ˜¯ä¸€ä¸ªå¤åˆè§„åˆ™, åŒ…å«å¤šç§å€¼, æ¨ªè·¨ å­˜å‚¨ç­–ç•¥, è¿‡æœŸç­–ç•¥ ä¸¤ç§, åŒæ—¶åœ¨è¯·æ±‚å¤´å’Œå“åº”å¤´éƒ½å¯è®¾ç½®.</p>
<p>è¯­æ³•ä¸º: â€œCache-Control : cache-directiveâ€.</p>
<p>Cache-directive å…±æœ‰å¦‚ä¸‹ 12 ç§(å…¶ä¸­è¯·æ±‚ä¸­æŒ‡ä»¤ 7 ç§, å“åº”ä¸­æŒ‡ä»¤ 9 ç§):</p>
<p><img loading="lazy" src="https://ws3.sinaimg.cn/large/006tKfTcly1ftnal0pg00j31630elwjq.jpg"></p>
<ul>
<li>
<p>max-ageï¼ˆå•ä½ä¸º sï¼‰è®¾ç½®ç¼“å­˜çš„å­˜åœ¨æ—¶é—´ï¼Œç›¸å¯¹äºå‘é€è¯·æ±‚çš„æ—¶é—´ã€‚åªæœ‰å“åº”æŠ¥æ–‡é¦–éƒ¨è®¾ç½® Cache-Control ä¸ºé 0 çš„ max-age æ‰æœ‰å¯èƒ½å‘½ä¸­å¼ºç¼“å­˜ã€‚å½“æ»¡è¶³è¿™ä¸ªæ¡ä»¶ï¼ŒåŒæ—¶å“åº”æŠ¥æ–‡é¦–éƒ¨ä¸­ Cache-Control ä¸å­˜åœ¨ no-cacheã€no-store ä¸”è¯·æ±‚æŠ¥æ–‡é¦–éƒ¨ä¸å­˜åœ¨ Pragma å­—æ®µï¼Œæ‰ä¼šçœŸæ­£å‘½ä¸­å¼ºç¼“å­˜ã€‚</p>
</li>
<li>
<p>no-cache è¡¨ç¤ºè¯·æ±‚å¿…é¡»å…ˆä¸æœåŠ¡å™¨ç¡®è®¤ç¼“å­˜çš„æœ‰æ•ˆæ€§ï¼Œå¦‚æœæœ‰æ•ˆæ‰èƒ½ä½¿ç”¨ç¼“å­˜ï¼ˆåå•†ç¼“å­˜ï¼‰ï¼Œæ— è®ºæ˜¯å“åº”æŠ¥æ–‡é¦–éƒ¨è¿˜æ˜¯è¯·æ±‚æŠ¥æ–‡é¦–éƒ¨å‡ºç°è¿™ä¸ªå­—æ®µå‡ä¸€å®šä¸ä¼šå‘½ä¸­å¼ºç¼“å­˜ã€‚Chrome ç¡¬æ€§é‡æ–°åŠ è½½ï¼ˆCommand+shift+Rï¼‰ä¼šåœ¨è¯·æ±‚çš„é¦–éƒ¨åŠ ä¸Š Pragmaï¼šno-cache å’Œ Cache-Controlï¼šno-cacheã€‚</p>
</li>
<li>
<p>no-store è¡¨ç¤ºç¦æ­¢æµè§ˆå™¨ä»¥åŠæ‰€æœ‰ä¸­é—´ç¼“å­˜å­˜å‚¨ä»»ä½•ç‰ˆæœ¬çš„è¿”å›å“åº”ï¼Œä¸€å®šä¸ä¼šå‡ºç°å¼ºç¼“å­˜å’Œåå•†ç¼“å­˜ï¼Œé€‚åˆä¸ªäººéšç§æ•°æ®æˆ–è€…ç»æµç±»æ•°æ®ã€‚</p>
</li>
<li>
<p>public è¡¨æ˜å“åº”å¯ä»¥è¢«æµè§ˆå™¨ã€CDN ç­‰ç­‰ç¼“å­˜ã€‚</p>
</li>
<li>
<p>private å“åº”åªä½œä¸ºç§æœ‰çš„ç¼“å­˜ï¼Œä¸èƒ½è¢« CDN ç­‰ç¼“å­˜ã€‚å¦‚æœè¦æ±‚ HTTP è®¤è¯ï¼Œå“åº”ä¼šè‡ªåŠ¨è®¾ç½®ä¸º privateã€‚</p>
</li>
</ul>
<p><img loading="lazy" src="https://ws1.sinaimg.cn/large/006tKfTcly1ftnamm7mgfj30gj0got8q.jpg">
å›¾ï¼šCache-Control ç­–ç•¥ä¼˜å…ˆçº§</p>
<p>Cache-Control å…è®¸è‡ªç”±ç»„åˆå¯é€‰å€¼ï¼Œä¾‹å¦‚ï¼š</p>
<pre tabindex="0"><code>Cache-Control: max-age=3600, must-revalidate
</code></pre><p>å®ƒæ„å‘³ç€è¯¥èµ„æºæ˜¯ä»åŸæœåŠ¡å™¨ä¸Šå–å¾—çš„ï¼Œä¸”å…¶ç¼“å­˜ï¼ˆæ–°é²œåº¦ï¼‰çš„æœ‰æ•ˆæ—¶é—´ä¸ºä¸€å°æ—¶ï¼Œåœ¨åç»­ä¸€å°æ—¶å†…ï¼Œç”¨æˆ·é‡æ–°è®¿é—®è¯¥èµ„æºåˆ™æ— é¡»å‘é€è¯·æ±‚ã€‚ å½“ç„¶è¿™ç§ç»„åˆçš„æ–¹å¼ä¹Ÿä¼šæœ‰äº›é™åˆ¶ï¼Œæ¯”å¦‚ no-cache å°±ä¸èƒ½å’Œ max-ageã€min-freshã€max-stale ä¸€èµ·æ­é…ä½¿ç”¨ã€‚</p>
<p>3.Expires æ˜¯ HTTP/1.1 ä¹‹å‰ç‰ˆæœ¬é—ç•™çš„é€šç”¨é¦–éƒ¨å­—æ®µï¼Œä»…ä½œä¸ºäº HTTP/1.0 çš„å‘åå…¼å®¹è€Œä½¿ç”¨ã€‚</p>
<p>å³åˆ°æœŸæ—¶é—´, ä»¥æœåŠ¡å™¨æ—¶é—´ä¸ºå‚è€ƒç³», å…¶ä¼˜å…ˆçº§æ¯” Cache-Control:max-age ä½, ä¸¤è€…åŒæ—¶å‡ºç°åœ¨å“åº”å¤´æ—¶, Expires å°†è¢«åè€…è¦†ç›–. å¦‚æœ Expires, Cache-Control: max-age, æˆ– Cache-Control:s-maxage éƒ½æ²¡æœ‰åœ¨å“åº”å¤´ä¸­å‡ºç°, å¹¶ä¸”ä¹Ÿæ²¡æœ‰å…¶å®ƒç¼“å­˜çš„è®¾ç½®, é‚£ä¹ˆæµè§ˆå™¨é»˜è®¤ä¼šé‡‡ç”¨ä¸€ä¸ªå¯å‘å¼çš„ç®—æ³•, é€šå¸¸ä¼šå–å“åº”å¤´çš„ Date_value - Last-Modified_value å€¼çš„ 10%ä½œä¸ºç¼“å­˜æ—¶é—´.</p>
<p>å¦‚ä¸‹èµ„æºä¾¿é‡‡å–äº†å¯å‘å¼ç¼“å­˜ç®—æ³•.
<img loading="lazy" src="https://ws2.sinaimg.cn/large/006tKfTcly1ftnanz8dl3j30m3028wem.jpg"></p>
<p>å…¶ç¼“å­˜æ—¶é—´ä¸º (Date_value - Last-Modified_value) * 10%, è®¡ç®—å¦‚ä¸‹:</p>
<pre tabindex="0"><code>const Date_value = new Date(&#39;Thu, 06 Apr 2017 01:30:56 GMT&#39;).getTime();
const LastModified_value = new Date(&#39;Thu, 01 Dec 2016 06:23:23 GMT&#39;).getTime();
const cacheTime = (Date_value - LastModified_value) / 10;
const Expires_timestamp = Date_value + cacheTime;
const Expires_value = new Date(Expires_timestamp);
console.log(&#39;Expires:&#39;, Expires_value); // Expires: Tue Apr 18 2017 23:25:41 GMT+0800 (CST)
</code></pre><p>å¯è§è¯¥èµ„æºå°†äº 2017 å¹´ 4 æœˆ 18 æ—¥ 23 ç‚¹ 25 åˆ† 41 ç§’è¿‡æœŸ, å°è¯•ä»¥ä¸‹ä¸¤æ­¥è¿›è¡ŒéªŒè¯:</p>
<ol>
<li>
<p>è¯•ç€æŠŠæœ¬åœ°æ—¶é—´ä¿®æ”¹ä¸º 2017 å¹´ 4 æœˆ 18 æ—¥ 23 ç‚¹ 25 åˆ† 40 ç§’, è¿…é€Ÿåˆ·æ–°é¡µé¢, å‘ç°å¼ºç¼“å­˜ä¾ç„¶æœ‰æ•ˆ(ä¾æ—§æ˜¯ 200 OK (from disk cache)).</p>
</li>
<li>
<p>ç„¶ååˆä¿®æ”¹æœ¬åœ°æ—¶é—´ä¸º 2017 å¹´ 4 æœˆ 18 æ—¥ 23 ç‚¹ 26 åˆ† 40 ç§’(å³å¾€åæ‹¨ 1 åˆ†é’Ÿ), åˆ·æ–°é¡µé¢, å‘ç°ç¼“å­˜å·²è¿‡æœŸ, æ­¤æ—¶æµè§ˆå™¨é‡æ–°å‘æœåŠ¡å™¨å‘èµ·äº†éªŒè¯, ä¸”å‘½ä¸­äº† 304 åå•†ç¼“å­˜, å¦‚ä¸‹æ‰€ç¤º.</p>
</li>
</ol>
<p><img loading="lazy" src="https://ws1.sinaimg.cn/large/006tKfTcly1ftnaon5w6vj30lm059js8.jpg"></p>
<ol start="3">
<li>å°†æœ¬åœ°æ—¶é—´æ¢å¤æ­£å¸¸(å³ 2017-04-06 09:54:19). åˆ·æ–°é¡µé¢, å‘ç° Date ä¾ç„¶æ˜¯ 4 æœˆ 18 æ—¥, å¦‚ä¸‹æ‰€ç¤º.</li>
</ol>
<p><img loading="lazy" src="https://ws1.sinaimg.cn/large/006tKfTcly1ftnap0d3a4j30nb093tai.jpg"></p>
<p>ä» âš ï¸ Provisional headers are shown å’Œ Date å­—æ®µå¯ä»¥çœ‹å‡ºæ¥, æµè§ˆå™¨å¹¶æœªå‘å‡ºè¯·æ±‚, ç¼“å­˜ä¾ç„¶æœ‰æ•ˆ, åªä¸è¿‡æ­¤æ—¶ Status Code æ˜¾ç¤ºä¸º 200 OK. (ç”šè‡³æˆ‘è¿˜ä¸“é—¨æ‰“å¼€äº† charles, ä¹Ÿæ²¡æœ‰å‘ç°è¯¥èµ„æºçš„ä»»ä½•è¯·æ±‚, å¯è§è¿™ä¸ª 200 OK å¤šå°‘æœ‰äº›è¯¯å¯¼äººçš„æ„å‘³)</p>
<p>å¯è§, å¯å‘å¼ç¼“å­˜ç®—æ³•é‡‡ç”¨çš„ç¼“å­˜æ—¶é—´å¯é•¿å¯çŸ­, å› æ­¤å¯¹äºå¸¸è§„èµ„æº, å»ºè®®æ˜ç¡®è®¾ç½®ç¼“å­˜æ—¶é—´(å¦‚æŒ‡å®š max-age æˆ– expires).</p>
<h3 id="12-æ§åˆ¶åå•†ç¼“å­˜çš„å­—æ®µ">1.2 æ§åˆ¶åå•†ç¼“å­˜çš„å­—æ®µ</h3>
<p>ä¸Šè¿°çš„é¦–éƒ¨å­—æ®µå‡èƒ½è®©å®¢æˆ·ç«¯å†³å®šæ˜¯å¦å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œæ¯”å¦‚è®¾ç½®çš„ç¼“å­˜æ—¶é—´æœªè¿‡æœŸï¼Œé‚£ä¹ˆè‡ªç„¶ç›´æ¥ä»æœ¬åœ°ç¼“å­˜å–æ•°æ®å³å¯ï¼ˆåœ¨ chrome ä¸‹è¡¨ç°ä¸º 200 from cacheï¼‰ï¼Œè‹¥ç¼“å­˜æ—¶é—´è¿‡æœŸäº†æˆ–èµ„æºä¸è¯¥ç›´æ¥èµ°ç¼“å­˜ï¼Œåˆ™ä¼šå‘è¯·æ±‚åˆ°æœåŠ¡å™¨å»ã€‚
æˆ‘ä»¬ç°åœ¨è¦è¯´çš„é—®é¢˜æ˜¯ï¼Œ<strong>å¦‚æœå®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘äº†è¯·æ±‚ï¼Œé‚£ä¹ˆæ˜¯å¦æ„å‘³ç€ä¸€å®šè¦è¯»å–å›è¯¥èµ„æºçš„æ•´ä¸ªå®ä½“å†…å®¹å‘¢ï¼Ÿ</strong>
æˆ‘ä»¬è¯•ç€è¿™ä¹ˆæƒ³â€”â€”å®¢æˆ·ç«¯ä¸ŠæŸä¸ªèµ„æºä¿å­˜çš„ç¼“å­˜æ—¶é—´è¿‡æœŸäº†ï¼Œä½†è¿™æ—¶å€™å…¶å®æœåŠ¡å™¨å¹¶æ²¡æœ‰æ›´æ–°è¿‡è¿™ä¸ªèµ„æºï¼Œå¦‚æœè¿™ä¸ªèµ„æºæ•°æ®é‡å¾ˆå¤§ï¼Œå®¢æˆ·ç«¯è¦æ±‚æœåŠ¡å™¨å†æŠŠè¿™ä¸ªä¸œè¥¿é‡æ–°å‘ä¸€éè¿‡æ¥ï¼Œæ˜¯å¦éå¸¸æµªè´¹å¸¦å®½å’Œæ—¶é—´å‘¢ï¼Ÿ
ç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œé‚£ä¹ˆæ˜¯å¦æœ‰åŠæ³•è®©æœåŠ¡å™¨çŸ¥é“å®¢æˆ·ç«¯ç°åœ¨å­˜æœ‰çš„ç¼“å­˜æ–‡ä»¶ï¼Œå…¶å®è·Ÿè‡ªå·±æ‰€æœ‰çš„æ–‡ä»¶æ˜¯ä¸€è‡´çš„ï¼Œç„¶åç›´æ¥å‘Šè¯‰å®¢æˆ·ç«¯è¯´â€œè¿™ä¸œè¥¿ä½ ç›´æ¥ç”¨ç¼“å­˜é‡Œçš„å°±å¯ä»¥äº†ï¼Œæˆ‘è¿™è¾¹æ²¡æ›´æ–°è¿‡å‘¢ï¼Œå°±ä¸å†ä¼ ä¸€æ¬¡è¿‡å»äº†â€ã€‚
ä¸¾ä¾‹æ¥è¯´ï¼š</p>
<pre tabindex="0"><code>Cï¼šå°æœï¼Œä½ å‡ å²äº†ï¼Ÿ
Sï¼šå°å®¢ï¼Œæˆ‘18å²äº†ã€‚
=================================
Cï¼šå°æœ ï¼Œä½ å‡ å²äº†ï¼Ÿæˆ‘çŒœä½ 18å²äº†ã€‚
Sï¼šé ï¼Œä½ çŸ¥é“è¿˜é—®æˆ‘ï¼Ÿï¼ˆ304ï¼‰
=================================
Cï¼šå°æœ ï¼Œä½ å‡ å²äº†ï¼Ÿæˆ‘çŒœä½ 18å²äº†ã€‚
Sï¼šå°å®¢ ï¼Œæˆ‘19å²äº†ã€‚ï¼ˆ200ï¼‰
</code></pre><p>ä¸ºäº†è®©å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´èƒ½å®ç°ç¼“å­˜æ–‡ä»¶æ˜¯å¦æ›´æ–°çš„éªŒè¯ã€æå‡ç¼“å­˜çš„å¤ç”¨ç‡ï¼ŒHttp1.1 æ–°å¢äº†å‡ ä¸ªé¦–éƒ¨å­—æ®µæ¥åšè¿™ä»¶äº‹æƒ…ã€‚</p>
<p><img loading="lazy" src="https://ws2.sinaimg.cn/large/006tKfTcly1ftnaq12rn7j30dz04imx2.jpg"></p>
<ol>
<li>
<p>Last-Modified/If-Modified-Since
If-Modified-Since æ˜¯ä¸€ä¸ªè¯·æ±‚é¦–éƒ¨å­—æ®µï¼Œå¹¶ä¸”åªèƒ½ç”¨åœ¨ GET æˆ–è€… HEAD è¯·æ±‚ä¸­ã€‚
Last-Modified æ˜¯ä¸€ä¸ªå“åº”é¦–éƒ¨å­—æ®µï¼ŒåŒ…å«æœåŠ¡å™¨è®¤å®šçš„èµ„æºä½œå‡ºä¿®æ”¹çš„æ—¥æœŸåŠæ—¶é—´ã€‚
å½“å¸¦ç€ If-Modified-Since å¤´è®¿é—®æœåŠ¡å™¨è¯·æ±‚èµ„æºæ—¶ï¼ŒæœåŠ¡å™¨ä¼šæ£€æŸ¥ Last-Modifiedï¼Œå¦‚æœ Last-Modified çš„æ—¶é—´æ—©äºæˆ–ç­‰äº If-Modified-Since åˆ™ä¼šè¿”å›ä¸€ä¸ªä¸å¸¦ä¸»ä½“çš„ 304 å“åº”ï¼Œå¦åˆ™å°†é‡æ–°è¿”å›èµ„æºã€‚
If-Modified-Since: , :: GMT Last-Modified: , :: GMT</p>
</li>
<li>
<p>ETag/If-None-Match</p>
</li>
</ol>
<p>ETag æ˜¯ä¸€ä¸ªå“åº”é¦–éƒ¨å­—æ®µï¼Œå®ƒæ˜¯æ ¹æ®å®ä½“å†…å®¹ç”Ÿæˆçš„ä¸€æ®µ hash å­—ç¬¦ä¸²ï¼Œæ ‡è¯†èµ„æºçš„çŠ¶æ€ï¼Œç”±æœåŠ¡ç«¯äº§ç”Ÿã€‚</p>
<p>If-None-Match æ˜¯ä¸€ä¸ªæ¡ä»¶å¼çš„è¯·æ±‚é¦–éƒ¨ã€‚å¦‚æœè¯·æ±‚èµ„æºæ—¶åœ¨è¯·æ±‚é¦–éƒ¨åŠ ä¸Šè¿™ä¸ªå­—æ®µï¼Œå€¼ä¸ºä¹‹å‰æœåŠ¡å™¨ç«¯è¿”å›çš„èµ„æºä¸Šçš„ ETagï¼Œåˆ™å½“ä¸”ä»…å½“æœåŠ¡å™¨ä¸Šæ²¡æœ‰ä»»ä½•èµ„æºçš„ ETag å±æ€§å€¼ä¸è¿™ä¸ªé¦–éƒ¨ä¸­åˆ—å‡ºçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨æ‰ä¼šè¿”å›å¸¦æœ‰æ‰€è¯·æ±‚èµ„æºå®ä½“çš„ 200 å“åº”ï¼Œå¦åˆ™æœåŠ¡å™¨ä¼šè¿”å›ä¸å¸¦å®ä½“çš„ 304 å“åº”ã€‚ETag ä¼˜å…ˆçº§æ¯” Last-Modified é«˜ï¼ŒåŒæ—¶å­˜åœ¨æ—¶ä¼šä»¥ ETag ä¸ºå‡†ã€‚</p>
<p>If-None-Match: &lt;etag_value&gt; If-None-Match: &lt;etag_value&gt;, &lt;etag_value&gt;, â€¦ If-None-Match: *</p>
<p>ETag å±æ€§ä¹‹é—´çš„æ¯”è¾ƒé‡‡ç”¨çš„æ˜¯å¼±æ¯”è¾ƒç®—æ³•ï¼Œå³ä¸¤ä¸ªæ–‡ä»¶é™¤äº†æ¯ä¸ªæ¯”ç‰¹éƒ½ç›¸åŒå¤–ï¼Œå†…å®¹ä¸€è‡´ä¹Ÿå¯ä»¥è®¤ä¸ºæ˜¯ç›¸åŒçš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸¤ä¸ªé¡µé¢ä»…ä»…åœ¨é¡µè„šçš„ç”Ÿæˆæ—¶é—´æœ‰æ‰€ä¸åŒï¼Œå°±å¯ä»¥è®¤ä¸ºäºŒè€…æ˜¯ç›¸åŒçš„ã€‚</p>
<p>å› ä¸º ETag çš„ç‰¹æ€§ï¼Œæ‰€ä»¥ç›¸è¾ƒäº Last-Modified æœ‰ä¸€äº›ä¼˜åŠ¿ï¼š</p>
<ol>
<li>æŸäº›æƒ…å†µä¸‹æœåŠ¡å™¨æ— æ³•è·å–èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´</li>
<li>èµ„æºçš„æœ€åä¿®æ”¹æ—¶é—´å˜äº†ä½†æ˜¯å†…å®¹æ²¡å˜ï¼Œä½¿ç”¨ ETag å¯ä»¥æ­£ç¡®ç¼“å­˜</li>
<li>å¦‚æœèµ„æºä¿®æ”¹éå¸¸é¢‘ç¹ï¼Œåœ¨ç§’ä»¥ä¸‹çš„æ—¶é—´è¿›è¡Œä¿®æ”¹ï¼ŒLast-Modified åªèƒ½ç²¾ç¡®åˆ°ç§’</li>
</ol>
<h2 id="2-http-å…¶ä»–å­—æ®µ">2 http å…¶ä»–å­—æ®µ</h2>
<h3 id="21-age">2.1 Age</h3>
<p>å‡ºç°æ­¤å­—æ®µ, è¡¨ç¤ºå‘½ä¸­ä»£ç†æœåŠ¡å™¨çš„ç¼“å­˜. å®ƒæŒ‡çš„æ˜¯ä»£ç†æœåŠ¡å™¨å¯¹äºè¯·æ±‚èµ„æºçš„å·²ç¼“å­˜æ—¶é—´, å•ä½ä¸ºç§’. å¦‚ä¸‹:</p>
<pre tabindex="0"><code>Age:2383321
Date:Wed, 08 Mar 2017 16:12:42 GMT
</code></pre><p>ä»¥ä¸ŠæŒ‡çš„æ˜¯, ä»£ç†æœåŠ¡å™¨åœ¨ 2017 å¹´ 3 æœˆ 8 æ—¥ 16:12:42 æ—¶å‘æºæœåŠ¡å™¨å‘èµ·äº†å¯¹è¯¥èµ„æºçš„è¯·æ±‚, ç›®å‰å·²ç¼“å­˜äº†è¯¥èµ„æº 2383321 ç§’.</p>
<h3 id="22-date">2.2 Date</h3>
<p>æŒ‡çš„æ˜¯å“åº”ç”Ÿæˆçš„æ—¶é—´. è¯·æ±‚ç»è¿‡ä»£ç†æœåŠ¡å™¨æ—¶, è¿”å›çš„ Date æœªå¿…æ˜¯æœ€æ–°çš„, é€šå¸¸è¿™ä¸ªæ—¶å€™, ä»£ç†æœåŠ¡å™¨å°†å¢åŠ ä¸€ä¸ª Age å­—æ®µå‘ŠçŸ¥è¯¥èµ„æºå·²ç¼“å­˜äº†å¤šä¹….</p>
<h3 id="23-vary">2.3 Vary</h3>
<p>å¯¹äºæœåŠ¡å™¨è€Œè¨€, èµ„æºæ–‡ä»¶å¯èƒ½ä¸æ­¢ä¸€ä¸ªç‰ˆæœ¬, æ¯”å¦‚è¯´å‹ç¼©å’Œæœªå‹ç¼©, é’ˆå¯¹ä¸åŒçš„å®¢æˆ·ç«¯, é€šå¸¸éœ€è¦è¿”å›ä¸åŒçš„èµ„æºç‰ˆæœ¬. æ¯”å¦‚è¯´è€å¼çš„æµè§ˆå™¨å¯èƒ½ä¸æ”¯æŒè§£å‹ç¼©, è¿™ä¸ªæ—¶å€™, å°±éœ€è¦è¿”å›ä¸€ä¸ªæœªå‹ç¼©çš„ç‰ˆæœ¬; å¯¹äºæ–°çš„æµè§ˆå™¨, æ”¯æŒå‹ç¼©, è¿”å›ä¸€ä¸ªå‹ç¼©çš„ç‰ˆæœ¬, æœ‰åˆ©äºèŠ‚çœå¸¦å®½, æå‡ä½“éªŒ. é‚£ä¹ˆæ€ä¹ˆåŒºåˆ†è¿™ä¸ªç‰ˆæœ¬å‘¢, è¿™ä¸ªæ—¶å€™å°±éœ€è¦ Vary äº†.
æœåŠ¡å™¨é€šè¿‡æŒ‡å®š Vary: Accept-Encoding, å‘ŠçŸ¥ä»£ç†æœåŠ¡å™¨, å¯¹äºè¿™ä¸ªèµ„æº, éœ€è¦ç¼“å­˜ä¸¤ä¸ªç‰ˆæœ¬: å‹ç¼©å’Œæœªå‹ç¼©. è¿™æ ·è€å¼æµè§ˆå™¨å’Œæ–°çš„æµè§ˆå™¨, é€šè¿‡ä»£ç†, å°±åˆ†åˆ«æ‹¿åˆ°äº†æœªå‹ç¼©å’Œå‹ç¼©ç‰ˆæœ¬çš„èµ„æº, é¿å…äº†éƒ½æ‹¿åŒä¸€ä¸ªèµ„æºçš„å°´å°¬.</p>
<pre tabindex="0"><code>Vary:Accept-Encoding,User-Agent
</code></pre><p>å¦‚ä¸Šè®¾ç½®, ä»£ç†æœåŠ¡å™¨å°†é’ˆå¯¹æ˜¯å¦å‹ç¼©å’Œæµè§ˆå™¨ç±»å‹ä¸¤ä¸ªç»´åº¦å»ç¼“å­˜èµ„æº. å¦‚æ­¤ä¸€æ¥, åŒä¸€ä¸ª url, å°±èƒ½é’ˆå¯¹ PC å’Œ Mobile è¿”å›ä¸åŒçš„ç¼“å­˜å†…å®¹.</p>
<h2 id="3-ç¼“å­˜å¤´éƒ¨å¯¹æ¯”">3 ç¼“å­˜å¤´éƒ¨å¯¹æ¯”</h2>
<p><img loading="lazy" src="https://ws4.sinaimg.cn/large/006tKfTcly1ftnasbu6u5j31dy0xeds0.jpg"></p>
<h2 id="4-ç”¨æˆ·åˆ·æ–°è®¿é—®è¡Œä¸º">4 ç”¨æˆ·åˆ·æ–°/è®¿é—®è¡Œä¸º</h2>
<p><img loading="lazy" src="https://ws2.sinaimg.cn/large/006tKfTcly1ftnau6q6gcj30vy0dcabl.jpg"></p>
<h2 id="5-ç¼“å­˜å®è·µ">5 ç¼“å­˜å®è·µ</h2>
<p>ç»¼ä¸Šå¯¹å„ç§ HTTP ç¼“å­˜æ§åˆ¶å¤´éƒ¨çš„å¯¹æ¯”ä»¥åŠç”¨æˆ·å¯èƒ½å‡ºç°çš„æµè§ˆå™¨åˆ·æ–°è¡Œä¸ºçš„è®¨è®ºï¼Œå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªé¡¹ç›®ä¸Šåš http ç¼“å­˜çš„åº”ç”¨æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šè¿˜æ˜¯ä¼šæŠŠä¸Šè¿°æåŠçš„å¤§å¤šæ•°é¦–éƒ¨å­—æ®µå‡ä½¿ç”¨ä¸Šã€‚</p>
<h3 id="51-expires--cache-control">5.1 Expires / Cache-Control</h3>
<p>Expires ç”¨æ—¶åˆ»æ¥æ ‡è¯†å¤±æ•ˆæ—¶é—´ï¼Œä¸å…æ”¶åˆ°æ—¶é—´åŒæ­¥çš„å½±å“ï¼Œè€Œ Cache-Control ä½¿ç”¨æ—¶é—´é—´éš”å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ ä½†æ˜¯ Cache-Control æ˜¯ HTTP1.1 æ‰æœ‰çš„ï¼Œä¸é€‚ç”¨äº HTTP1.0ï¼Œè€Œ Expires æ—¢é€‚ç”¨äº HTTP1.0ï¼Œä¹Ÿé€‚ç”¨äº HTTP1.1ï¼Œæ‰€ä»¥è¯´åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹åŒæ—¶å‘é€è¿™ä¸¤ä¸ªå¤´ä¼šæ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ï¼Œå½“å®¢æˆ·ç«¯ä¸¤ç§å¤´éƒ½èƒ½è§£æçš„æ—¶å€™ï¼Œä¼šä¼˜å…ˆä½¿ç”¨ Cache-Controlã€‚</p>
<h3 id="52-last-modified--etag">5.2 Last-Modified / ETag</h3>
<p>äºŒè€…éƒ½æ˜¯é€šè¿‡æŸä¸ªæ ‡è¯†å€¼æ¥è¯·æ±‚èµ„æºï¼Œ å¦‚æœæœåŠ¡å™¨ç«¯çš„èµ„æºæ²¡æœ‰å˜åŒ–ï¼Œåˆ™è‡ªåŠ¨è¿”å› HTTP 304 ï¼ˆNot Changedï¼‰çŠ¶æ€ç ï¼Œå†…å®¹ä¸ºç©ºï¼Œè¿™æ ·å°±èŠ‚çœäº†ä¼ è¾“æ•°æ®é‡ã€‚è€Œå½“èµ„æºå‘ç”Ÿæ¯”é‚£è¯åï¼Œè¿”å›å’Œç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ç±»ä¼¼ã€‚ä»è€Œä¿è¯ä¸å‘å®¢æˆ·ç«¯é‡å¤å‘å‡ºèµ„æºï¼Œä¹Ÿä¿è¯å½“æœåŠ¡å™¨æœ‰å˜åŒ–æ—¶ï¼Œå®¢æˆ·ç«¯èƒ½å¤Ÿå¾—åˆ°æœ€æ–°çš„èµ„æºã€‚
å…¶ä¸­ Last-Modified ä½¿ç”¨æ–‡ä»¶æœ€åä¿®æ”¹ä½œä¸ºæ–‡ä»¶æ ‡è¯†å€¼ï¼Œå®ƒæ— æ³•å¤„ç†æ–‡ä»¶ä¸€ç§’å†…å¤šæ¬¡ä¿®æ”¹çš„æƒ…å†µï¼Œè€Œä¸”åªè¦æ–‡ä»¶ä¿®æ”¹äº†å“ªæ€•æ–‡ä»¶å®è´¨å†…å®¹æ²¡æœ‰ä¿®æ”¹ï¼Œä¹Ÿä¼šé‡æ–°è¿”å›èµ„æºå†…å®¹ï¼›ETag ä½œä¸ºâ€œè¢«è¯·æ±‚å˜é‡çš„å®ä½“å€¼â€ï¼Œå…¶å®Œå…¨å¯ä»¥è§£å†³ Last-Modified å¤´éƒ¨çš„é—®é¢˜ï¼Œä½†æ˜¯å…¶è®¡ç®—è¿‡ç¨‹éœ€è¦è€—è´¹æœåŠ¡å™¨èµ„æºã€‚</p>
<h3 id="53-from-cache--304">5.3 from-cache / 304</h3>
<p>Expires å’Œ Cache-Control éƒ½æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯æœåŠ¡ç«¯ä½œä¸ºçš„ä¿®æ”¹ï¼Œå¦‚æœè¿˜åœ¨ç¼“å­˜æ—¶æ•ˆé‡Œï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯æ˜¯ä¸ä¼šå»è¯·æ±‚æœåŠ¡ç«¯èµ„æºçš„ï¼ˆéåˆ·æ–°ï¼‰ï¼Œè¿™å°±å­˜åœ¨ä¸€ä¸ªèµ„æºç‰ˆæœ¬ä¸ç¬¦çš„é—®é¢˜ï¼Œè€Œå¼ºåˆ¶åˆ·æ–°ä¸€å®šä¼šå‘èµ· HTTP è¯·æ±‚å¹¶è¿”å›èµ„æºå†…å®¹ï¼Œæ— è®ºè¯¥å†…å®¹åœ¨è¿™æ®µæ—¶é—´å†…æ˜¯å¦ä¿®æ”¹è¿‡ï¼›è€Œ Last-Modified å’Œ Etag æ¯æ¬¡è¯·æ±‚èµ„æºéƒ½ä¼šå‘èµ·è¯·æ±‚ï¼Œå“ªæ€•æ˜¯å¾ˆä¹…éƒ½ä¸ä¼šæœ‰ä¿®æ”¹çš„èµ„æºï¼Œéƒ½è‡³å°‘æœ‰ä¸€æ¬¡è¯·æ±‚å“åº”çš„æ¶ˆè€—ã€‚
å¯¹äºæ‰€æœ‰å¯ç¼“å­˜èµ„æºï¼ŒæŒ‡å®šä¸€ä¸ª Expires æˆ– Cache-Control max-age ä»¥åŠä¸€ä¸ª Last-Modified æˆ– ETag è‡³å…³é‡è¦ã€‚åŒæ—¶ä½¿ç”¨å‰è€…å’Œåè€…å¯ä»¥å¾ˆå¥½çš„ç›¸äº’é€‚åº”ã€‚
å‰è€…ä¸éœ€è¦æ¯æ¬¡éƒ½å‘èµ·ä¸€æ¬¡è¯·æ±‚æ¥æ ¡éªŒèµ„æºæ—¶æ•ˆæ€§ï¼Œåè€…ä¿è¯å½“èµ„æºæœªå‡ºç°ä¿®æ”¹çš„æ—¶å€™ä¸éœ€è¦é‡æ–°å‘é€è¯¥èµ„æºã€‚è€Œåœ¨ç”¨æˆ·çš„ä¸åŒåˆ·æ–°é¡µé¢è¡Œä¸ºä¸­ï¼ŒäºŒè€…çš„ç»“åˆä¹Ÿèƒ½å¾ˆå¥½çš„åˆ©ç”¨ HTTP ç¼“å­˜æ§åˆ¶ç‰¹æ€§ï¼Œæ— è®ºæ˜¯åœ¨åœ°å€æ è¾“å…¥ URI ç„¶åè¾“å…¥å›è½¦è¿›è¡Œè®¿é—®ï¼Œè¿˜æ˜¯ç‚¹å‡»åˆ·æ–°æŒ‰é’®ï¼Œæµè§ˆå™¨éƒ½èƒ½å……åˆ†åˆ©ç”¨ç¼“å­˜å†…å®¹ï¼Œé¿å…è¿›è¡Œä¸å¿…è¦çš„è¯·æ±‚ä¸æ•°æ®ä¼ è¾“ã€‚</p>
<h3 id="54-é¿å…-304">5.4 é¿å… 304</h3>
<p>åŒå­¦ä»¬æ˜¯å¦è¿˜è®°å¾—æˆ‘ä»¬åœ¨è®¨è®ºç”¨æˆ·åˆ·æ–°é¡µé¢è¡Œä¸ºä¸­ä½“ç§¯çš„ index.css æ–‡ä»¶ï¼Œå®ƒå®é™…ä¸Šè¢«å‘½åä¸º index.03d344bd.cssã€‚è€Œç»†å¿ƒçš„åŒå­¦ä¹Ÿä¼šå‘ç°å®ƒçš„ Expires å’Œ Cache-Control æ—¶é—´å‡ºå¥‡çš„é•¿ï¼Œè¿™éš¾é“ä¸ä¼šå¯¼è‡´ç”¨æˆ·æ— æ³•å¾—åˆ°å…¶æœ€è¿‘çš„å†…å®¹å—ï¼Ÿ</p>
<p>å…¶åšæ³•å®é™…ä¸Šå¾ˆç®€å•ï¼Œå®ƒæŠŠæœåŠ¡ä¾§ ETag çš„é‚£ä¸€å¥—ç†è®ºæ¬åˆ°äº†å‰ç«¯æ¥ä½¿ç”¨ã€‚ é¡µé¢çš„é™æ€èµ„æºä»¥ç‰ˆæœ¬å½¢å¼å‘å¸ƒï¼Œå¸¸ç”¨çš„æ–¹æ³•æ˜¯åœ¨æ–‡ä»¶åæˆ–å‚æ•°å¸¦ä¸Šä¸€ä¸² md5 æˆ–æ—¶é—´æ ‡è®°ç¬¦ï¼š</p>
<pre tabindex="0"><code>https://hm.baidu.com/hm.js?e23800c454aa573c0ccb16b52665ac26
http://tb1.bdstatic.com/tb/_/tbean_safe_ajax_94e7ca2.js
http://img1.gtimg.com/ninja/2/2016/04/ninja145972803357449.jpg
</code></pre><p>å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ä¾‹å­ä¸­æœ‰ä¸åŒçš„åšæ³•ï¼Œæœ‰çš„åœ¨ URI åé¢åŠ ä¸Šäº† md5 å‚æ•°ï¼Œæœ‰çš„å°† md5 å€¼ä½œä¸ºæ–‡ä»¶åçš„ä¸€éƒ¨åˆ†ï¼Œæœ‰çš„å°†èµ„æºæ”¾åœ¨ç‰¹æ€§ç‰ˆæœ¬çš„ç›®å½•ä¸­ã€‚
é‚£ä¹ˆåœ¨æ–‡ä»¶æ²¡æœ‰å˜åŠ¨çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¸ç”¨å‘èµ·è¯·æ±‚ç›´æ¥å¯ä»¥ä½¿ç”¨ç¼“å­˜æ–‡ä»¶ï¼›è€Œåœ¨æ–‡ä»¶æœ‰å˜åŒ–çš„æ—¶å€™ï¼Œç”±äºæ–‡ä»¶ç‰ˆæœ¬å·çš„å˜æ›´ï¼Œå¯¼è‡´æ–‡ä»¶åå˜åŒ–ï¼Œè¯·æ±‚çš„ url å˜äº†ï¼Œè‡ªç„¶æ–‡ä»¶å°±æ›´æ–°äº†ã€‚è¿™æ ·èƒ½ç¡®ä¿å®¢æˆ·ç«¯èƒ½åŠæ—¶ä»æœåŠ¡å™¨æ”¶å–åˆ°æ–°ä¿®æ”¹çš„æ–‡ä»¶ã€‚é€šè¿‡è¿™æ ·çš„å¤„ç†ï¼Œå¢é•¿äº†é™æ€èµ„æºï¼Œç‰¹åˆ«æ˜¯å›¾ç‰‡èµ„æºçš„ç¼“å­˜æ—¶é—´ï¼Œé¿å…è¯¥èµ„æºå¾ˆå¿«è¿‡æœŸï¼Œå®¢æˆ·ç«¯é¢‘ç¹å‘æœåŠ¡ç«¯å‘èµ·èµ„æºè¯·æ±‚ï¼ŒæœåŠ¡å™¨å†è¿”å› 304 å“åº”çš„æƒ…å†µï¼ˆæœ‰ Last-Modified/Etagï¼‰ã€‚</p>
<h3 id="55-tips">5.5 Tips</h3>
<ul>
<li>éœ€è¦å…¼å®¹ HTTP1.0 çš„æ—¶å€™éœ€è¦ä½¿ç”¨ Expiresï¼Œä¸ç„¶å¯ä»¥è€ƒè™‘ç›´æ¥ä½¿ç”¨ Cache-Control</li>
<li>éœ€è¦å¤„ç†ä¸€ç§’å†…å¤šæ¬¡ä¿®æ”¹çš„æƒ…å†µï¼Œæˆ–è€…å…¶ä»– Last-Modified å¤„ç†ä¸äº†çš„æƒ…å†µï¼Œæ‰ä½¿ç”¨ ETagï¼Œå¦åˆ™ä½¿ç”¨ Last-Modifiedã€‚</li>
<li>å¯¹äºæ‰€æœ‰å¯ç¼“å­˜èµ„æºï¼Œéœ€è¦æŒ‡å®šä¸€ä¸ª Expires æˆ– Cache-Controlï¼ŒåŒæ—¶æŒ‡å®š Last-Modified æˆ–è€… Etagã€‚</li>
<li>å¯ä»¥é€šè¿‡æ ‡è¯†æ–‡ä»¶ç‰ˆæœ¬åã€åŠ é•¿ç¼“å­˜æ—¶é—´çš„æ–¹å¼æ¥å‡å°‘ 304 å“åº”ã€‚</li>
</ul>
<h2 id="6-é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ">6 é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h2>
<ol>
<li>
<p>ä»€ä¹ˆæ—¶å€™è¯¥è®¾ç½®ç¼“å­˜ï¼Ÿ</p>
</li>
<li>
<p>å‰ç«¯å¦‚ä½•æœ‰æ•ˆè®¾ç½®ç¼“å­˜ï¼Ÿ</p>
</li>
<li>
<p>å¼€å‘ä¸­å¦‚ä½•é¿å…ç¼“å­˜ï¼Ÿ</p>
</li>
<li>
<p>æ—¢ç”Ÿ Last-Modifiedï¼Œä½•ç”Ÿ E-tagï¼Ÿ</p>
</li>
<li>
<p>å‡è®¾æ‰€è¯·æ±‚èµ„æºäº 4 æœˆ 5 æ—¥ç¼“å­˜, ä¸”åœ¨ 4 æœˆ 12 æ—¥è¿‡æœŸ.
å½“ max-age ä¸ max-stale å’Œ min-fresh åŒæ—¶ä½¿ç”¨æ—¶, å®ƒä»¬çš„è®¾ç½®ç›¸äº’ä¹‹é—´ç‹¬ç«‹ç”Ÿæ•ˆ, æœ€ä¸ºä¿å®ˆçš„ç¼“å­˜ç­–ç•¥æ€»æ˜¯æœ‰æ•ˆ. è¿™æ„å‘³ç€, å¦‚æœ max-age=10 days, max-stale=2 days, min-fresh=3 days, é‚£ä¹ˆ:
ç”±äºå®¢æˆ·ç«¯æ€»æ˜¯é‡‡ç”¨æœ€ä¿å®ˆçš„ç¼“å­˜ç­–ç•¥, å› æ­¤, 4 æœˆ 9 æ—¥å, å¯¹äºè¯¥èµ„æºçš„è¯·æ±‚å°†é‡æ–°å‘æœåŠ¡å™¨å‘èµ·éªŒè¯.</p>
</li>
</ol>
<p>ç­”æ¡ˆï¼š</p>
<ol>
<li>
<p>æ ¹æ®ç¼“å­˜çš„ä½œç”¨åŠå…·ä½“éœ€æ±‚åœºæ™¯è®¾ç½®ã€‚</p>
</li>
<li>
<p><a href="http://wiki.xiaodutv.com/pages/viewpage.action?pageId=17173670#1.1%20%E6%8E%A7%E5%88%B6%E5%BC%BA%E7%BC%93%E5%AD%98%E7%9A%84%E5%AD%97%E6%AE%B5%E6%8C%89%E4%BC%98%E5%85%88%E7%BA%A7%E4%BB%8B%E7%BB%8D">1.1 æ§åˆ¶å¼ºç¼“å­˜çš„å­—æ®µæŒ‰ä¼˜å…ˆçº§ä»‹ç»</a></p>
</li>
<li>
<p><a href="http://wiki.xiaodutv.com/pages/viewpage.action?pageId=17173670#4%20%E7%94%A8%E6%88%B7%E5%88%B7%E6%96%B0/%E8%AE%BF%E9%97%AE%E8%A1%8C%E4%B8%BA">ç”¨æˆ·åˆ·æ–°/è®¿é—®è¡Œä¸º</a></p>
</li>
<li>
<p>æ—¢ç”Ÿ Last-Modifiedï¼Œä½•ç”Ÿ E-tagï¼Ÿ</p>
</li>
</ol>
<p>ä½ å¯èƒ½ä¼šè§‰å¾—ä½¿ç”¨ Last-Modified å·²ç»è¶³ä»¥è®©æµè§ˆå™¨çŸ¥é“æœ¬åœ°çš„ç¼“å­˜å‰¯æœ¬æ˜¯å¦è¶³å¤Ÿæ–°ï¼Œä¸ºä»€ä¹ˆè¿˜éœ€è¦ Etagï¼ˆå®ä½“æ ‡è¯†ï¼‰å‘¢ï¼Ÿ</p>
<p>HTTP1.1 ä¸­ Etag çš„å‡ºç°ä¸»è¦æ˜¯ä¸ºäº†è§£å†³å‡ ä¸ª Last-Modified æ¯”è¾ƒéš¾è§£å†³çš„é—®é¢˜ï¼š</p>
<p>a. Last-Modified æ ‡æ³¨çš„æœ€åä¿®æ”¹åªèƒ½ç²¾ç¡®åˆ°ç§’çº§ï¼Œå¦‚æœæŸäº›æ–‡ä»¶åœ¨ 1 ç§’é’Ÿä»¥å†…ï¼Œè¢«ä¿®æ”¹å¤šæ¬¡çš„è¯ï¼Œå®ƒå°†ä¸èƒ½å‡†ç¡®æ ‡æ³¨æ–‡ä»¶çš„ä¿®æ”¹æ—¶é—´</p>
<p>b. å¦‚æœæŸäº›æ–‡ä»¶ä¼šè¢«å®šæœŸç”Ÿæˆï¼Œå½“æœ‰æ—¶å†…å®¹å¹¶æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œä½† Last-Modified å´æ”¹å˜äº†ï¼Œå¯¼è‡´æ–‡ä»¶æ²¡æ³•ä½¿ç”¨ç¼“å­˜</p>
<p>c. æœ‰å¯èƒ½å­˜åœ¨æœåŠ¡å™¨æ²¡æœ‰å‡†ç¡®è·å–æ–‡ä»¶ä¿®æ”¹æ—¶é—´ï¼Œæˆ–è€…ä¸ä»£ç†æœåŠ¡å™¨æ—¶é—´ä¸ä¸€è‡´ç­‰æƒ…å½¢</p>
<p>Etag æ˜¯æœåŠ¡å™¨è‡ªåŠ¨ç”Ÿæˆæˆ–è€…ç”±å¼€å‘è€…ç”Ÿæˆçš„å¯¹åº”èµ„æºåœ¨æœåŠ¡å™¨ç«¯çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œèƒ½å¤Ÿæ›´åŠ å‡†ç¡®çš„æ§åˆ¶ç¼“å­˜ã€‚Last-Modified ä¸ ETag æ˜¯å¯ä»¥ä¸€èµ·ä½¿ç”¨çš„ï¼ŒæœåŠ¡å™¨ä¼šä¼˜å…ˆéªŒè¯ ETagï¼Œä¸€è‡´çš„æƒ…å†µä¸‹ï¼Œæ‰ä¼šç»§ç»­æ¯”å¯¹ Last-Modifiedï¼Œæœ€åæ‰å†³å®šæ˜¯å¦è¿”å› 304ã€‚</p>
<h2 id="7-å‚è€ƒ">7 å‚è€ƒ</h2>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Caching_FAQ">HTTP ç¼“å­˜ - HTTP | MDN</a>
<a href="http://wiki.xiaodutv.com/pages/viewpage.action?pageId=9963820">æµè§ˆå™¨ç¼“å­˜æœºåˆ¶</a>
<a href="https://juejin.im/post/5a673af06fb9a01c927ed880">æµè§ˆå™¨ HTTP ç¼“å­˜æœºåˆ¶</a>
<a href="http://louiszhai.github.io/2017/04/07/http-cache/">æµè§ˆå™¨ç¼“å­˜æœºåˆ¶å‰–æ</a>
<a href="https://mp.weixin.qq.com/s?__biz=MzA3NTYzODYzMg==&amp;mid=2653578381&amp;idx=1&amp;sn=3f676e2b2e08bcff831c69d31cf51c51">å½»åº•å¼„æ‡‚ Http ç¼“å­˜æœºåˆ¶ - åŸºäºç¼“å­˜ç­–ç•¥ä¸‰è¦ç´ åˆ†è§£æ³•</a>
<a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html">Header Field Definitions</a>
<a href="https://zh.wikipedia.org/wiki/%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE">è¶…æ–‡æœ¬ä¼ è¾“åè®®</a>
<a href="https://github.com/Pines-Cheng/blog/issues/5">å‰ç«¯å¿…é¡»çŸ¥é“çš„ http ç¼“å­˜</a></p>
<hr>
<p><a href="">ğŸ” å›åˆ°é¡¶éƒ¨</a></p>]]></content:encoded>
    </item>
    <item>
      <title>Node.jsæ¨¡æ‹Ÿè¯·æ±‚å‘å¾®åš</title>
      <link>https://itibbers.com/posts/node-js%E6%A8%A1%E6%8B%9F%E8%AF%B7%E6%B1%82%E5%8F%91%E5%BE%AE%E5%8D%9A/</link>
      <pubDate>Fri, 16 Feb 2018 13:42:07 +0000</pubDate>
      <guid>https://itibbers.com/posts/node-js%E6%A8%A1%E6%8B%9F%E8%AF%B7%E6%B1%82%E5%8F%91%E5%BE%AE%E5%8D%9A/</guid>
      <description>&lt;p&gt;æ–°æµªå¾®åš SDK éœ€è¦ç”³è¯· App keyï¼Œæå…¶ä¸æ–¹ä¾¿ï¼Œé€šè¿‡ Node.js æ¨¡æ‹Ÿè¯·æ±‚å‘é€å¾®åšã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>æ–°æµªå¾®åš SDK éœ€è¦ç”³è¯· App keyï¼Œæå…¶ä¸æ–¹ä¾¿ï¼Œé€šè¿‡ Node.js æ¨¡æ‹Ÿè¯·æ±‚å‘é€å¾®åšã€‚</p>
<h1 id="weibo-post"><a href="https://github.com/itibbers/weibo-post">weibo-post</a></h1>
<p>Post weibo text from https based on node.</p>
<h2 id="usage">Usage</h2>
<p>Using npm:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">$ npm i --save-dev weibo-post
</span></span></code></pre></div><p>In Node.js:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">weiboPost</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;weibo-post&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">weiboPost</span><span class="p">.</span><span class="nx">setCookie</span><span class="p">(</span><span class="s1">&#39;your weibo login cookie&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">weiboPost</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s1">&#39;your post content&#39;</span><span class="p">)</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Android Broadcast/EventBusä¼˜ç¼ºç‚¹</title>
      <link>https://itibbers.com/posts/broadcast-eventbus%E4%BC%98%E7%BC%BA%E7%82%B9/</link>
      <pubDate>Wed, 24 Jan 2018 16:59:09 +0000</pubDate>
      <guid>https://itibbers.com/posts/broadcast-eventbus%E4%BC%98%E7%BC%BA%E7%82%B9/</guid>
      <description>&lt;p&gt;å…³äº Android ä¸­æœ¬åœ°å¹¿æ’­å’Œ EventBus é€‰æ‹©çš„é—®é¢˜ï¼š
æœ¬åœ°å¹¿æ’­æ˜¯ç›¸å¯¹æ¶ˆè€—æ—¶é—´ã€ç©ºé—´æœ€å¤šçš„ä¸€ç§æ–¹å¼ï¼Œä½†æ˜¯å¤§å®¶éƒ½çŸ¥é“ï¼Œå¹¿æ’­æ˜¯å››å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œè®¸å¤šç³»ç»Ÿçº§çš„äº‹ä»¶éƒ½æ˜¯é€šè¿‡å¹¿æ’­æ¥é€šçŸ¥çš„ï¼Œæ¯”å¦‚è¯´ç½‘ç»œçš„å˜åŒ–ã€ç”µé‡çš„å˜åŒ–ï¼ŒçŸ­ä¿¡å‘é€å’Œæ¥æ”¶çš„çŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä¸ android ç³»ç»Ÿè¿›è¡Œç›¸å…³çš„é€šçŸ¥ï¼Œè¿˜æ˜¯è¦é€‰æ‹©æœ¬åœ°å¹¿æ’­ï¼›åœ¨ BroadcastReceiver çš„ onReceive æ–¹æ³•ä¸­ï¼Œå¯ä»¥è·å¾— Context ã€intent å‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°å¯ä»¥è°ƒç”¨è®¸å¤šçš„ sdk ä¸­çš„æ–¹æ³•ï¼Œè€Œ EventBus è·å¾—è¿™ä¸¤ä¸ªå‚æ•°ç›¸å¯¹æ¯”è¾ƒå›°éš¾ï¼›&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>å…³äº Android ä¸­æœ¬åœ°å¹¿æ’­å’Œ EventBus é€‰æ‹©çš„é—®é¢˜ï¼š
æœ¬åœ°å¹¿æ’­æ˜¯ç›¸å¯¹æ¶ˆè€—æ—¶é—´ã€ç©ºé—´æœ€å¤šçš„ä¸€ç§æ–¹å¼ï¼Œä½†æ˜¯å¤§å®¶éƒ½çŸ¥é“ï¼Œå¹¿æ’­æ˜¯å››å¤§ç»„ä»¶ä¹‹ä¸€ï¼Œè®¸å¤šç³»ç»Ÿçº§çš„äº‹ä»¶éƒ½æ˜¯é€šè¿‡å¹¿æ’­æ¥é€šçŸ¥çš„ï¼Œæ¯”å¦‚è¯´ç½‘ç»œçš„å˜åŒ–ã€ç”µé‡çš„å˜åŒ–ï¼ŒçŸ­ä¿¡å‘é€å’Œæ¥æ”¶çš„çŠ¶æ€ï¼Œæ‰€ä»¥ï¼Œå¦‚æœä¸ android ç³»ç»Ÿè¿›è¡Œç›¸å…³çš„é€šçŸ¥ï¼Œè¿˜æ˜¯è¦é€‰æ‹©æœ¬åœ°å¹¿æ’­ï¼›åœ¨ BroadcastReceiver çš„ onReceive æ–¹æ³•ä¸­ï¼Œå¯ä»¥è·å¾— Context ã€intent å‚æ•°ï¼Œè¿™ä¸¤ä¸ªå‚æ•°å¯ä»¥è°ƒç”¨è®¸å¤šçš„ sdk ä¸­çš„æ–¹æ³•ï¼Œè€Œ EventBus è·å¾—è¿™ä¸¤ä¸ªå‚æ•°ç›¸å¯¹æ¯”è¾ƒå›°éš¾ï¼›</p>
<p>å› æ­¤å¹¿æ’­ç›¸å¯¹äºå…¶ä»–çš„æ–¹å¼è€Œè¨€ï¼Œå¹¿æ’­æ˜¯é‡é‡çº§çš„ï¼Œæ¶ˆè€—èµ„æºè¾ƒå¤šçš„æ–¹å¼ã€‚ä»–çš„ä¼˜åŠ¿ä½“ç°åœ¨ä¸ sdk è¿æ¥ç´§å¯†ï¼Œå¦‚æœéœ€è¦åŒ android äº¤äº’çš„æ—¶å€™ï¼Œå¹¿æ’­çš„ä¾¿æ·æ€§ä¼šæŠµæ¶ˆæ‰å®ƒè¿‡å¤šçš„èµ„æºæ¶ˆè€—ï¼Œä½†æ˜¯å¦‚æœä¸åŒ android äº¤äº’ï¼Œæˆ–è€…è¯´ï¼Œåªåšå¾ˆå°‘çš„äº¤äº’ï¼Œä½¿ç”¨å¹¿æ’­æ˜¯ä¸€ç§æµªè´¹ï¼›</p>
<p>EventBus ä½œä¸º Android å¼€å‘ä¸­å¸¸ç”¨çš„æ¡†æ¶ï¼Œæ‹¥æœ‰ç€è®¸å¤šä¼˜ç‚¹ï¼š</p>
<ol>
<li>è°ƒåº¦çµæ´»ã€‚ä¸ä¾èµ–äº Contextï¼Œä½¿ç”¨æ—¶æ— éœ€åƒå¹¿æ’­ä¸€æ ·å…³æ³¨ Context çš„æ³¨å…¥ä¸ä¼ é€’ã€‚çˆ¶ç±»å¯¹äºé€šçŸ¥çš„ç›‘å¬å’Œå¤„ç†å¯ä»¥ç»§æ‰¿ç»™å­ç±»ï¼Œè¿™å¯¹äºç®€åŒ–ä»£ç è‡³å…³é‡è¦ï¼›é€šçŸ¥çš„ä¼˜å…ˆçº§ï¼Œèƒ½å¤Ÿä¿è¯ Subscriber å…³æ³¨æœ€é‡è¦çš„é€šçŸ¥ï¼›ç²˜æ»äº‹ä»¶ï¼ˆsticky eventsï¼‰èƒ½å¤Ÿä¿è¯é€šçŸ¥ä¸ä¼šå›  Subscriber çš„ä¸åœ¨åœºè€Œå¿½ç•¥ã€‚å¯ç»§æ‰¿ã€ä¼˜å…ˆçº§ã€ç²˜æ»ï¼Œæ˜¯ EventBus æ¯”ä¹‹äºå¹¿æ’­ã€è§‚å¯Ÿè€…ç­‰æ–¹å¼æœ€å¤§çš„ä¼˜ç‚¹ï¼Œå®ƒä»¬ä½¿å¾—åˆ›å»ºç»“æ„è‰¯å¥½ç»„ç»‡ç´§å¯†çš„é€šçŸ¥ç³»ç»Ÿæˆä¸ºå¯èƒ½ã€‚</li>
<li>ä½¿ç”¨ç®€å•ã€‚EventBus çš„ Subscriber æ³¨å†Œéå¸¸ç®€å•ï¼Œè°ƒç”¨ eventBus å¯¹è±¡çš„ register æ–¹æ³•å³å¯ï¼Œå¦‚æœä¸æƒ³åˆ›å»º eventBus è¿˜å¯ä»¥ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³• EventBus.getDefault() è·å–é»˜è®¤å®ä¾‹ï¼ŒSubscriber æ¥æ”¶åˆ°é€šçŸ¥ä¹‹åçš„æ“ä½œæ”¾åœ¨ onEvent æ–¹æ³•é‡Œå°±è¡Œäº†ã€‚æˆä¸º Publisher çš„è¿‡ç¨‹å°±æ›´ç®€å•äº†ï¼Œåªéœ€è¦è°ƒç”¨åˆé€‚çš„ eventBusï¼ˆè‡ªå·±åˆ›å»ºçš„æˆ–æ˜¯é»˜è®¤çš„ï¼‰çš„ post æ–¹æ³•å³å¯ã€‚</li>
<li>å¿«é€Ÿä¸”è½»é‡ã€‚ä½œä¸º github çš„æ˜æ˜Ÿé¡¹ç›®ä¹‹ä¸€ï¼Œ EventBus çš„æºä»£ç ä¸­è®¸å¤šæŠ€å·§æ¥æ”¹å–„æ€§èƒ½ï¼ŒEventBus çš„ç¼ºç‚¹æ˜¯ä»–çš„ä»£ç é€»è¾‘ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œåœ¨ Subscriber æ³¨å†Œçš„æ—¶å€™ï¼ŒSubscriber ä¸­çš„æ–¹æ³•ä¼šè¢«éå†æŸ¥æ‰¾ä»¥ onEvent å¼€å¤´çš„ public æ–¹æ³•ã€‚è¿™å°†å¸¦æ¥ä¸€äº›é—®é¢˜ï¼Œä¸€æ—¦å¯¹ä»£ç è¿›è¡Œæ··æ·†ï¼Œå°±æ— æ³•æŸ¥æ‰¾åˆ°äº†ã€‚å¥½æ¶ˆæ¯æ˜¯ EventBus å·²ç»æ‰“ç®—ä½¿ç”¨æ³¨è§£æ¥å®ç°ï¼Œè¿™åº”è¯¥èƒ½å¤Ÿè§£å†³ä»£ç æ··æ·†çš„é—®é¢˜ã€‚</li>
</ol>
<p>ä½†æœ‰ä¸€ä¸ªç¼ºç‚¹æ˜¯è§‚å¯Ÿè€…ç‹¬æœ‰çš„ï¼Œé‚£å°±æ˜¯è§‚å¯Ÿè€…å¯èƒ½ä¼šé€ æˆæ¥å£çš„è†¨èƒ€ã€‚ç‰¹åˆ«æ˜¯å½“ç¨‹åºè¦æ±‚å¤§é‡å½¢å¼å„å¼‚çš„é€šçŸ¥ï¼Œè€Œç¨‹åºå‘˜æœ‰æ²¡æœ‰åšå‡ºè‰¯å¥½çš„æŠ½è±¡æ—¶ï¼Œä»£ç ä¸­ä¼šåŒ…å«å¤§é‡çš„æ¥å£ï¼Œæ¥å£æ•°é‡çš„å¢é•¿åˆä¼šå¸¦æ¥å‘½åã€æ³¨é‡Šç­‰ç­‰ä¸€å¤§å †é—®é¢˜ã€‚æœ¬è´¨ä¸Šè¯´è§‚å¯Ÿè€…è¦æ±‚ç¨‹åºå‘˜ä»é›¶å¼€å§‹å®ç°äº‹ä»¶çš„äº§ç”Ÿã€åˆ†å‘ä¸å¤„ç†è¿‡ç¨‹ï¼Œè¿™å°±è¦æ±‚å‚ä¸è€…å¿…é¡»å¯¹æ•´ä¸ªé€šçŸ¥è¿‡ç¨‹æœ‰ç€è‰¯å¥½çš„ç†è§£ã€‚å½“ç¨‹åºä»£ç é€‚é‡æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªåˆç†çš„è¦æ±‚ï¼Œç„¶è€Œå½“ç¨‹åºå¤ªå¤§æ—¶ï¼Œè¿™å°†æˆä¸ºä¸€ç§è´Ÿæ‹…ã€‚</p>]]></content:encoded>
    </item>
    <item>
      <title>An invalid form control with name=&#39;xxx&#39; is not focusable.</title>
      <link>https://itibbers.com/posts/an-invalid-form-control-with-name-xxx-is-not-focusable/</link>
      <pubDate>Tue, 22 Nov 2016 13:43:18 +0000</pubDate>
      <guid>https://itibbers.com/posts/an-invalid-form-control-with-name-xxx-is-not-focusable/</guid>
      <description>&lt;p&gt;åœ¨è¡¨å•æäº¤æ—¶ï¼Œå¦‚æœæŸä¸ªæ§ä»¶è¢«è®¾ç½®ä¸º &lt;code&gt;display: none&lt;/code&gt; ä¸”è¯¥å­—æ®µå¯ä»¥ä¸ºç©ºï¼Œåˆ™å¿…é¡»ç§»é™¤ &lt;code&gt;required&lt;/code&gt; å±æ€§ï¼Œå¦åˆ™åœ¨ Chrome æµè§ˆå™¨ä¸­ä¼šå‡ºç°é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;Chrome æµè§ˆå™¨è¦æ±‚å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©ºï¼Œå› æ­¤ä¼šå¼¹å‡º&amp;quot;è¯·åœ¨æ­¤è¾“å…¥&amp;quot;çš„æç¤ºæ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¯¥æ§ä»¶è¢«éšè—ï¼ŒChrome æµè§ˆå™¨åœ¨è¡¨å•æäº¤æ—¶æ— æ³•èšç„¦åˆ°è¯¥æ§ä»¶ï¼Œå› ä¸ºå®ƒæ˜¯ä¸å¯è§çš„ï¼Œä»è€Œå¯¼è‡´è¡¨å•æäº¤å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“é€šè¿‡ JavaScript éšè—æ§ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»åŒæ—¶ç§»é™¤è¯¥æ§ä»¶çš„ &lt;code&gt;required&lt;/code&gt; å±æ€§ã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>åœ¨è¡¨å•æäº¤æ—¶ï¼Œå¦‚æœæŸä¸ªæ§ä»¶è¢«è®¾ç½®ä¸º <code>display: none</code> ä¸”è¯¥å­—æ®µå¯ä»¥ä¸ºç©ºï¼Œåˆ™å¿…é¡»ç§»é™¤ <code>required</code> å±æ€§ï¼Œå¦åˆ™åœ¨ Chrome æµè§ˆå™¨ä¸­ä¼šå‡ºç°é”™è¯¯ã€‚</p>
<p>Chrome æµè§ˆå™¨è¦æ±‚å¿…å¡«å­—æ®µä¸èƒ½ä¸ºç©ºï¼Œå› æ­¤ä¼šå¼¹å‡º&quot;è¯·åœ¨æ­¤è¾“å…¥&quot;çš„æç¤ºæ¶ˆæ¯ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¯¥æ§ä»¶è¢«éšè—ï¼ŒChrome æµè§ˆå™¨åœ¨è¡¨å•æäº¤æ—¶æ— æ³•èšç„¦åˆ°è¯¥æ§ä»¶ï¼Œå› ä¸ºå®ƒæ˜¯ä¸å¯è§çš„ï¼Œä»è€Œå¯¼è‡´è¡¨å•æäº¤å¤±è´¥ã€‚</p>
<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå½“é€šè¿‡ JavaScript éšè—æ§ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»åŒæ—¶ç§»é™¤è¯¥æ§ä»¶çš„ <code>required</code> å±æ€§ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>set autocommit=0ä¸start transactionåŒºåˆ«</title>
      <link>https://itibbers.com/posts/set-autocommit-0%E4%B8%8Estart-transaction%E5%8C%BA%E5%88%AB/</link>
      <pubDate>Thu, 17 Nov 2016 14:32:49 +0000</pubDate>
      <guid>https://itibbers.com/posts/set-autocommit-0%E4%B8%8Estart-transaction%E5%8C%BA%E5%88%AB/</guid>
      <description>&lt;p&gt;set autocommit=0,
å½“å‰ session ç¦ç”¨è‡ªåŠ¨æäº¤äº‹ç‰©ï¼Œè‡ªæ­¤å¥æ‰§è¡Œä»¥åï¼Œæ¯ä¸ª SQL è¯­å¥æˆ–è€…è¯­å¥å—æ‰€åœ¨çš„äº‹åŠ¡éƒ½éœ€è¦æ˜¾ç¤º&amp;quot;commit&amp;quot;æ‰èƒ½æäº¤äº‹åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;start transaction&lt;/p&gt;
&lt;p&gt;æŒ‡çš„æ˜¯å¯åŠ¨ä¸€ä¸ªæ–°äº‹åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼ŒMySQL ä»è‡ªåŠ¨æäº¤ï¼ˆautocommitï¼‰æ¨¡å¼è¿è¡Œï¼Œè¿™ç§æ¨¡å¼ä¼šåœ¨æ¯æ¡è¯­å¥æ‰§è¡Œå®Œæ¯•åæŠŠå®ƒä½œå‡ºçš„ä¿®æ”¹ç«‹åˆ»æäº¤ç»™æ•°æ®åº“å¹¶ä½¿ä¹‹æ°¸ä¹…åŒ–ã€‚äº‹å®ä¸Šï¼Œè¿™ç›¸å½“äºæŠŠæ¯ä¸€æ¡è¯­å¥éƒ½éšå«åœ°å½“åšä¸€ä¸ªäº‹åŠ¡æ¥æ‰§è¡Œã€‚å¦‚æœä½ æƒ³æ˜ç¡®åœ°æ‰§è¡Œäº‹åŠ¡ï¼Œéœ€è¦ç¦ç”¨è‡ªåŠ¨æäº¤æ¨¡å¼å¹¶å‘Šè¯‰ MySQL ä½ æƒ³è®©å®ƒåœ¨ä½•æ—¶æäº¤æˆ–å›æ»šæœ‰å…³çš„ä¿®æ”¹ã€‚
æ‰§è¡Œäº‹åŠ¡çš„å¸¸ç”¨åŠæ³•æ˜¯å‘å‡ºä¸€æ¡ START TRANSACTIONï¼ˆæˆ– BEGINï¼‰è¯­å¥æŒ‚èµ·è‡ªåŠ¨æäº¤æ¨¡å¼ï¼Œç„¶åæ‰§è¡Œæ„æˆæœ¬æ¬¡äº‹åŠ¡çš„å„æ¡è¯­å¥ï¼Œæœ€åç”¨ä¸€æ¡ COMMIT è¯­å¥ç»“æŸäº‹åŠ¡å¹¶æŠŠå®ƒä»¬ä½œå‡ºçš„ä¿®æ”¹æ°¸ä¹…æ€§åœ°è®°å…¥æ•°æ®åº“ã€‚ä¸‡ä¸€åœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œç”¨ä¸€æ¡ ROLLBACK è¯­å¥æ’¤é”€äº‹åŠ¡å¹¶æŠŠæ•°æ®åº“æ¢å¤åˆ°äº‹åŠ¡å¼€ å§‹ä¹‹å‰çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;START TRANSACTION è¯­å¥&amp;quot;æŒ‚èµ·&amp;quot;è‡ªåŠ¨æäº¤æ¨¡å¼çš„å«ä¹‰æ˜¯ï¼šåœ¨äº‹åŠ¡è¢«æäº¤æˆ–å›æ»šä¹‹åï¼Œè¯¥æ¨¡å¼å°†æ¢å¤åˆ°å¼€å§‹æœ¬æ¬¡äº‹åŠ¡çš„ START TRANSACTION è¯­å¥è¢«æ‰§è¡Œä¹‹å‰çš„çŠ¶æ€ã€‚ï¼ˆå¦‚æœè‡ªåŠ¨æäº¤æ¨¡å¼åŸæ¥æ˜¯æ¿€æ´»çš„ï¼Œç»“æŸäº‹åŠ¡å°†è®©ä½ å›åˆ°è‡ªåŠ¨æäº¤æ¨¡å¼ï¼›å¦‚æœå®ƒåŸæ¥æ˜¯ç¦ç”¨çš„ï¼Œç»“æŸ å½“å‰äº‹åŠ¡å°†å¼€å§‹ä¸‹ä¸€ä¸ªäº‹åŠ¡ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;å¦‚æœæ˜¯ autocommit æ¨¡å¼ ï¼Œautocommit çš„å€¼åº”è¯¥ä¸º 1 ï¼Œä¸ autocommit çš„å€¼æ˜¯ 0 ï¼›è¯·åœ¨è¯•éªŒå‰ ç¡®å®š autocommit çš„æ¨¡å¼æ˜¯å¦å¼€å¯&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>set autocommit=0,
å½“å‰ session ç¦ç”¨è‡ªåŠ¨æäº¤äº‹ç‰©ï¼Œè‡ªæ­¤å¥æ‰§è¡Œä»¥åï¼Œæ¯ä¸ª SQL è¯­å¥æˆ–è€…è¯­å¥å—æ‰€åœ¨çš„äº‹åŠ¡éƒ½éœ€è¦æ˜¾ç¤º&quot;commit&quot;æ‰èƒ½æäº¤äº‹åŠ¡ã€‚</p>
<p>start transaction</p>
<p>æŒ‡çš„æ˜¯å¯åŠ¨ä¸€ä¸ªæ–°äº‹åŠ¡ã€‚</p>
<p>åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼ŒMySQL ä»è‡ªåŠ¨æäº¤ï¼ˆautocommitï¼‰æ¨¡å¼è¿è¡Œï¼Œè¿™ç§æ¨¡å¼ä¼šåœ¨æ¯æ¡è¯­å¥æ‰§è¡Œå®Œæ¯•åæŠŠå®ƒä½œå‡ºçš„ä¿®æ”¹ç«‹åˆ»æäº¤ç»™æ•°æ®åº“å¹¶ä½¿ä¹‹æ°¸ä¹…åŒ–ã€‚äº‹å®ä¸Šï¼Œè¿™ç›¸å½“äºæŠŠæ¯ä¸€æ¡è¯­å¥éƒ½éšå«åœ°å½“åšä¸€ä¸ªäº‹åŠ¡æ¥æ‰§è¡Œã€‚å¦‚æœä½ æƒ³æ˜ç¡®åœ°æ‰§è¡Œäº‹åŠ¡ï¼Œéœ€è¦ç¦ç”¨è‡ªåŠ¨æäº¤æ¨¡å¼å¹¶å‘Šè¯‰ MySQL ä½ æƒ³è®©å®ƒåœ¨ä½•æ—¶æäº¤æˆ–å›æ»šæœ‰å…³çš„ä¿®æ”¹ã€‚
æ‰§è¡Œäº‹åŠ¡çš„å¸¸ç”¨åŠæ³•æ˜¯å‘å‡ºä¸€æ¡ START TRANSACTIONï¼ˆæˆ– BEGINï¼‰è¯­å¥æŒ‚èµ·è‡ªåŠ¨æäº¤æ¨¡å¼ï¼Œç„¶åæ‰§è¡Œæ„æˆæœ¬æ¬¡äº‹åŠ¡çš„å„æ¡è¯­å¥ï¼Œæœ€åç”¨ä¸€æ¡ COMMIT è¯­å¥ç»“æŸäº‹åŠ¡å¹¶æŠŠå®ƒä»¬ä½œå‡ºçš„ä¿®æ”¹æ°¸ä¹…æ€§åœ°è®°å…¥æ•°æ®åº“ã€‚ä¸‡ä¸€åœ¨äº‹åŠ¡è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œç”¨ä¸€æ¡ ROLLBACK è¯­å¥æ’¤é”€äº‹åŠ¡å¹¶æŠŠæ•°æ®åº“æ¢å¤åˆ°äº‹åŠ¡å¼€ å§‹ä¹‹å‰çš„çŠ¶æ€ã€‚</p>
<p>START TRANSACTION è¯­å¥&quot;æŒ‚èµ·&quot;è‡ªåŠ¨æäº¤æ¨¡å¼çš„å«ä¹‰æ˜¯ï¼šåœ¨äº‹åŠ¡è¢«æäº¤æˆ–å›æ»šä¹‹åï¼Œè¯¥æ¨¡å¼å°†æ¢å¤åˆ°å¼€å§‹æœ¬æ¬¡äº‹åŠ¡çš„ START TRANSACTION è¯­å¥è¢«æ‰§è¡Œä¹‹å‰çš„çŠ¶æ€ã€‚ï¼ˆå¦‚æœè‡ªåŠ¨æäº¤æ¨¡å¼åŸæ¥æ˜¯æ¿€æ´»çš„ï¼Œç»“æŸäº‹åŠ¡å°†è®©ä½ å›åˆ°è‡ªåŠ¨æäº¤æ¨¡å¼ï¼›å¦‚æœå®ƒåŸæ¥æ˜¯ç¦ç”¨çš„ï¼Œç»“æŸ å½“å‰äº‹åŠ¡å°†å¼€å§‹ä¸‹ä¸€ä¸ªäº‹åŠ¡ã€‚ï¼‰</p>
<p>å¦‚æœæ˜¯ autocommit æ¨¡å¼ ï¼Œautocommit çš„å€¼åº”è¯¥ä¸º 1 ï¼Œä¸ autocommit çš„å€¼æ˜¯ 0 ï¼›è¯·åœ¨è¯•éªŒå‰ ç¡®å®š autocommit çš„æ¨¡å¼æ˜¯å¦å¼€å¯</p>
]]></content:encoded>
    </item>
    <item>
      <title>å¿«é€Ÿå¹‚ å¿«é€Ÿå¹‚å–æ¨¡</title>
      <link>https://itibbers.com/posts/%E5%BF%AB%E9%80%9F%E5%B9%82-%E5%BF%AB%E9%80%9F%E5%B9%82%E5%8F%96%E6%A8%A1/</link>
      <pubDate>Wed, 22 Jun 2016 09:24:34 +0000</pubDate>
      <guid>https://itibbers.com/posts/%E5%BF%AB%E9%80%9F%E5%B9%82-%E5%BF%AB%E9%80%9F%E5%B9%82%E5%8F%96%E6%A8%A1/</guid>
      <description>&lt;h2 id=&#34;å¿«é€Ÿå¹‚&#34;&gt;å¿«é€Ÿå¹‚&lt;/h2&gt;
&lt;p&gt;æ±‚ x^m ä¸€èˆ¬æ–¹æ³•æ˜¯ xm = x * xm-1ï¼Œè¿™æ ·éœ€è¦åš m æ¬¡ä¹˜æ³•ï¼Œæœªå…è¿‡æ…¢ã€‚&lt;/p&gt;
&lt;p&gt;åŠ é€Ÿæ–¹æ³•æœ‰ä¸¤ç§ã€‚&lt;/p&gt;
&lt;p&gt;1.åŸºäºå½“ m ä¸ºå¶æ•°æ—¶ï¼Œ xm = (x2)^(m/2) ï¼›å½“ m ä¸ºå¥‡æ•°æ—¶ï¼Œ xm = x * xm-1ã€‚æ˜¾ç„¶å½“ m ä¸ºå¶æ•°æ—¶ m ä¼šå‡åŠï¼Œå½“ m ä¸ºå¥‡æ•°æ—¶ï¼Œä¸‹æ¬¡å°±æ˜¯å¶æ•°ã€‚m å¯ä»¥å¾ˆå¿«æ”¶æ•›åˆ° 0.ï¼ˆ^è¡¨ç¤ºå¹‚ï¼‰&lt;/p&gt;
&lt;p&gt;2.å°† m çœ‹æˆäºŒè¿›åˆ¶ä¸² mkmk-1&amp;hellip;m1m0ï¼Œé‚£ä¹ˆ xm = xm0&lt;em&gt;2^0 + m1&lt;/em&gt;2^1 + &amp;hellip; + mk&lt;em&gt;2^k = xm0&lt;/em&gt;2^0 * xm1*2^1 _ &amp;hellip; _ xmk*2^k. mi ä¸º 0 æˆ– 1ï¼Œå‡è®¾å¹³å‡æœ‰ä¸€åŠ mi ä¸º 1ï¼Œå³ k ä¸ªï¼Œé‚£ä¹ˆæ€»å…±æ‰åªéœ€è¦åšï¼ˆk+(k/2)ï¼‰æ¬¡ä¹˜æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ç»™å‡ºä»£ç ã€‚ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯åŠ é€Ÿæ–¹æ³• 1ï¼Œç¬¬äºŒä¸ªæ–¹æ³•æ˜¯åŠ é€Ÿæ–¹æ³• 1 çš„è¿­ä»£å½¢å¼ï¼Œç¬¬ä¸‰ä¸ªæ–¹æ³•æ˜¯åŠ é€Ÿæ–¹æ³• 2ã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<h2 id="å¿«é€Ÿå¹‚">å¿«é€Ÿå¹‚</h2>
<p>æ±‚ x^m ä¸€èˆ¬æ–¹æ³•æ˜¯ xm = x * xm-1ï¼Œè¿™æ ·éœ€è¦åš m æ¬¡ä¹˜æ³•ï¼Œæœªå…è¿‡æ…¢ã€‚</p>
<p>åŠ é€Ÿæ–¹æ³•æœ‰ä¸¤ç§ã€‚</p>
<p>1.åŸºäºå½“ m ä¸ºå¶æ•°æ—¶ï¼Œ xm = (x2)^(m/2) ï¼›å½“ m ä¸ºå¥‡æ•°æ—¶ï¼Œ xm = x * xm-1ã€‚æ˜¾ç„¶å½“ m ä¸ºå¶æ•°æ—¶ m ä¼šå‡åŠï¼Œå½“ m ä¸ºå¥‡æ•°æ—¶ï¼Œä¸‹æ¬¡å°±æ˜¯å¶æ•°ã€‚m å¯ä»¥å¾ˆå¿«æ”¶æ•›åˆ° 0.ï¼ˆ^è¡¨ç¤ºå¹‚ï¼‰</p>
<p>2.å°† m çœ‹æˆäºŒè¿›åˆ¶ä¸² mkmk-1&hellip;m1m0ï¼Œé‚£ä¹ˆ xm = xm0<em>2^0 + m1</em>2^1 + &hellip; + mk<em>2^k = xm0</em>2^0 * xm1*2^1 _ &hellip; _ xmk*2^k. mi ä¸º 0 æˆ– 1ï¼Œå‡è®¾å¹³å‡æœ‰ä¸€åŠ mi ä¸º 1ï¼Œå³ k ä¸ªï¼Œé‚£ä¹ˆæ€»å…±æ‰åªéœ€è¦åšï¼ˆk+(k/2)ï¼‰æ¬¡ä¹˜æ³•ã€‚</p>
<p>ä¸‹é¢ç»™å‡ºä»£ç ã€‚ç¬¬ä¸€ä¸ªæ–¹æ³•æ˜¯åŠ é€Ÿæ–¹æ³• 1ï¼Œç¬¬äºŒä¸ªæ–¹æ³•æ˜¯åŠ é€Ÿæ–¹æ³• 1 çš„è¿­ä»£å½¢å¼ï¼Œç¬¬ä¸‰ä¸ªæ–¹æ³•æ˜¯åŠ é€Ÿæ–¹æ³• 2ã€‚</p>
<p>åœ¨ç½‘ä¸Šçœ‹åˆ°æœ‰äººå°† *2 æˆ– /2ï¼Œæ”¹ä¸ºç§»ä½è¿ç®—ï¼Œå°±è¯´æ•ˆç‡æ›´é«˜ã€‚è¿™å…¶å®æ˜¯æ‰¯è°ˆã€‚è¿æˆ‘ä»¬éƒ½çŸ¥é“ç§»ä½è¿ç®—æ•ˆç‡é«˜ï¼Œ*2 å’Œ /2 å°±æ˜¯ä¸€ä¸ªç›¸å½“äºç§»ä½è¿ç®—çš„æ“ä½œï¼Œåšç¼–è¯‘å™¨çš„äººä¼šä¸çŸ¥é“ï¼Ÿå³ä½¿ä½ å†™æˆ *2 æˆ– /2ï¼Œç¼–è¯‘å™¨ä¹Ÿä¼šå¸®ä½ ä¼˜åŒ–ä¸ºç§»ä½è¿ç®—ã€‚ä¸ç›¸ä¿¡çš„åŒå­¦å¯ä»¥ç”¨ C è¯­è¨€æµ‹è¯•ä¸€ä¸‹ï¼Œåªéœ€å°†ä»£ç ç¼–è¯‘æˆæ±‡ç¼–ä»£ç çœ‹çœ‹æ˜¯å¦ä¸€æ ·ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">pow</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">fastExp</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">m</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">0</span><span class="p">)</span><span class="k">return</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">0</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//x^m = (x^2)^(m/2)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">fastExp</span><span class="p">(</span><span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="o">/</span><span class="n">2</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">else</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//x^m = x * x(m-1)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">fastExp</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">m</span><span class="o">-</span><span class="n">1</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">fastExp_iter</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">m</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">while</span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">0</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">0</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">x</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">m</span><span class="w"> </span><span class="o">/=</span><span class="w"> </span><span class="n">2</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">else</span><span class="p">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">m</span><span class="w"> </span><span class="o">--</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">fastExpBin</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">m</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="c1">//x^m = x^(m0 * 2^0) * x^(m1 * 2^1) * x^(m2 * 2^2) * ... * x^(mk * 2^k)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">result</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">while</span><span class="p">(</span><span class="n">m</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">0</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="k">if</span><span class="p">((</span><span class="n">m</span><span class="o">&amp;</span><span class="n">1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">1</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="c1">//m0 = 1</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">                </span><span class="n">result</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="c1">//xå¯¹åº”æ¯ä¸€ä½mi</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">x</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">m</span><span class="w"> </span><span class="o">&gt;&gt;=</span><span class="w"> </span><span class="n">1</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">){</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">++</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">fastExp</span><span class="p">(</span><span class="n">2</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34; &#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">++</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">fastExp_iter</span><span class="p">(</span><span class="n">2</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34; &#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">++</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">print</span><span class="p">(</span><span class="n">fastExpBin</span><span class="p">(</span><span class="n">2</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&#34; &#34;</span><span class="p">);</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">();</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">}</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">}</span><span class="w">
</span></span></span></code></pre></div><h2 id="å¿«é€Ÿå¹‚å–æ¨¡">å¿«é€Ÿå¹‚å–æ¨¡</h2>
<p>ä¸å¿«é€Ÿå¹‚ç±»ä¼¼</p>
<p>åªæ˜¯åœ¨æ¯æ¬¡è¿ç®—çš„æ—¶å€™è¦ä½œ mod m è¿ç®—ï¼Œåˆ©ç”¨çš„æ˜¯æ¨¡è¿ç®—è§„åˆ™ (a _ b) mod m = ((a mod m) _ (b mod m)) mod m.</p>
<p>ç”¨å¿«é€Ÿå¹‚å–æ¨¡çš„æ–¹æ³•æ¯”ç›´æ¥æ±‚å¹‚å†å–æ¨¡çš„æ–¹æ³•è¦å¿«ï¼Œå› ä¸ºå°†ä¹˜æ•°é™åˆ¶åœ¨ä¸€å®šçš„èŒƒå›´ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>ç±» unix ç³»ç»Ÿä¸‹å­—ç¬¦ç¼–ç è½¬æ¢æ–¹æ³•</title>
      <link>https://itibbers.com/posts/nix%E7%B3%BB%E7%BB%9F%E4%B8%8B%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2%E6%96%B9%E6%B3%95/</link>
      <pubDate>Wed, 22 Jun 2016 09:09:40 +0000</pubDate>
      <guid>https://itibbers.com/posts/nix%E7%B3%BB%E7%BB%9F%E4%B8%8B%E5%AD%97%E7%AC%A6%E7%BC%96%E7%A0%81%E8%BD%AC%E6%8D%A2%E6%96%B9%E6%B3%95/</guid>
      <description>&lt;p&gt;ç”¨ windows çš„æ—¶å€™ï¼Œå¦‚æœæŠŠ gbk è½¬æ¢ä¸º utf8ï¼Œæœ‰å‡ ä¸ªæ–¹æ³•ï¼Œä¸€æ˜¯è®°äº‹æœ¬å¦å­˜ä¸ºï¼Œä½†æ˜¯å­˜åœ¨ BOM çš„é—®é¢˜ï¼Œå¦ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡ä¸äº§ç”Ÿ BOM çš„è½¯ä»¶ï¼Œå¦‚ vimï¼Œsublime æ¥ code æˆ–ä¿å­˜ï¼Œå¤ªè¿‡éº»çƒ¦ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¤©æ— æ„ä¸­å‘ç°äº† Mac ç³»ç»Ÿä¸‹ï¼Œæœ‰ä¸ª iconv çš„å‘½ä»¤ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„è½¬æ¢å­—ç¬¦ç¼–ç ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;iconv -f gbk -t utf-8 gbk.cpp &amp;gt; utf8.cpp
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é…åˆç®¡é“è¾“å‡ºï¼Œç®€ç›´ä¸èƒ½æ›´æ–¹ä¾¿ã€‚&lt;/p&gt;
&lt;p&gt;ä¸å…‰ Mac ç³»ç»Ÿæœ‰ï¼Œæ‰€æœ‰ç±» unix ç³»ç»Ÿéƒ½æœ‰è¿™ä¸ªå‘½ä»¤ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NAME
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       iconv - character &lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; conversion
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;SYNOPSIS
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       iconv &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;OPTION...&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;-f encoding&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;-t encoding&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;inputfile ...&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;       iconv -l
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
      <content:encoded><![CDATA[<p>ç”¨ windows çš„æ—¶å€™ï¼Œå¦‚æœæŠŠ gbk è½¬æ¢ä¸º utf8ï¼Œæœ‰å‡ ä¸ªæ–¹æ³•ï¼Œä¸€æ˜¯è®°äº‹æœ¬å¦å­˜ä¸ºï¼Œä½†æ˜¯å­˜åœ¨ BOM çš„é—®é¢˜ï¼Œå¦ä¸€ç§æ–¹æ³•æ˜¯é€šè¿‡ä¸äº§ç”Ÿ BOM çš„è½¯ä»¶ï¼Œå¦‚ vimï¼Œsublime æ¥ code æˆ–ä¿å­˜ï¼Œå¤ªè¿‡éº»çƒ¦ã€‚</p>
<p>ä»Šå¤©æ— æ„ä¸­å‘ç°äº† Mac ç³»ç»Ÿä¸‹ï¼Œæœ‰ä¸ª iconv çš„å‘½ä»¤ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿çš„è½¬æ¢å­—ç¬¦ç¼–ç ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">iconv -f gbk -t utf-8 gbk.cpp &gt; utf8.cpp
</span></span></code></pre></div><p>é…åˆç®¡é“è¾“å‡ºï¼Œç®€ç›´ä¸èƒ½æ›´æ–¹ä¾¿ã€‚</p>
<p>ä¸å…‰ Mac ç³»ç»Ÿæœ‰ï¼Œæ‰€æœ‰ç±» unix ç³»ç»Ÿéƒ½æœ‰è¿™ä¸ªå‘½ä»¤ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">NAME
</span></span><span class="line"><span class="cl">       iconv - character <span class="nb">set</span> conversion
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">SYNOPSIS
</span></span><span class="line"><span class="cl">       iconv <span class="o">[</span>OPTION...<span class="o">]</span> <span class="o">[</span>-f encoding<span class="o">]</span> <span class="o">[</span>-t encoding<span class="o">]</span> <span class="o">[</span>inputfile ...<span class="o">]</span>
</span></span><span class="line"><span class="cl">       iconv -l
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Go-PholcusæŠ“äººæ°‘ç½‘æ–°é—»è§„åˆ™</title>
      <link>https://itibbers.com/posts/go-pholcus%E7%88%AC%E8%99%AB%E8%A7%84%E5%88%99/</link>
      <pubDate>Thu, 21 Apr 2016 11:44:03 +0000</pubDate>
      <guid>https://itibbers.com/posts/go-pholcus%E7%88%AC%E8%99%AB%E8%A7%84%E5%88%99/</guid>
      <description>&lt;p&gt;Go è¯­è¨€ä¸‹æœ‰ä¸ªçˆ¬è™«è½¯ä»¶ pholcusï¼Œå†™äº†ä¸ªçˆ¬è™«çš„è§„åˆ™ï¼ŒæŠ“çš„æ˜¯äººæ°‘ç½‘çš„æœ€æ–°æ–°é—»å’Œ IJGUC æ‰€æœ‰æœŸåˆŠã€‚
pholcus å¼€æºè½¯ä»¶åšçš„è¿˜æ˜¯æŒºæ£’çš„ï¼Œä½†æ˜¯è§‰å¾— go è¯­è¨€ä¸å¤ªå¥½ç©ã€‚
è§„åˆ™æ”¾åˆ°äº†&lt;a href=&#34;https://github.com/itibbers/pholcus-spider-lib&#34;&gt;Github&lt;/a&gt;&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>Go è¯­è¨€ä¸‹æœ‰ä¸ªçˆ¬è™«è½¯ä»¶ pholcusï¼Œå†™äº†ä¸ªçˆ¬è™«çš„è§„åˆ™ï¼ŒæŠ“çš„æ˜¯äººæ°‘ç½‘çš„æœ€æ–°æ–°é—»å’Œ IJGUC æ‰€æœ‰æœŸåˆŠã€‚
pholcus å¼€æºè½¯ä»¶åšçš„è¿˜æ˜¯æŒºæ£’çš„ï¼Œä½†æ˜¯è§‰å¾— go è¯­è¨€ä¸å¤ªå¥½ç©ã€‚
è§„åˆ™æ”¾åˆ°äº†<a href="https://github.com/itibbers/pholcus-spider-lib">Github</a></p>
<h3 id="äººæ°‘ç½‘æ–°é—»">äººæ°‘ç½‘æ–°é—»</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">spider_lib</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// åŸºç¡€åŒ…</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;log&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;github.com/PuerkitoBio/goquery&#34;                        //DOMè§£æ</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/henrylee2cn/pholcus/app/downloader/request&#34;</span> <span class="c1">//å¿…éœ€</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;github.com/henrylee2cn/pholcus/logs&#34;               //ä¿¡æ¯è¾“å‡º</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span> <span class="s">&#34;github.com/henrylee2cn/pholcus/app/spider&#34;</span> <span class="c1">//å¿…éœ€</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// . &#34;github.com/henrylee2cn/pholcus/app/spider/common&#34; //é€‰ç”¨</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// netåŒ…</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;net/http&#34; //è®¾ç½®http.Header</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;net/url&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ç¼–ç åŒ…</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;encoding/xml&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å­—ç¬¦ä¸²å¤„ç†åŒ…</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;regexp&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;strconv&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;strings&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// å…¶ä»–åŒ…</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;math&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;time&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">People</span><span class="p">.</span><span class="nf">Register</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Item</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Id</span>       <span class="kt">string</span> <span class="s">`json:&#34;id&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Title</span>    <span class="kt">string</span> <span class="s">`json:&#34;title&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Url</span>      <span class="kt">string</span> <span class="s">`json:&#34;url&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Date</span>     <span class="kt">string</span> <span class="s">`json:&#34;date&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">NodeId</span>   <span class="kt">string</span> <span class="s">`json:&#34;nodeId&#34;`</span>
</span></span><span class="line"><span class="cl">    <span class="nx">ImgCount</span> <span class="kt">string</span> <span class="s">`json:&#34;imgCount&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">News</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Items</span> <span class="p">[]</span><span class="nx">Item</span> <span class="s">`json:&#34;items&#34;`</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">news</span> <span class="nx">News</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">People</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">Spider</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span><span class="p">:</span>        <span class="s">&#34;äººæ°‘ç½‘æ–°é—»æŠ“å–&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Description</span><span class="p">:</span> <span class="s">&#34;äººæ°‘ç½‘æœ€æ–°åˆ†ç±»æ–°é—»&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Pausetime:    300,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Keyin:        KEYIN,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Limit:        LIMIT,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">EnableCookie</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">RuleTree</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">RuleTree</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Root</span><span class="p">:</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">ctx</span><span class="p">.</span><span class="nf">AddQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">request</span><span class="p">.</span><span class="nx">Request</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Method</span><span class="p">:</span> <span class="s">&#34;GET&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Url</span><span class="p">:</span>    <span class="s">&#34;http://news.people.com.cn/210801/211150/index.js?cache=false&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Rule</span><span class="p">:</span>   <span class="s">&#34;æ–°é—»åˆ—è¡¨&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">Trunk</span><span class="p">:</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">Rule</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;æ–°é—»åˆ—è¡¨&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">ParseFunc</span><span class="p">:</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1">//query := ctx.GetDom()</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//str := query.Find(&#34;body&#34;).Text()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1">//str := `{&#34;items&#34;:[{&#34;id&#34;:&#34;282&#34;,&#34;title&#34;:&#34;äººç¤¾&amp;nbsp;è½¬å‹å‡çº§&amp;quot;æˆ˜æœ¯&amp;quot;æ‰‹å†Œ&#34;,&#34;url&#34;:&#34;ht&#34;,&#34;date&#34;:&#34;201&#34;,&#34;nodeId&#34;:&#34;1001&#34;,&#34;imgCount&#34;:&#34;4&#34;}]}`</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="nx">str</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nf">GetText</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nf">Unmarshal</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">str</span><span class="p">),</span> <span class="o">&amp;</span><span class="nx">news</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">log</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;è§£æé”™è¯¯ï¼š %v\n&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="k">return</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">/////////////////</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">newsLength</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="nx">news</span><span class="p">.</span><span class="nx">Items</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="p">&lt;</span> <span class="nx">newsLength</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">ctx</span><span class="p">.</span><span class="nf">AddQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">request</span><span class="p">.</span><span class="nx">Request</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">Url</span><span class="p">:</span>  <span class="nx">news</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Url</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">Rule</span><span class="p">:</span> <span class="s">&#34;çƒ­ç‚¹æ–°é—»&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">Temp</span><span class="p">:</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}{</span>
</span></span><span class="line"><span class="cl">                                <span class="s">&#34;id&#34;</span><span class="p">:</span>       <span class="nx">news</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="s">&#34;title&#34;</span><span class="p">:</span>    <span class="nx">news</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="s">&#34;date&#34;</span><span class="p">:</span>     <span class="nx">news</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">Date</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                                <span class="s">&#34;newsType&#34;</span><span class="p">:</span> <span class="nx">news</span><span class="p">.</span><span class="nx">Items</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">NodeId</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                            <span class="p">},</span>
</span></span><span class="line"><span class="cl">                        <span class="p">})</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">/////////////////</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="s">&#34;çƒ­ç‚¹æ–°é—»&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//æ³¨æ„ï¼šæœ‰æ— å­—æ®µè¯­ä¹‰å’Œæ˜¯å¦è¾“å‡ºæ•°æ®å¿…é¡»ä¿æŒä¸€è‡´</span>
</span></span><span class="line"><span class="cl">                <span class="nx">ItemFields</span><span class="p">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;ID&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;æ ‡é¢˜&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;å†…å®¹&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;ç±»åˆ«&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;ReleaseTime&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">ParseFunc</span><span class="p">:</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">query</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nf">GetDom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1">// è·å–å†…å®¹</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">content</span> <span class="o">:=</span> <span class="nx">query</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="s">&#34;#p_content&#34;</span><span class="p">).</span><span class="nf">Text</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// re, _ := regexp.Compile(&#34;\\&lt;[\\S\\s]+?\\&gt;&#34;)</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// content = re.ReplaceAllStringFunc(content, strings.ToLower)</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// content = re.ReplaceAllString(content, &#34;&#34;)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1">// ç»“æœå­˜å…¥Responseä¸­è½¬</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">ctx</span><span class="p">.</span><span class="nf">Output</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}{</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">0</span><span class="p">:</span> <span class="nx">ctx</span><span class="p">.</span><span class="nf">GetTemp</span><span class="p">(</span><span class="s">&#34;id&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">1</span><span class="p">:</span> <span class="nx">ctx</span><span class="p">.</span><span class="nf">GetTemp</span><span class="p">(</span><span class="s">&#34;title&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">2</span><span class="p">:</span> <span class="nx">content</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">3</span><span class="p">:</span> <span class="nx">ctx</span><span class="p">.</span><span class="nf">GetTemp</span><span class="p">(</span><span class="s">&#34;newsType&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">4</span><span class="p">:</span> <span class="nx">ctx</span><span class="p">.</span><span class="nf">GetTemp</span><span class="p">(</span><span class="s">&#34;date&#34;</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="ijguc-æœŸåˆŠ">IJGUC æœŸåˆŠ</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kn">package</span> <span class="nx">spider_lib</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// åŸºç¡€åŒ…</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;log&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/PuerkitoBio/goquery&#34;</span>                        <span class="c1">//DOMè§£æ</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;github.com/henrylee2cn/pholcus/app/downloader/request&#34;</span> <span class="c1">//å¿…éœ€</span>
</span></span><span class="line"><span class="cl">    <span class="p">.</span> <span class="s">&#34;github.com/henrylee2cn/pholcus/app/spider&#34;</span>           <span class="c1">//å¿…éœ€</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;github.com/henrylee2cn/pholcus/logs&#34;         //ä¿¡æ¯è¾“å‡º</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// . &#34;github.com/henrylee2cn/pholcus/app/spider/common&#34; //é€‰ç”¨</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// netåŒ…</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;net/http&#34; //è®¾ç½®http.Header</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;net/url&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// ç¼–ç åŒ…</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;encoding/xml&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;encoding/json&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å­—ç¬¦ä¸²å¤„ç†åŒ…</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;regexp&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="s">&#34;strconv&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;strings&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// å…¶ä»–åŒ…</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;fmt&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;math&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// &#34;time&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">IJGUC</span><span class="p">.</span><span class="nf">Register</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">IJGUC</span> <span class="p">=</span> <span class="o">&amp;</span><span class="nx">Spider</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span><span class="p">:</span>        <span class="s">&#34;IJGUCæœŸåˆŠ&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Description</span><span class="p">:</span> <span class="s">&#34;IJGUCæœŸåˆŠ&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Pausetime:    300,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Keyin:        KEYIN,</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// Limit:        LIMIT,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">EnableCookie</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">RuleTree</span><span class="p">:</span> <span class="o">&amp;</span><span class="nx">RuleTree</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">Root</span><span class="p">:</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nx">ctx</span><span class="p">.</span><span class="nf">AddQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">request</span><span class="p">.</span><span class="nx">Request</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Url</span><span class="p">:</span>  <span class="s">&#34;http://www.inderscience.com/info/inarticletoc.php?jcode=ijguc&amp;year=2016&amp;vol=7&amp;issue=1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Rule</span><span class="p">:</span> <span class="s">&#34;æœŸåˆŠåˆ—è¡¨&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="nx">Trunk</span><span class="p">:</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="o">*</span><span class="nx">Rule</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;æœŸåˆŠåˆ—è¡¨&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">ParseFunc</span><span class="p">:</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">query</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nf">GetDom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                    <span class="k">for</span> <span class="nx">i</span> <span class="o">:=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="mi">7</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">id</span> <span class="o">:=</span> <span class="s">&#34;#eventbody&#34;</span> <span class="o">+</span> <span class="nx">strconv</span><span class="p">.</span><span class="nf">Itoa</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#34; a&#34;</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">query</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="nx">id</span><span class="p">).</span><span class="nf">Each</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">j</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">s</span> <span class="o">*</span><span class="nx">goquery</span><span class="p">.</span><span class="nx">Selection</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="k">if</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">s</span><span class="p">.</span><span class="nf">Attr</span><span class="p">(</span><span class="s">&#34;href&#34;</span><span class="p">);</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                <span class="c1">// log.Print(url)</span>
</span></span><span class="line"><span class="cl">                                <span class="nx">ctx</span><span class="p">.</span><span class="nf">AddQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">request</span><span class="p">.</span><span class="nx">Request</span><span class="p">{</span><span class="nx">Url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">Rule</span><span class="p">:</span> <span class="s">&#34;æ–‡ç« åˆ—è¡¨&#34;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                        <span class="p">})</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;æ–‡ç« åˆ—è¡¨&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="nx">ParseFunc</span><span class="p">:</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">query</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nf">GetDom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">//#journalcol1 article table tbody tr td:eq(1) table:eq(1) a</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">query</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="s">&#34;#journalcol1 article table tbody tr td&#34;</span><span class="p">).</span><span class="nf">Each</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">i</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">td</span> <span class="o">*</span><span class="nx">goquery</span><span class="p">.</span><span class="nx">Selection</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="nx">i</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                            <span class="nx">td</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="s">&#34;table&#34;</span><span class="p">).</span><span class="nf">Each</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">j</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">table</span> <span class="o">*</span><span class="nx">goquery</span><span class="p">.</span><span class="nx">Selection</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                <span class="k">if</span> <span class="nx">j</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                    <span class="nx">table</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="s">&#34;a&#34;</span><span class="p">).</span><span class="nf">Each</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">k</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">a</span> <span class="o">*</span><span class="nx">goquery</span><span class="p">.</span><span class="nx">Selection</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                        <span class="k">if</span> <span class="nx">k</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                            <span class="k">if</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">ok</span> <span class="o">:=</span> <span class="nx">a</span><span class="p">.</span><span class="nf">Attr</span><span class="p">(</span><span class="s">&#34;href&#34;</span><span class="p">);</span> <span class="nx">ok</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                                                <span class="c1">// log.Print(url)</span>
</span></span><span class="line"><span class="cl">                                                <span class="nx">ctx</span><span class="p">.</span><span class="nf">AddQueue</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">request</span><span class="p">.</span><span class="nx">Request</span><span class="p">{</span><span class="nx">Url</span><span class="p">:</span> <span class="nx">url</span><span class="p">,</span> <span class="nx">Rule</span><span class="p">:</span> <span class="s">&#34;æ–‡ç« é¡µ&#34;</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">                                            <span class="p">}</span>
</span></span><span class="line"><span class="cl">                                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                                <span class="p">}</span>
</span></span><span class="line"><span class="cl">                            <span class="p">})</span>
</span></span><span class="line"><span class="cl">                        <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="s">&#34;æ–‡ç« é¡µ&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="c1">//æ³¨æ„ï¼šæœ‰æ— å­—æ®µè¯­ä¹‰å’Œæ˜¯å¦è¾“å‡ºæ•°æ®å¿…é¡»ä¿æŒä¸€è‡´</span>
</span></span><span class="line"><span class="cl">                <span class="nx">ItemFields</span><span class="p">:</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;Title&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;Author&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;Addresses&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;Journal&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;Abstract&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;Keywords&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s">&#34;DOI&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="nx">ParseFunc</span><span class="p">:</span> <span class="kd">func</span><span class="p">(</span><span class="nx">ctx</span> <span class="o">*</span><span class="nx">Context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">query</span> <span class="o">:=</span> <span class="nx">ctx</span><span class="p">.</span><span class="nf">GetDom</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// è·å–å†…å®¹</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">content</span> <span class="o">:=</span> <span class="nx">query</span><span class="p">.</span><span class="nf">Find</span><span class="p">(</span><span class="s">&#34;#col1&#34;</span><span class="p">).</span><span class="nf">Text</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1">// è¿‡æ»¤æ ‡ç­¾</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="o">:=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;\\&lt;[\\S\\s]+?\\&gt;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">content</span> <span class="p">=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">ReplaceAllString</span><span class="p">(</span><span class="nx">content</span><span class="p">,</span> <span class="s">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1">// Title</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;Title:(.*?)Author:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">title</span> <span class="o">:=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">FindStringSubmatch</span><span class="p">(</span><span class="nx">content</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// Author</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;Author:(.*?)Addresses:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">au</span> <span class="o">:=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">FindStringSubmatch</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="kd">var</span> <span class="nx">author</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">au</span><span class="p">)</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">author</span> <span class="p">=</span> <span class="nx">au</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;Author:(.*?)Address:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">author</span> <span class="p">=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">FindStringSubmatch</span><span class="p">(</span><span class="nx">content</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// Addresses &amp; Address</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;Addresses:(.*?)Journal:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">address</span> <span class="o">:=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">FindStringSubmatch</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="kd">var</span> <span class="nx">addresses</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">address</span><span class="p">)</span> <span class="p">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">addresses</span> <span class="p">=</span> <span class="nx">address</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;Address:(.*?)Journal:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="nx">addresses</span> <span class="p">=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">FindStringSubmatch</span><span class="p">(</span><span class="nx">content</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="p">}</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// Journal</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;Journal:(.*?)Abstract:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">journal</span> <span class="o">:=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">FindStringSubmatch</span><span class="p">(</span><span class="nx">content</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// Abstract</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;Abstract:(.*?)Keywords:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">abstract</span> <span class="o">:=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">FindStringSubmatch</span><span class="p">(</span><span class="nx">content</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// Keywords</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;Keywords:(.*?)DOI:&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">keywords</span> <span class="o">:=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">FindStringSubmatch</span><span class="p">(</span><span class="nx">content</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                    <span class="c1">// DOI</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">re</span><span class="p">,</span> <span class="nx">_</span> <span class="p">=</span> <span class="nx">regexp</span><span class="p">.</span><span class="nf">Compile</span><span class="p">(</span><span class="s">&#34;DOI: &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">doiIndex</span> <span class="o">:=</span> <span class="nx">re</span><span class="p">.</span><span class="nf">FindStringSubmatchIndex</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">rs</span> <span class="o">:=</span> <span class="p">[]</span><span class="nb">rune</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">left</span> <span class="o">:=</span> <span class="nx">doiIndex</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">8</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">right</span> <span class="o">:=</span> <span class="nx">left</span> <span class="o">+</span> <span class="mi">43</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">doi</span> <span class="o">:=</span> <span class="nb">string</span><span class="p">(</span><span class="nx">rs</span><span class="p">[</span><span class="nx">left</span><span class="p">:</span><span class="nx">right</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                    <span class="c1">// ç»“æœå­˜å…¥Responseä¸­è½¬</span>
</span></span><span class="line"><span class="cl">                    <span class="nx">ctx</span><span class="p">.</span><span class="nf">Output</span><span class="p">(</span><span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="kd">interface</span><span class="p">{}{</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">0</span><span class="p">:</span> <span class="nx">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">1</span><span class="p">:</span> <span class="nx">author</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">2</span><span class="p">:</span> <span class="nx">addresses</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">3</span><span class="p">:</span> <span class="nx">journal</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">4</span><span class="p">:</span> <span class="nx">abstract</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">5</span><span class="p">:</span> <span class="nx">keywords</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                        <span class="mi">6</span><span class="p">:</span> <span class="nx">doi</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="p">})</span>
</span></span><span class="line"><span class="cl">                <span class="p">},</span>
</span></span><span class="line"><span class="cl">            <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>Composerå®‰è£…æ—¶openssl missing</title>
      <link>https://itibbers.com/posts/composer%E5%AE%89%E8%A3%85%E6%97%B6openssl-missing/</link>
      <pubDate>Tue, 15 Mar 2016 15:26:19 +0000</pubDate>
      <guid>https://itibbers.com/posts/composer%E5%AE%89%E8%A3%85%E6%97%B6openssl-missing/</guid>
      <description>&lt;p&gt;é—®é¢˜æè¿°ï¼šâ€œThe openssl extension is missing, which means that secure HTTPS transfers are impossible.â€&lt;/p&gt;
&lt;p&gt;ç¡®ä¿ php.ini ä¸­ extension=php_openssl.dll æ‰“å¼€ã€‚&lt;/p&gt;
&lt;p&gt;php.ini æ–‡ä»¶åœ¨ apache å’Œ php ç›®å½•ä¸‹éƒ½æœ‰ï¼Œå»ºè®®éƒ½æ‰“å¼€ã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p>é—®é¢˜æè¿°ï¼šâ€œThe openssl extension is missing, which means that secure HTTPS transfers are impossible.â€</p>
<p>ç¡®ä¿ php.ini ä¸­ extension=php_openssl.dll æ‰“å¼€ã€‚</p>
<p>php.ini æ–‡ä»¶åœ¨ apache å’Œ php ç›®å½•ä¸‹éƒ½æœ‰ï¼Œå»ºè®®éƒ½æ‰“å¼€ã€‚</p>
]]></content:encoded>
    </item>
    <item>
      <title>python - RuntimeError: maximum recursion depth exceeded</title>
      <link>https://itibbers.com/posts/python-runtimeerror-maximum-recursion-depth-exceeded/</link>
      <pubDate>Sun, 27 Sep 2015 21:55:42 +0000</pubDate>
      <guid>https://itibbers.com/posts/python-runtimeerror-maximum-recursion-depth-exceeded/</guid>
      <description>&lt;p&gt;ç”¨ Python å†™äº†ä¸€ä¸ªçˆ¬è™«è„šæœ¬ï¼Œåœ¨æŠ“å–é¡µé¢é‡‡ç”¨å¹¿åº¦ä¼˜å…ˆéå†æŠ“å–ã€‚ä½†æ˜¯å½“éå†åˆ° 900 å¤šæ—¶å°±ä¼šå‡ºç°è«åå…¶å¦™çš„é”™è¯¯ï¼Œé€šè¿‡ pdb è°ƒè¯•å‘ç°æ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;RuntimeError: maximum recursion depth exceeded&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ç½‘ä¸ŠæŸ¥äº†ï¼Œå‘ç° python é»˜è®¤çš„é€’å½’æ·±åº¦æ˜¯å¾ˆæœ‰é™çš„ï¼Œå¤§æ¦‚æ˜¯ 900 å¤šçš„æ ·å­ï¼Œå½“é€’å½’æ·±åº¦è¶…è¿‡è¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œå°±ä¼šå¼•å‘è¿™æ ·çš„ä¸€ä¸ªå¼‚å¸¸ã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³çš„æ–¹å¼æ˜¯æ‰‹å·¥è®¾ç½®é€’å½’è°ƒç”¨æ·±åº¦ï¼Œæ–¹å¼ä¸º&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-python&#34; data-lang=&#34;python&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kn&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;nn&#34;&gt;sys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;sys&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;setrecursionlimit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;# ä¾‹å¦‚è¿™é‡Œè®¾ç½®ä¸ºä¸€ç™¾ä¸‡&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
      <content:encoded><![CDATA[<p>ç”¨ Python å†™äº†ä¸€ä¸ªçˆ¬è™«è„šæœ¬ï¼Œåœ¨æŠ“å–é¡µé¢é‡‡ç”¨å¹¿åº¦ä¼˜å…ˆéå†æŠ“å–ã€‚ä½†æ˜¯å½“éå†åˆ° 900 å¤šæ—¶å°±ä¼šå‡ºç°è«åå…¶å¦™çš„é”™è¯¯ï¼Œé€šè¿‡ pdb è°ƒè¯•å‘ç°æ˜¯ï¼š</p>
<p><code>RuntimeError: maximum recursion depth exceeded</code></p>
<p>åœ¨ç½‘ä¸ŠæŸ¥äº†ï¼Œå‘ç° python é»˜è®¤çš„é€’å½’æ·±åº¦æ˜¯å¾ˆæœ‰é™çš„ï¼Œå¤§æ¦‚æ˜¯ 900 å¤šçš„æ ·å­ï¼Œå½“é€’å½’æ·±åº¦è¶…è¿‡è¿™ä¸ªå€¼çš„æ—¶å€™ï¼Œå°±ä¼šå¼•å‘è¿™æ ·çš„ä¸€ä¸ªå¼‚å¸¸ã€‚</p>
<p>è§£å†³çš„æ–¹å¼æ˜¯æ‰‹å·¥è®¾ç½®é€’å½’è°ƒç”¨æ·±åº¦ï¼Œæ–¹å¼ä¸º</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">sys</span>
</span></span><span class="line"><span class="cl"><span class="n">sys</span><span class="o">.</span><span class="n">setrecursionlimit</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span> <span class="c1"># ä¾‹å¦‚è¿™é‡Œè®¾ç½®ä¸ºä¸€ç™¾ä¸‡</span>
</span></span></code></pre></div>]]></content:encoded>
    </item>
    <item>
      <title>65279</title>
      <link>https://itibbers.com/posts/65279/</link>
      <pubDate>Thu, 13 Aug 2015 10:44:00 +0000</pubDate>
      <guid>https://itibbers.com/posts/65279/</guid>
      <description>&lt;p&gt;&lt;img alt=&#34;65279&#34; loading=&#34;lazy&#34; src=&#34;https://itibbers.com/images/65279.png&#34;&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ åœ¨ä¿®æ”¹æ–‡ä»¶åï¼Œå‘ç°ç½‘é¡µä¸Šå¤šäº†ä¸€ä¸ªç©ºè¡Œï¼Œä¸ç®¡æ€ä¹ˆä¿®æ”¹&lt;code&gt;margin&lt;/code&gt;,&lt;code&gt;padding&lt;/code&gt;éƒ½æ— æ³•æ¶ˆé™¤ï¼Œä½†æ˜¯å®¡æŸ¥å…ƒç´ çš„æ—¶å€™ï¼Œå‘ç°å¤šå‡ºä¸€è¡Œ&lt;code&gt;&amp;quot;&amp;amp;#65279&amp;quot;&lt;/code&gt;ã€‚&lt;/p&gt;</description>
      <content:encoded><![CDATA[<p><img alt="65279" loading="lazy" src="/images/65279.png"></p>
<p>å¦‚æœä½ åœ¨ä¿®æ”¹æ–‡ä»¶åï¼Œå‘ç°ç½‘é¡µä¸Šå¤šäº†ä¸€ä¸ªç©ºè¡Œï¼Œä¸ç®¡æ€ä¹ˆä¿®æ”¹<code>margin</code>,<code>padding</code>éƒ½æ— æ³•æ¶ˆé™¤ï¼Œä½†æ˜¯å®¡æŸ¥å…ƒç´ çš„æ—¶å€™ï¼Œå‘ç°å¤šå‡ºä¸€è¡Œ<code>&quot;&amp;#65279&quot;</code>ã€‚</p>
<p>æ³¨ï¼šIE ä¸‹æ˜¯æ— æ³•çœ‹åˆ°<code>65279</code>å­—æ ·çš„ï¼ŒFirebug å’Œ Chrome æ‰å¯ä»¥çœ‹åˆ°ã€‚</p>
<p>è¿™æ˜¯ç”±äºæ–‡ä»¶ä¿å­˜çš„æ—¶å€™ï¼Œåœ¨å‰é¢åŠ å…¥äº† BOM å­—ç¬¦ã€‚
UTF-8 ä¸éœ€è¦ BOM æ¥è¡¨æ˜å­—èŠ‚é¡ºåºï¼Œä½†å¯ä»¥ç”¨ BOM æ¥è¡¨æ˜ç¼–ç æ–¹å¼ã€‚å­—ç¬¦<code>ZERO WIDTH NO-BREAK SPACE</code>çš„ç¼–ç æ˜¯<code>EF BB BF</code>ï¼Œå¦‚æœæ¥å—è€…æ”¶åˆ°äº†ä¸‰ä¸ªä¸å¯è§çš„å­—ç¬¦ï¼ˆ0xEF 0xBB 0xBFï¼Œå³ BOMï¼‰å¼€å¤´çš„å­—èŠ‚æµï¼Œå°±çŸ¥é“è¿™æ˜¯ UTF-8 ç¼–ç äº†ã€‚</p>
<p>WINDOWS å°±æ˜¯ç”¨ BOM æ¥æ ‡è®°æ–‡æœ¬æ–‡ä»¶çš„ç¼–ç æ–¹å¼çš„ã€‚</p>
<p>ç°åœ¨å‡ ä¹æ‰€æœ‰çš„æ–‡æœ¬ç¼–è¾‘è½¯ä»¶éƒ½å¯ä»¥æ˜¾ç¤ºå¹¶ç¼–è¾‘ UTF-8 ç¼–ç çš„æ–‡ä»¶ã€‚ä½†æ˜¯å¾ˆé—æ†¾ï¼Œå…¶ä¸­å¾ˆå¤šè½¯ä»¶çš„è¡¨ç°å¹¶ä¸ç†æƒ³ã€‚</p>
<p>å¯¹äºä¸€èˆ¬çš„æ–‡ä»¶ï¼Œè¿™æ ·å¹¶ä¸ä¼šäº§ç”Ÿä»€ä¹ˆéº»çƒ¦ã€‚ä½†å¯¹äº PHP æ¥è¯´ï¼ŒBOM æ˜¯ä¸ªå¤§éº»çƒ¦ã€‚</p>
<p>PHP å¹¶ä¸ä¼šå¿½ç•¥ BOMï¼Œæ‰€ä»¥åœ¨è¯»å–ã€åŒ…å«æˆ–è€…å¼•ç”¨è¿™äº›æ–‡ä»¶æ—¶ï¼Œä¼šæŠŠ BOM ä½œä¸ºè¯¥æ–‡ä»¶å¼€å¤´æ­£æ–‡çš„ä¸€éƒ¨åˆ†ã€‚æ ¹æ®åµŒå…¥å¼è¯­è¨€çš„ç‰¹ç‚¹ï¼Œè¿™ä¸²å­—ç¬¦å°†è¢«ç›´æ¥æ‰§è¡Œï¼ˆæ˜¾ç¤ºï¼‰å‡ºæ¥ã€‚ç”±æ­¤é€ æˆå³ä½¿é¡µé¢çš„<code>padding-top</code>è®¾ç½®ä¸º 0ï¼Œä¹Ÿæ— æ³•è®©æ•´ä¸ªç½‘é¡µç´§è´´æµè§ˆå™¨é¡¶éƒ¨ï¼Œå› ä¸ºåœ¨ html ä¸€å¼€å¤´æœ‰è¿™ 3 ä¸ªå­—ç¬¦å‘¢ï¼</p>
<p>æœ€å¤§çš„éº»çƒ¦è¿˜ä¸æ˜¯è¿™ä¸ªã€‚å— COOKIE é€å‡ºæœºåˆ¶çš„é™åˆ¶ï¼Œåœ¨è¿™äº›æ–‡ä»¶å¼€å¤´å·²ç»æœ‰ BOM çš„æ–‡ä»¶ä¸­ï¼ŒCOOKIE æ— æ³•é€å‡ºï¼ˆå› ä¸ºåœ¨ COOKIE é€å‡ºå‰ PHP å·²ç»é€å‡ºäº†æ–‡ä»¶å¤´ï¼‰ï¼Œæ‰€ä»¥ç™»å…¥å’Œç™»å‡ºåŠŸèƒ½å¤±æ•ˆã€‚ä¸€åˆ‡ä¾èµ– COOKIEã€SESSION å®ç°çš„åŠŸèƒ½å…¨éƒ¨æ— æ•ˆã€‚
å› æ­¤ï¼Œåœ¨ç¼–è¾‘ã€æ›´æ”¹ä»»ä½•æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨ä¸ä¼šä¹±åŠ  BOM çš„ç¼–è¾‘å™¨ã€‚Linux ä¸‹çš„ç¼–è¾‘å™¨åº”è¯¥éƒ½æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚WINDOWS ä¸‹ï¼Œè¯·å‹¿ä½¿ç”¨è®°äº‹æœ¬ç­‰ç¼–è¾‘å™¨ã€‚æ¨èçš„ç¼–è¾‘å™¨æ˜¯ï¼šSublime Textï¼›Editplus 2.12 ç‰ˆæœ¬ä»¥ä¸Šï¼› EmEditorï¼› UltraEditï¼ˆéœ€è¦å–æ¶ˆâ€˜æ·»åŠ  BOMâ€™çš„ç›¸å…³é€‰é¡¹ï¼‰ï¼› Dreamweaverï¼ˆéœ€è¦å–æ¶ˆâ€˜æ·»åŠ  BOMâ€™çš„ç›¸å…³é€‰é¡¹ï¼‰ç­‰ã€‚
å¯¹äºå·²ç»æ·»åŠ äº† BOM çš„æ–‡ä»¶ï¼Œè¦å–æ¶ˆçš„è¯ï¼Œå¯ä»¥ç”¨ä»¥ä¸Šç¼–è¾‘å™¨å¦å­˜ä¸€æ¬¡ã€‚ï¼ˆEditplus éœ€è¦å…ˆå¦å­˜ä¸º gbï¼Œå†å¦å­˜ä¸º UTF-8ï¼‰</p>
<p><strong>2015/08/13 18:11 è¡¥å……ï¼š</strong>
åœ¨å‰ç«¯æ˜¾ç¤ºï¼Œä¸å…‰ä¼šå ç”¨ä¸€ä¸ªç©ºè¡Œï¼Œè€Œä¸”è¿˜ä¼šé€ æˆ<code>&lt;/head&gt;&lt;body&gt;</code>æ ‡ç­¾çš„ä½ç§»ï¼Œè®©<code>&lt;meta&gt;</code>éƒ¨åˆ†ç§»åŠ¨åˆ°<code>body</code>é‡Œé¢ã€‚åŸå› æœªçŸ¥ã€‚åªèƒ½æ‹¿è‡ªå·±åšå®¢æµ‹è¯•äº† T.T æ•ˆæœå¦‚å›¾ã€‚</p>]]></content:encoded>
    </item>
  </channel>
</rss>
